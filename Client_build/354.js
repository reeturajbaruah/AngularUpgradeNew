"use strict";(self.webpackChunkng_app=self.webpackChunkng_app||[]).push([[354],{45354:(oe,D,a)=>{a.r(D),a.d(D,{ForgotUsernameModule:()=>te});var E=a(67914),O=a(486),e=a(13847),U=a(38018),z=a(95556),b=a(59008);let h=(()=>{class o{constructor(){}}return o.source="FORGOT USERNAME",o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["forgot-username-frame"]],inputs:{cmsData:"cmsData"},decls:5,vars:2,consts:[[1,"refresh-2020","u-spacing--widthFill"],[3,"hasGutter"]],template:function(t,n){1&t&&(e.TgZ(0,"main",0)(1,"title-banner"),e._uU(2),e.qZA(),e.TgZ(3,"page-filled-container",1),e._UZ(4,"ui-view"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",null==n.cmsData?null:n.cmsData.Title," "),e.xp6(1),e.Q6J("hasGutter",!1))},directives:[U.v,z.C,b.UIView],styles:["main[_ngcontent-%COMP%]{background-color:#efeff4}"]}),o})();var m=a(60195),P=a(94039),p=a(61954),g=a(63660),f=a(83434),C=a(96165);let y=(()=>{class o{constructor(t,n){this.httpService=t,this.responseErrorService=n}get baseUrl(){return"/api/forgotUsername"}forgotPasswordGetAccount(t){var n=this;return(0,m.Z)(function*(){const c=yield n.httpService.post("/api/forgotPassword/getAccount",t);return yield n.handleErrors(c),c})()}forgotUsernameGetAccount(t){var n=this;return(0,m.Z)(function*(){const i=`${n.baseUrl}/getAccount`,c=yield n.httpService.post(i,t);return yield n.handleErrors(c),c})()}handleErrors(t){var n=this;return(0,m.Z)(function*(){n.responseErrorService.isErrorFree(t)?yield n.responseErrorService.displayAlertsFromResponse(t):t.hasError=!0})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(C.OE),e.LFG(C.Sr))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var w=a(70664);let T=(()=>{class o{constructor(t){this.twoFAService=t}sendCode(t){var n=this;return(0,m.Z)(function*(){return n.twoFAService.sendVerificationCode(t)})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(w.h))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var d=a(79210),I=a(68043),R=a(39453),A=a(25023),S=a(55297),G=a(37864),F=a(4857),L=a(42350),Z=a(32993),N=a(27358);function Y(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"locate-your-account",11),e.NdJ("dataChange",function(i){return e.CHM(t),e.oxw().data=i}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("additionalInfoCmsData",t.additionalInfoCmsData)("helpLinkCmsData",t.helpLinkCmsData)("data",t.data)("agencies",t.agencies)}}let V=(()=>{class o{constructor(t,n,i,c,u,ne){this.stateService=t,this.webApiService=n,this.forgotUsernameService=i,this.dataService=c,this.window=u,this.webStorageConst=ne,this.moreInfoNeeded=!1,this.data={}}ngOnInit(){this.childCms=this.cmsData.Children.reduce((t,n)=>({...t,[n.ItemName]:n}),{}),this.data.loginResetOption=p.Eo.Email,this.dataService.getTagAuthorities().then(t=>{this.agencies=t,this.data.selectedAgency=this.agencies.find(n=>n===P.$.defaultAgency)})}get additionalInfoCmsData(){var t;return null===(t=this.childCms)||void 0===t?void 0:t["More Info"]}get helpLinkCmsData(){var t;return null===(t=this.childCms)||void 0===t?void 0:t["Help Locating Account"]}submit(t){var n=this;return(0,m.Z)(function*(){if(n.form.invalid)return;const i=yield n.searchAccount();if(!i.hasError)if(i.multipleAccountsFound){const c=n.form.value;n.moreInfoNeeded=!0,setTimeout(()=>{n.form.resetForm(),n.form.reset();const u=n.form.controls.primaryEmail_email;u.setValue(c.primaryEmail_email),u.markAsDirty(),u.updateValueAndValidity()})}else{const c=yield n.sendEmailCode(i);c&&c.verificationSent&&(yield n.stateService.go(t,{phoneNumber:null,email:n.emailAddress,acctId:i.acctId,loginId:i.loginId,dbSessionId:i.dbSessionId,channel:p.$W.Email},{custom:{isExplicitlyAllowedTransition:!0}}))}})()}searchAccount(){var t=this;return(0,m.Z)(function*(){return t.webApiService.forgotPasswordGetAccount({emailAddress:t.emailAddress,accountNumber:t.moreInfoNeeded&&t.data.accountIdentificationOption===p.Xb.AccountNumber?t.data.accountNumber:null,eztagAgency:t.moreInfoNeeded&&t.data.accountIdentificationOption===p.Xb.EzTagNumber?t.data.selectedAgency:null,phoneNumber:null,tagNumber:t.moreInfoNeeded&&t.data.accountIdentificationOption===p.Xb.EzTagNumber?t.data.ezTagNumber:null})})()}sendEmailCode(t){var n=this;return(0,m.Z)(function*(){return n.forgotUsernameService.sendCode({to:n.emailAddress,language:n.window.localStorage[n.webStorageConst.selectedLanguage],accountId:t.acctId,source:h.source,channel:p.$W.Email})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.StateService),e.Y36(y),e.Y36(T),e.Y36(C.Do),e.Y36(E.X9),e.Y36(d.LC))},o.\u0275cmp=e.Xpm({type:o,selectors:[["forgot-username-inputEmail"]],viewQuery:function(t,n){if(1&t&&e.Gf(g.F,5),2&t){let i;e.iGM(i=e.CRH())&&(n.form=i.first)}},inputs:{cmsData:"cmsData"},decls:20,vars:7,consts:[[1,"refresh-2020"],["fxLayout","column start","validation-focus","","novalidate",""],["forgotUsernameForm","ngForm"],["fxLayout","column"],[1,"u-spacing__firstHeaderToTitle--marginTop"],[1,"u-spacing__divider--marginTopBottom"],["name","primaryEmail",3,"emailAddress","header","required","emailAddressChange"],[4,"ngIf"],[3,"disabled","next"],["wizard-next",""],["wizard-cancel",""],["id","locateYourAccount",3,"additionalInfoCmsData","helpLinkCmsData","data","agencies","dataChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"page-centered-container",0)(1,"form",1,2)(3,"div",3)(4,"card-container",4)(5,"section",3)(6,"header")(7,"h2"),e._uU(8),e.qZA(),e._UZ(9,"mat-divider",5),e.qZA(),e.TgZ(10,"article"),e._uU(11),e.qZA(),e.TgZ(12,"section")(13,"email-address",6),e.NdJ("emailAddressChange",function(c){return n.emailAddress=c}),e.qZA()()()()(),e.YNc(14,Y,3,4,"ng-container",7),e.TgZ(15,"wizard-ui",8),e.NdJ("next",function(c){return n.submit(c)}),e.TgZ(16,"span",9),e._uU(17,"Continue"),e.qZA(),e.TgZ(18,"span",10),e._uU(19,"Cancel"),e.qZA()()()()),2&t){const i=e.MAs(2);e.xp6(8),e.Oqu(null==n.cmsData?null:n.cmsData.Title),e.xp6(3),e.hij(" ",null==n.cmsData?null:n.cmsData.Subtitle," "),e.xp6(2),e.Q6J("emailAddress",n.emailAddress)("header","\xa0")("required",!0),e.xp6(1),e.Q6J("ngIf",n.moreInfoNeeded),e.xp6(1),e.Q6J("disabled",i.pristine)}},directives:[I.D,g._Y,g.JL,g.F,R.R,A.D,S.d,G.a,F.O5,L.s,Z.P,N.O],styles:["page-centered-container[_ngcontent-%COMP%]{display:block;margin-top:19px}h2[_ngcontent-%COMP%]{max-height:70px}mat-divider[_ngcontent-%COMP%]{width:65px}article[role=instructions][_ngcontent-%COMP%]{font-family:Montserrat;font-size:16px;line-height:22px;display:block;margin-top:20px}section[_ngcontent-%COMP%]{display:block}wizard-ui[_ngcontent-%COMP%]{margin-top:32px;display:block}wizard-ui[_ngcontent-%COMP%]   [wizard-next][_ngcontent-%COMP%]{text-transform:uppercase}"]}),o})();var r=a(79558),l=a(44982),v=a(5723),M=a(19705);const x=(0,l.hE)(d.Xn.forgotUsername,r.Ne.InputEmail),J=[{name:r.Ne.Root,url:r.nC.Root,abstract:!0,settings:{},resolve:[(0,l.IM)(d.IT.anonymous),(0,l.QK)("cmsData",{ItemId:r.mZ.Root}),(0,l.oF)(d.s.Account)]},{name:r.Ne.InputEmail,url:r.nC.InputEmail,settings:{},resolve:[(0,l.IM)(d.IT.anonymous),(0,l.QK)("cmsData",{ItemId:r.mZ.InputEmail}),(0,l.oF)(d.s.Account)],wizard:{nextState:r.Ne.VerifyCode,cancelState:v.Dn.Login}},{name:r.Ne.VerifyCode,url:r.nC.VerifyCode,settings:{},resolve:[(0,l.IM)(d.IT.anonymous),(0,l.QK)("cmsData",{ItemId:r.mZ.VerifyCode}),(0,l.oF)(d.s.Account),x({denyRefresh:!0,explicitlyAllowed:[r.Ne.InputEmail],explicitlyForbidden:[r.Ne.IdentityConfirmed]})],params:{phoneNumber:null,email:null,acctId:null,loginId:null,dbSessionId:null,channel:null,isMissingEmail:null},wizard:{nextState:r.Ne.IdentityConfirmed,prevState:r.Ne.InputEmail,cancelState:v.Dn.Login}},{name:r.Ne.IdentityConfirmed,url:r.nC.IdentityConfirmed,settings:{},resolve:[(0,l.IM)(d.IT.anonymous),(0,l.QK)("cmsData",{ItemId:r.mZ.IdentityConfirmed}),(0,l.oF)(d.s.Account),x({denyRefresh:!0,explicitlyAllowed:[r.Ne.VerifyCode],explicitlyForbidden:[v.Dn.Login,M.Dn.FindAccount]})],params:{phoneNumber:null,email:null,acctId:null,loginId:null,dbSessionId:null,channel:null,isMissingEmail:null},wizard:{nextState:v.Dn.Login,cancelState:r.nC.InputEmail}}];var Q=a(41034),H=a(73201),X=a(26186),W=a(11917),j=a(37661),K=a(94582),B=a(49985);let $=(()=>{class o{constructor(t,n,i,c){this.stateService=t,this.cmsReplacementService=n,this.uiRouterGlobals=i,this.webApiService=c,this.source=h.source}ngOnInit(){this.cmsData.EMAIL_DESC=this.cmsReplacementService.transformTemplate(this.cmsData.EMAIL_DESC,{email:this.uiRouterGlobals.params.email})}verify(){var t=this;return(0,m.Z)(function*(){const n=yield t.webApiService.forgotUsernameGetAccount({emailAddress:t.uiRouterGlobals.params.email,phoneNumber:null,tagNumber:null,eztagAgency:null,accountNumber:t.uiRouterGlobals.params.acctId});if(!n.hasError){const i={...t.uiRouterGlobals.params,loginId:n.loginId};yield t.stateService.go(r.Ne.IdentityConfirmed,i,{custom:{isExplicitlyAllowedTransition:!0}})}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.StateService),e.Y36(j._n),e.Y36(f.UIRouterGlobals),e.Y36(y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["forgot-username-verify-code"]],inputs:{cmsData:"cmsData"},decls:5,vars:9,consts:[[1,"refresh-2020"],[3,"cmsInfo","contactInfo","acctId","source","channel","disableTryAnotherWay","verifyEmit"],[3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"page-centered-container",0)(1,"enter-verification-code",1),e.NdJ("verifyEmit",function(){return n.verify()}),e.qZA(),e.TgZ(2,"card-container"),e._UZ(3,"article",2),e.ALo(4,"safeHtml"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("cmsInfo",n.cmsData)("contactInfo",n.uiRouterGlobals.params.email)("acctId",n.uiRouterGlobals.params.acctId)("source",n.source)("channel",n.uiRouterGlobals.params.channel)("disableTryAnotherWay",!0),e.xp6(2),e.Q6J("innerHtml",e.lcZ(4,7,n.cmsData.LongDescription),e.oJD))},directives:[I.D,K.n,A.D],pipes:[B.z],styles:["card-container[_ngcontent-%COMP%]{display:block;margin-top:32px}wizard-ui[_ngcontent-%COMP%]{display:block;margin-top:32px}wizard-ui[_ngcontent-%COMP%]   [wizard-next][_ngcontent-%COMP%]{text-transform:uppercase}wizard-ui[_ngcontent-%COMP%]   [wizard-cancel][_ngcontent-%COMP%], wizard-ui[_ngcontent-%COMP%]   [wizard-previous][_ngcontent-%COMP%]{text-transform:capitalize}"]}),o})();var k=a(82701);const _={[r.Ne.Root]:h,[r.Ne.InputEmail]:V,[r.Ne.VerifyCode]:$,[r.Ne.IdentityConfirmed]:(()=>{class o{constructor(t,n){this.uiRouterGlobals=t,this.stateService=n}ngOnInit(){this.username=this.uiRouterGlobals.params.loginId}goToForgetPassword(){this.stateService.go(M.Dn.FindAccount)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.UIRouterGlobals),e.Y36(f.StateService))},o.\u0275cmp=e.Xpm({type:o,selectors:[["identity-confirmed"]],inputs:{cmsData:"cmsData"},decls:19,vars:3,consts:[[1,"refresh-2020"],["fxLayout","column"],[1,"u-spacing__firstHeaderToTitle--marginTop"],[1,"u-spacing__divider--marginTopBottom"],["translation-skip",""],[1,"linkSpacing"],["id","forgotPasswordLnk",3,"click"],["wizard-next",""]],template:function(t,n){1&t&&(e.TgZ(0,"page-centered-container",0)(1,"div",1)(2,"card-container",2)(3,"section",1)(4,"header")(5,"h2"),e._uU(6),e.qZA(),e._UZ(7,"mat-divider",3),e.qZA(),e.TgZ(8,"article"),e._uU(9),e.qZA(),e.TgZ(10,"article",4),e._uU(11),e.qZA()(),e.TgZ(12,"section")(13,"div",5)(14,"a",6),e.NdJ("click",function(){return n.goToForgetPassword()}),e._uU(15,"Forgot password?"),e.qZA()()()()(),e.TgZ(16,"wizard-ui")(17,"span",7),e._uU(18,"Login"),e.qZA()()()),2&t&&(e.xp6(6),e.Oqu(null==n.cmsData?null:n.cmsData.Title),e.xp6(3),e.hij(" ",null==n.cmsData?null:n.cmsData.Subtitle," "),e.xp6(2),e.hij(" ",n.username," "))},directives:[I.D,A.D,S.d,Z.P,N.O],styles:["page-centered-container[_ngcontent-%COMP%]{display:block;margin-top:19px}h2[_ngcontent-%COMP%]{max-height:70px}mat-divider[_ngcontent-%COMP%]{width:65px}article[_ngcontent-%COMP%]{font-family:Montserrat;font-size:16px;line-height:22px;display:block;margin-top:20px}section[_ngcontent-%COMP%]{display:block}wizard-ui[_ngcontent-%COMP%]{margin-top:32px;display:block}wizard-ui[_ngcontent-%COMP%]   [wizard-next][_ngcontent-%COMP%]{text-transform:uppercase}.linkSpacing[_ngcontent-%COMP%]{margin-top:32px}"]}),o})()},ee=J.map(o=>({...o,component:_[o.name]}));let te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[T,y],imports:[[(0,O.n4)([Q.U4],s=>s.twoFactorAuth.forgotUsername?ee:[]),E.ez,F.ez,S.t,H.lN,g.u5,X.n,W.K,k.D]]}),o})()}}]);