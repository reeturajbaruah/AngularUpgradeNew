"use strict";(self.webpackChunkng_app=self.webpackChunkng_app||[]).push([[958],{50958:(Be,A,o)=>{o.r(A),o.d(A,{VehiclesReplacementModule:()=>Ue});var l=o(60195),g=o(44367),Z=o(79150),p=o(4322),e=o(13847),v=o(83434),C=o(26434),x=o(96165);let O=(()=>{class n{constructor(t,i){this.dialogService=t,this.stateService=i}cancel(t,i){var s=this;return(0,l.Z)(function*(){const a={cmsContent:{Title:t.Title,PrimaryContent:t.LongDescription,AcceptBtn:"No",CancelBtn:"Yes"}};(yield s.dialogService.openGenericModal(Z.E5,a))||s.stateService.go(i)})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(x.xA),e.LFG(v.StateService))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var P=o(68043),y=o(63660),G=o(39453),u=o(4857),b=o(25023),Q=o(77129),_=o(55297),J=o(5472),T=o(32993),S=o(27358);function V(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"card-container"),e._UZ(2,"order-summary",9),e.TgZ(3,"section",10)(4,"header")(5,"h2"),e._uU(6),e.qZA(),e._UZ(7,"mat-divider",11),e.qZA(),e.ynx(8),e.TgZ(9,"choose-delivery-method",12),e.NdJ("deliveryMethodChange",function(s){return e.CHM(t),e.oxw().selectedDeliveryMethod=s})("onEdit",function(s){return e.CHM(t),e.oxw().onMailingAddressEdit(s)}),e.qZA(),e.BQk(),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("data",t.data),e.xp6(4),e.Oqu(t.cmsContent.Title),e.xp6(3),e.Q6J("mailingInfo",t.mailingInfo)("deliveryMethod",t.selectedDeliveryMethod)("isAddEzTag",!0)}}let H=(()=>{class n{constructor(t,i,s,a,m){this.state=t,this.replacementStateService=i,this.uiRouterGlobals=s,this.helperService=a,this.mailingService=m,this.selectedDeliveryMethod="",this.selectedReason=""}ngOnInit(){var t=this;return(0,l.Z)(function*(){if(t.uiRouterGlobals.params&&t.uiRouterGlobals.params.vehicle)t.tag=t.uiRouterGlobals.params.vehicle;else{const i=t.replacementStateService.getState();i.replaceTag&&i.reason&&i.deliveryMethod?(t.tag=i.replaceTag,t.selectedReason=i.reason,t.selectedDeliveryMethod=i.deliveryMethod.toString()):yield t.state.go(p.GC.Root)}t.mailingInfo=yield t.mailingService.getMailingAddress(),t.setupData(),t.selectedReason=JSON.parse(t.cmsContent.reasons)[0].key})()}setupData(){this.data={display:!0,summary:{title:this.cmsContent.summaryTitle,description:this.cmsContent.summaryDescription},details:[{tags:[this.tag],title:this.cmsContent.detailsTitle,isPlate:!1}],operations:{isEditable:!1,isRemoveable:!1},stateList:this.stateList}}nextStep(t){var i=this;return(0,l.Z)(function*(){i.replacementStateService.setState({deliveryMethod:i.selectedDeliveryMethod===g.l.Mail?g.l.Mail:g.l.Store,reason:i.selectedReason,replaceTag:i.tag}),yield i.state.go(t)})()}onMailingAddressEdit(t){var i=this;return(0,l.Z)(function*(){i.mailingService.onMailingAddressEdit(t,i.stateList,i.countryList,Z.zy)})()}cancel(t){var i=this;return(0,l.Z)(function*(){yield i.helperService.cancel(i.cancelContent,t)})()}disable(){var t;return"mail"===this.selectedDeliveryMethod&&null===(null===(t=this.mailingInfo)||void 0===t?void 0:t.address1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.StateService),e.Y36(C.z),e.Y36(v.UIRouterGlobals),e.Y36(O),e.Y36(p.H3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["delivery-method"]],inputs:{stateList:"stateList",countryList:"countryList",cancelContent:"cancelContent",cmsContent:"cmsContent"},decls:11,vars:2,consts:[[1,"refresh-2020"],["validation-focus","","novalidate",""],["Form","ngForm"],[4,"ngIf"],[1,"u-spacing__buttonToField--marginTop"],[3,"disabled","next","cancel"],["Wizard",""],["wizard-next",""],["wizard-cancel",""],[3,"data"],[1,"u-spacing__fieldToSection--marginTop"],[1,"u-spacing__divider--marginTopBottom"],[3,"mailingInfo","deliveryMethod","isAddEzTag","deliveryMethodChange","onEdit"]],template:function(t,i){1&t&&(e.TgZ(0,"page-centered-container",0)(1,"form",1,2),e.YNc(3,V,10,5,"ng-container",3),e.TgZ(4,"section",4)(5,"wizard-ui",5,6),e.NdJ("next",function(a){return i.nextStep(a)})("cancel",function(a){return i.cancel(a)}),e.TgZ(7,"span",7),e._uU(8,"CONTINUE"),e.qZA(),e.TgZ(9,"span",8),e._uU(10,"Cancel"),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",i.data),e.xp6(2),e.Q6J("disabled",i.disable()))},directives:[P.D,y._Y,y.JL,y.F,G.R,u.O5,b.D,Q.E,_.d,J.z,T.P,S.O],styles:["[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   .replacementReason[_ngcontent-%COMP%]{margin-top:10px}"]}),n})();var j=o(61264),K=o(6304),d=o(94822),X=o(63457),W=o(95556),k=o(59008);function $(n,r){if(1&n&&e._UZ(0,"stepper",2),2&n){const t=e.oxw();e.Q6J("steps",t.steps)("stepMap",t.stepMap)}}let q=(()=>{class n{constructor(t){this.windowRef=t,this.steps=[],this.stepMap={},this.showStepper=!1}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.showStepper=!0,t.steps=[{name:"Delivery Method",background:"secondary"},{name:"Review Order",background:"secondary"},{name:"Receipt",background:"secondary"}],t.stepMap={[d.G.ReplacementDeliveryMethod]:1,[d.G.ReplacementReviewOrder]:2,[d.G.ReplacementReceipt]:3}})()}scrollToTop(){var t=this;return(0,l.Z)(function*(){t.isHidden=!0,yield(0,K.Dc)(20),t.windowRef.scrollTo(0,0),t.isHidden=!1})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.X9))},n.\u0275cmp=e.Xpm({type:n,selectors:[["vehicles-replacement-frame"]],decls:4,vars:1,consts:[[1,"refresh-2020","u-spacing--widthFill"],[3,"steps","stepMap",4,"ngIf"],[3,"steps","stepMap"]],template:function(t,i){1&t&&(e.TgZ(0,"main",0),e.YNc(1,$,1,2,"stepper",1),e.TgZ(2,"page-filled-container"),e._UZ(3,"ui-view"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.showStepper))},directives:[u.O5,X.v,W.C,k.UIView],styles:["[_nghost-%COMP%]   main[_ngcontent-%COMP%]{background-color:#efeff4}@media not screen and (max-width: 959.98px){[_nghost-%COMP%]   main[_ngcontent-%COMP%]{padding-left:85px;padding-right:85px}}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:24px 15px 16px}[_nghost-%COMP%]   main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;line-height:30px;color:#fc2125;margin-bottom:10px}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:15px}}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   main[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:11px 14px 15px}}[_nghost-%COMP%]   stepper[_ngcontent-%COMP%]{display:block;min-height:32px}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   stepper[_ngcontent-%COMP%]{min-height:unset}}[_nghost-%COMP%]   page-filled-container[_ngcontent-%COMP%]{display:block}@media not screen and (max-width: 959.98px){[_nghost-%COMP%]   page-filled-container[_ngcontent-%COMP%]{background-color:#efeff4}}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   page-filled-container[_ngcontent-%COMP%]{background-color:#fff}}"]}),n})();var ee=o(18011),D=o(96471),te=o(32761),ne=o(23204),ie=o(38321),oe=o(47553),F=o(73201),ae=o(70580),re=o(29719);function se(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"span",8),e._uU(2,"Ship EZ TAG(s) to:"),e.qZA(),e._UZ(3,"address-display",9),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("address",t.mailingAddress)("international",t.mailingAddress.international)("showLabels",!1)("showEdit",!1)}}function ce(n,r){if(1&n&&e._UZ(0,"address-display",9),2&n){const t=e.oxw(3);e.Q6J("address",t.billingInfo.billingType===t.BillingType.Credit?t.billingInfo.credit:t.billingInfo.eft)("international",t.billingInfo.billingType===t.BillingType.Credit?t.billingInfo.credit.international:t.billingInfo.eft.international)("showLabels",!1)("showEdit",!1)}}function le(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"header",1)(2,"h3"),e._uU(3,"Billing Information"),e.qZA()(),e._UZ(4,"mat-divider"),e.TgZ(5,"section"),e._UZ(6,"payment-display",10),e.TgZ(7,"article",11),e.YNc(8,ce,1,4,"address-display",12),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("billingType",t.billingInfo.billingType)("bankDetails",t.billingInfo.eft)("creditCard",t.billingInfo.credit)("hideTitle",!0)("showAccountNumber",!0)("showNameOnCard",!0)("showLabels",!1),e.xp6(2),e.Q6J("ngIf",t.billingInfo&&t.billingInfo.billingType)}}function de(n,r){if(1&n&&(e.TgZ(0,"div",19),e._UZ(1,"vehicle-cart-row-component",20),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("canRemove",!1)("canEdit",!1)("ezTag",t)}}function pe(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"section",13)(2,"div",14)(3,"div")(4,"fx-row",15)(5,"div",16)(6,"mat-label",17),e._uU(7),e.qZA()()()()(),e.YNc(8,de,2,3,"div",18),e.qZA(),e.BQk()),2&n){const t=r.$implicit;e.xp6(4),e.Q6J("isLabel",!0)("backgroundColorClass","transparent-background"),e.xp6(3),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngForOf",t.ezTags)}}function me(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"header",1)(2,"h2"),e._uU(3),e.qZA()(),e._UZ(4,"mat-divider"),e.TgZ(5,"article"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"section")(10,"div",2)(11,"span"),e._uU(12),e.qZA(),e._UZ(13,"currency",3),e.qZA(),e.TgZ(14,"div",4),e._uU(15),e.ALo(16,"dateWithTimeZone"),e.qZA()(),e.TgZ(17,"p"),e._uU(18),e.qZA(),e.TgZ(19,"header",1)(20,"h3"),e._uU(21),e.qZA()(),e._UZ(22,"mat-divider"),e.TgZ(23,"section",5)(24,"span",6),e._uU(25),e.qZA(),e.TgZ(26,"span",6),e._uU(27),e.qZA()(),e.TgZ(28,"section",5)(29,"span"),e._uU(30),e.qZA(),e.YNc(31,se,4,4,"ng-container",0),e.qZA(),e.YNc(32,le,9,8,"ng-container",0),e.TgZ(33,"header",1)(34,"h3"),e._uU(35),e.qZA()(),e._UZ(36,"mat-divider"),e.YNc(37,pe,9,4,"ng-container",7),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.summary.title," "),e.xp6(3),e.Oqu(t.summary.description),e.xp6(2),e.Oqu(t.summary.subtitle),e.xp6(4),e.hij("",t.paymentInfo.paymentAmount.label,":"),e.xp6(1),e.Q6J("value",t.paymentInfo.paymentAmount.amount),e.xp6(2),e.AsE(" ",t.paymentInfo.paymentDate.label," ",e.xi3(16,16,t.paymentInfo.paymentDate.receivedDate,"dateTime4")," "),e.xp6(3),e.hij(" ",t.paymentInfo.replenishAmt,""),e.xp6(3),e.hij(" ",t.accountInfo.title," "),e.xp6(4),e.hij("Account Name: ",t.actName,""),e.xp6(2),e.hij("Account Number: ",t.actNumber,""),e.xp6(3),e.Oqu(t.data.deliveryMethodInfo.description),e.xp6(1),e.Q6J("ngIf",t.isByMail),e.xp6(1),e.Q6J("ngIf",t.billingInfo),e.xp6(3),e.Oqu(t.tagsOrdered.title),e.xp6(2),e.Q6J("ngForOf",t.tagsOrdered.tags)}}let ge=(()=>{class n{constructor(t,i){this.accountService=t,this.currentUserService=i,this.BillingType=g.ck,this.loadPage=!1}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.summary=t.data.summary,t.paymentInfo=t.data.paymentInfo,t.tagsOrdered=t.data.tagsOrdered,t.setActInfo(),yield t.setMailingInfo(),t.billingInfo=yield t.getBillingInfo(),t.loadPage=!0})()}setMailingInfo(){var t=this;return(0,l.Z)(function*(){t.data.deliveryMethodInfo.type===g.l.Mail?(t.isByMail=!0,t.mailingAddress=yield t.accountService.getMailingInfo()):t.isByMail=!1})()}setActInfo(){this.accountInfo=this.data.accountInfo;const t=this.currentUserService.getCurrentUser();this.actNumber=t.acctId,this.actName=t.firstName+" "+t.lastName}getBillingInfo(){var t=this;return(0,l.Z)(function*(){const i=yield t.accountService.getAllPaymentMethods();if(i){if(i.bankAccounts){const s=i.bankAccounts.filter(a=>a.primary);if(s.length>0)return{billingType:g.ck.Eft,eft:s[0],credit:null}}if(i.creditCards){const s=i.creditCards.filter(a=>a.primary);if(s.length>0)return{billingType:g.ck.Credit,eft:null,credit:s[0]}}}})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.BR),e.Y36(x.SF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["receipt"]],inputs:{data:"data"},decls:1,vars:1,consts:[[4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between end"],[1,"paymentAmountFlex","summary","paymentAmount"],[3,"value"],[1,"summary"],["fxLayout","column"],["translation-skip",""],[4,"ngFor","ngForOf"],[1,"itemFont"],[3,"address","international","showLabels","showEdit"],[3,"billingType","bankDetails","creditCard","hideTitle","showAccountNumber","showNameOnCard","showLabels"],[1,"u-spacing__addressToPaymentDisplay--marginTop"],[3,"address","international","showLabels","showEdit",4,"ngIf"],[1,"u-spacing--widthFill"],["fxLayout","row","fxLayoutAlign","start start"],[3,"isLabel","backgroundColorClass"],["col-start","",1,"fx-flex-auto","fx-layout-row","fx-layout-align-start-center"],[1,"fx-flex-auto-shrink-more","limited-flex"],["fxLayout","row","fxLayoutAlign","start start","class","u-spacing--widthFill",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start start",1,"u-spacing--widthFill"],[3,"canRemove","canEdit","ezTag"]],template:function(t,i){1&t&&e.YNc(0,me,38,19,"ng-container",0),2&t&&e.Q6J("ngIf",i.loadPage)},directives:[u.O5,_.d,te.Q,ne.G,ie.K,u.sg,oe.b,F.hX,ae.L],pipes:[re.J],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none;visibility:hidden}[_nghost-%COMP%]   .fx-flex-auto[_ngcontent-%COMP%]{flex:1 1 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-flex-none[_ngcontent-%COMP%]{flex:0 0 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-flex-auto-shrink-more[_ngcontent-%COMP%]{flex:1 2 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-flex-auto-grow-more[_ngcontent-%COMP%]{flex:2 1 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-layout-row[_ngcontent-%COMP%]{flex-direction:row;box-sizing:border-box;display:flex}[_nghost-%COMP%]   .fx-layout-column[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex}[_nghost-%COMP%]   .fx-layout-align-start-center[_ngcontent-%COMP%]{align-content:center;justify-content:flex-start;align-items:center}[_nghost-%COMP%]   .fx-layout-align-end-center[_ngcontent-%COMP%]{align-content:center;justify-content:flex-end;align-items:center}[_nghost-%COMP%]   .limited-flex[_ngcontent-%COMP%]{min-width:170px;max-width:530px;width:100%}[_nghost-%COMP%]   .unlimited-flex[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .limited-flex-end[_ngcontent-%COMP%]{min-width:70px;max-width:80px;width:100%;text-align:end}[_nghost-%COMP%]   .larger-limited-flex-end[_ngcontent-%COMP%]{min-width:143px;max-width:145px;width:100%;text-align:end}[_nghost-%COMP%]   .table-space[_ngcontent-%COMP%]{margin-top:8px}[_nghost-%COMP%]   .table-space.lt-md[_ngcontent-%COMP%]{margin-top:2px}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:16px}}[_nghost-%COMP%]   p[_ngcontent-%COMP%], [_nghost-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:32px;display:flex;flex-direction:column}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:64px;margin-top:16px;margin-bottom:20px}[_nghost-%COMP%]   .paymentAmountFlex[_ngcontent-%COMP%]{display:flex;flex-direction:row;place-content:flex-end space-between;align-items:flex-end}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]{height:50px;padding:16px 16px 11px;font-size:16px;line-height:26px;margin:0 -16px}[_nghost-%COMP%]   .paymentAmount[_ngcontent-%COMP%]{border-radius:10px;background-color:#e0e0ef;font-weight:700}"]}),n})();var he=o(65380),R=o(45184);function ue(n,r){if(1&n&&e._UZ(0,"receipt",3),2&n){const t=e.oxw();e.Q6J("data",t.data)}}function fe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"section")(1,"action-buttons",4),e.NdJ("main",function(){e.CHM(t);const s=e.MAs(5);return e.oxw().proceed(s)}),e.TgZ(2,"span",5),e._uU(3,"PROCEED"),e.qZA()(),e._UZ(4,"wizard-ui",null,6),e.qZA()}}function ve(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"section",7)(1,"wizard-ui",8),e.NdJ("next",function(s){return e.CHM(t),e.oxw().nextStep(s)}),e.TgZ(2,"span",9),e._uU(3," ACCOUNT DASHBOARD "),e.qZA()(),e.TgZ(4,"a",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().viewVehiclesClick()}),e._uU(5," Manage My Vehicles "),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("reverseOrder",!0))}let xe=(()=>{class n{constructor(t,i,s,a,m){this.state=t,this.storefrontUtilityService=i,this.receiptDataHelper=s,this.replacementStateService=a,this.mailingService=m}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.isKiosk=t.storefrontUtilityService.isRunningAsKiosk&&!t.storefrontUtilityService.webStoreData.fullSiteMode,t.data=t.getData(),yield t.mailingService.clearData()})()}getData(){const t=this.replacementStateService.getState();return this.receiptDataHelper.getData({cmsContent:this.cmsContent,paymentAmt:t.amount,ezTags:[t.replaceTag],isPlate:!1,deliveryMethod:t.deliveryMethod})}viewVehiclesClick(){var t=this;return(0,l.Z)(function*(){yield t.state.go(p.GC.Root)})()}nextStep(t){var i=this;return(0,l.Z)(function*(){yield i.state.go(t)})()}proceed(t){this.isKiosk&&t&&t.gotoNextState()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.StateService),e.Y36(ee.ST),e.Y36(D.e),e.Y36(C.z),e.Y36(p.H3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["replacement-receipt"]],inputs:{cmsContent:"cmsContent"},decls:6,vars:3,consts:[[3,"data",4,"ngIf"],[4,"ngIf","ngIfElse"],["nonkiosk",""],[3,"data"],[3,"main"],["action-main",""],["wizardUi",""],["fxLayout","row","fxLayout.lt-md","column"],[3,"reverseOrder","next"],["wizard-next",""],[3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"page-centered-container")(1,"card-container"),e.YNc(2,ue,1,1,"receipt",0),e.YNc(3,fe,6,0,"section",1),e.YNc(4,ve,6,1,"ng-template",null,2,e.W1O),e.qZA()()),2&t){const s=e.MAs(5);e.xp6(2),e.Q6J("ngIf",i.data),e.xp6(1),e.Q6J("ngIf",i.isKiosk)("ngIfElse",s)}},directives:[P.D,b.D,u.O5,ge,he.O,T.P,R.xw,S.O],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none;visibility:hidden}[_nghost-%COMP%]   .fx-flex-auto[_ngcontent-%COMP%]{flex:1 1 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-flex-none[_ngcontent-%COMP%]{flex:0 0 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-flex-auto-shrink-more[_ngcontent-%COMP%]{flex:1 2 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-flex-auto-grow-more[_ngcontent-%COMP%]{flex:2 1 auto;box-sizing:border-box}[_nghost-%COMP%]   .fx-layout-row[_ngcontent-%COMP%]{flex-direction:row;box-sizing:border-box;display:flex}[_nghost-%COMP%]   .fx-layout-column[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex}[_nghost-%COMP%]   .fx-layout-align-start-center[_ngcontent-%COMP%]{align-content:center;justify-content:flex-start;align-items:center}[_nghost-%COMP%]   .fx-layout-align-end-center[_ngcontent-%COMP%]{align-content:center;justify-content:flex-end;align-items:center}[_nghost-%COMP%]   .limited-flex[_ngcontent-%COMP%]{min-width:170px;max-width:530px;width:100%}[_nghost-%COMP%]   .unlimited-flex[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .limited-flex-end[_ngcontent-%COMP%]{min-width:70px;max-width:80px;width:100%;text-align:end}[_nghost-%COMP%]   .larger-limited-flex-end[_ngcontent-%COMP%]{min-width:143px;max-width:145px;width:100%;text-align:end}[_nghost-%COMP%]   .table-space[_ngcontent-%COMP%]{margin-top:8px}[_nghost-%COMP%]   .table-space.lt-md[_ngcontent-%COMP%]{margin-top:2px}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:16px}}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]   [wizard-next][_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{padding:10px 20px}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{width:100%;text-align:center}}[_nghost-%COMP%]   p[_ngcontent-%COMP%], [_nghost-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:32px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:64px;margin-top:16px;margin-bottom:20px}"]}),n})();var z=o(14083),Ce=o(37661),ye=o(95615),Me=o(18407);let E=(()=>{class n{constructor(t){this.httpService=t}replace(t){var i=this;return(0,l.Z)(function*(){return yield i.httpService.post("/api/sessions/ManageVehicles/ReplaceEZTag",t)})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Me.OE))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Oe=o(12018);let U=(()=>{class n{constructor(t,i){this.api=t,this.state=i}replace(){var t=this;return(0,l.Z)(function*(){var i,s;const a=t.state.getState();if(a.deliveryMethod&&"{}"!==JSON.stringify(a.replaceTag)&&a.reason){const M={deliveryMethod:(null===(i=null==a?void 0:a.deliveryMethod)||void 0===i?void 0:i.toString())===g.l.Store.toString()?g.l.Pickup.toString():null===(s=null==a?void 0:a.deliveryMethod)||void 0===s?void 0:s.toString(),reason:a.reason,tagId:a.replaceTag.tagId,motorCycleFlag:a.replaceTag.isMotorcycleDisabled,licPlate:a.replaceTag.licPlate,licState:a.replaceTag.licState,accountVehicleId:a.replaceTag.acctVehicleId},I=yield t.api.replace(M);return t.parseResponse(I)}return new Promise((m,M)=>m({successStatus:!1,errors:[{key:"Error",message:"Something went wrong: Please pass sufficient data in request"}]}))})()}parseResponse(t){const i={};return t.successStatus?i.successStatus=!0:(i.successStatus=!1,i.errors=[{key:t.errors?t.errors[0].key:"Error",message:t.errors?t.errors[0].message:"Something went wrong.Replace failed."}]),i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(E),e.LFG(Oe.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Pe=o(49016),L=o(39230);function _e(n,r){if(1&n&&e._UZ(0,"review-order",7),2&n){const t=e.oxw();e.Q6J("data",t.data)("ezTagMailingAddress",t.mailingInfo)("isAddEzTag",!0)}}let Te=(()=>{class n{constructor(t,i,s,a,m,M,I,Le,Ye,Ne){this.stateService=t,this.replacementStateService=i,this.cmsReplacementService=s,this.paymentInfoService=a,this.reviewOrderService=m,this.helperService=M,this.facade=I,this.toaster=Le,this.mailingService=Ye,this.currentUserService=Ne,this.paymentDueInfo={}}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.tags=t.replacementStateService.getState().replaceTag,t.paymentDueInfo=yield t.paymentInfoService.getPaymentInfo([t.tags]),t.currentBalance=t.paymentInfoService.getCurrentBalance(),t.mailingInfo=yield t.mailingService.getMailingAddress(),t.pageCms.RebillToolTip=t.cmsReplacementService.transformTemplate(t.pageCms.RebillToolTip,{currentBalAmt:t.currentBalance,minReqAmt:t.paymentDueInfo.depositAmt,totalAmt:t.paymentDueInfo.totalAmt}),t.setupData(),t.subscribeEvents()})()}setupData(){this.data={deliveryMethod:{display:!0,header:this.pageCms.DeliveryMethodHeader,operations:[{action:z.a.Edit,display:!0,label:"Edit",source:"delivery-method"}],type:this.replacementStateService.getState().deliveryMethod},orderSummary:{display:!0,summary:{title:this.pageCms.OrderSummaryTitle,description:this.pageCms.OrderSummaryDesc},details:[{tags:[this.tags],title:this.pageCms.OrderSummaryDetailsTitle,isPlate:!1}],operations:{isEditable:!1,isRemoveable:!1},stateList:this.states},paymentSummary:this.mapPaymentSummary()}}mapPaymentSummary(){return{header:this.pageCms.PaymentSummaryTitle,paymentContext:this.pageCms.PaymentContext,replenishmentAmt:{link:{linkDesc:this.pageCms.ReplenishmentAmtDesc,onClickContent:this.replenishmentAmtModalCms},isOptIn:this.currentUserService.getCurrentUser().rebillOptIn},tagInfo:this.mapPaymentSummTagInfo(),paymentDueInfo:{tagSalesAmt:this.paymentDueInfo.tagSalesAmt,totalAmt:this.paymentDueInfo.totalAmt,rebillTooltip:this.pageCms.RebillToolTip}}}mapPaymentSummTagInfo(){const i=this.currentUserService.getCurrentUser().rebillOptIn?this.pageCms.MotorcycleTextForOptInRep:this.pageCms.MotorcycleTextForOptOutRep;return{display:!0,contextDesc:this.pageCms.TagInfo,link:{linkDesc:this.pageCms.TagInfoModalLink,onClickContent:this.tagInfoModalCms},motorcycleText:this.tags.motorcycle?i:null}}subscribeEvents(){this.reviewOrderService.subscribe(t=>{t.action===z.a.Edit&&"delivery-method"===t.source&&this.editDeliveryMethod()})}editDeliveryMethod(){this.stateService.go(d.G.ReplacementDeliveryMethod)}placeOrder(t){var i=this;return(0,l.Z)(function*(){if(yield i.mailingService.setMailingAddressOnAcctLevel()){const a=yield i.facade.replace();if(a.successStatus){const m=i.replacementStateService.getState();i.replacementStateService.setState({...m,amount:i.paymentDueInfo.totalAmt}),yield i.stateService.go(t)}else i.toaster.show("Error",a.errors[0].message)}})()}cancel(t){var i=this;return(0,l.Z)(function*(){yield i.helperService.cancel(i.cancelContent,t)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.StateService),e.Y36(C.z),e.Y36(Ce._n),e.Y36(p.Fg),e.Y36(ye.W),e.Y36(O),e.Y36(U),e.Y36(x.MJ),e.Y36(p.H3),e.Y36(x.SF))},n.\u0275cmp=e.Xpm({type:n,selectors:[["replacement-review-order"]],inputs:{pageCms:"pageCms",replenishmentAmtModalCms:"replenishmentAmtModalCms",tagInfoModalCms:"tagInfoModalCms",states:"states",cancelContent:"cancelContent"},decls:10,vars:1,consts:[[1,"refresh-2020"],[3,"data","ezTagMailingAddress","isAddEzTag",4,"ngIf"],[3,"next","cancel"],["wizard-next",""],["wizard-previous","","fxLayout","row","fxLayoutAlign","start center"],["svgIcon","previous-arrow"],["wizard-cancel",""],[3,"data","ezTagMailingAddress","isAddEzTag"]],template:function(t,i){1&t&&(e.TgZ(0,"page-centered-container",0),e.YNc(1,_e,1,3,"review-order",1),e.TgZ(2,"wizard-ui",2),e.NdJ("next",function(a){return i.placeOrder(a)})("cancel",function(a){return i.cancel(a)}),e.TgZ(3,"span",3),e._uU(4,"PLACE ORDER"),e.qZA(),e.TgZ(5,"span",4),e._UZ(6,"mat-icon",5),e._uU(7," Previous "),e.qZA(),e.TgZ(8,"span",6),e._uU(9,"Cancel"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.data))},directives:[P.D,u.O5,Pe.C,T.P,S.O,R.xw,R.Wh,L.Hw],styles:["[_nghost-%COMP%]   tool-tip[_ngcontent-%COMP%]   [tool-tip-message][_ngcontent-%COMP%]{width:277px;padding:16px;font-family:Montserrat;font-size:12px;line-height:15px;font-weight:600}@media screen and (max-width: 959.98px){[_nghost-%COMP%]   tool-tip[_ngcontent-%COMP%]   [tool-tip-message][_ngcontent-%COMP%]{left:calc(50vw - 138.5px);top:-92px}}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]{display:block;margin-top:32px}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]   [wizard-next][_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]   [wizard-cancel][_ngcontent-%COMP%], [_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]   [wizard-previous][_ngcontent-%COMP%]{text-transform:capitalize}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}"]}),n})();var Se=o(68359),Re=o(68665),Y=o(67914),we=o(82701),Ie=o(26186),Ae=o(29419),Ze=o(93849),w=o(63078),N=o(75888),h=o(79210),c=o(44982);const B=(0,c.hE)(h.Xn.vehiclesTagReplacementCurrentStep,p.GC.Root),be=[{name:d.G.Replacement.toString(),abstract:!0,settings:{},resolve:[(0,c.oF)(h.s.Account),(0,c.IM)(h.IT.active)],wizard:{}},{name:d.G.ReplacementDeliveryMethod.toString(),url:w.Z.ReplacementDeliveryMethod,settings:{},resolve:[(0,c.oF)(h.s.Account),(0,c.IM)(h.IT.active),(0,c.SZ)("stateList"),(0,c.pe)("countryList"),(0,c.QK)("cancelContent",{ItemId:"97D34BCD-F6B5-4454-B923-4283059B0754"}),(0,c.QK)("cmsContent",{mergeParams:!0,ItemId:"6063ED69-ACF5-4FE0-BC90-45BECDA7F441"})],wizard:{nextState:d.G.ReplacementReviewOrder,cancelState:p.GC.Root},params:{vehicle:null}},{name:d.G.ReplacementReviewOrder.toString(),url:w.Z.ReplacementReviewOrder,settings:{},resolve:[(0,c.oF)(h.s.Account),(0,c.IM)(h.IT.active),(0,c.SZ)("stateList"),B({denyRefresh:!0,explicitlyForbidden:[d.G.ReplacementReceipt]}),(0,c.QK)("pageCms",{ItemId:"F4F9063E-73CC-4DF2-8E99-B31A69661F6F"}),(0,c.QK)("replenishmentAmtModalCms",{ItemId:"ABB96729-0014-4E70-9E97-1629FCF42197"}),(0,c.QK)("tagInfoModalCms",{ItemId:"6767BCB2-EEC7-4217-922F-32956DFF3F5F"}),(0,c.QK)("cancelContent",{ItemId:"97D34BCD-F6B5-4454-B923-4283059B0754"})],wizard:{nextState:d.G.ReplacementReceipt,prevState:d.G.ReplacementDeliveryMethod,cancelState:p.GC.Root}},{name:d.G.ReplacementReceipt.toString(),url:w.Z.ReplacementReceipt,settings:{},resolve:[(0,c.oF)(h.s.Account),(0,c.IM)(h.IT.active),(0,c.QK)("cmsContent",{mergeParams:!0,ItemId:"F2734D53-4B2E-45E3-A619-AF6E6E7669E1"}),B({denyRefresh:!0,allowed:[d.G.ReplacementReviewOrder],explicitlyForbidden:[N.Dn.Frame,p.GC.Root]})],wizard:{nextState:N.Dn.Frame,isEndState:!0}}];var De=o(486),Fe=o(50405);const ze={[d.G.Replacement]:q,[d.G.ReplacementDeliveryMethod]:H,[d.G.ReplacementReviewOrder]:Te,[d.G.ReplacementReceipt]:xe},Ee=be.map(n=>({...n,component:ze[n.name]}));let Ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[E,U,C.z,D.e,p.Fg,p.fy,O],imports:[[(0,De.n4)([Y.U4],r=>r.vehicleReplacement?Ee:[]),Y.ez,u.ez,y.u5,Re.LD,F.lN,L.Ps,_.t,we.D,Se.o9,Ie.n,Ae.lg,Ze.U,Fe.j]]}),n})()}}]);