"use strict";(self.webpackChunkng_app=self.webpackChunkng_app||[]).push([[2],{30002:(Be,Y,s)=>{s.r(Y),s.d(Y,{CmsIds:()=>l.ST,FeatureToggles:()=>l.uv,LoginModule:()=>Qe,Routes:()=>l.Z5,StateNames:()=>l.sV,cmsIds:()=>l._J,featureToggles:()=>l.fq,stateNames:()=>l.Dn,urlPaths:()=>l.o0});var ie=s(59008),c=s(63660),m=s(4857),R=s(67914),se=s(29419),re=s(26186),b=s(30307),g=s(60195),_=s(75888),q=s(79150),l=s(5723),B=s(19705),ae=s(97064),H=s(22118),ce=s(93589),de=s(79558),k=s(45702),e=s(13847),u=s(96165),z=s(18011),le=s(66587),P=s(67734),Z=s(83434),W=s(40916),I=s(87917),U=s(10402),ge=s(61111),F=s(14717),j=s(32994),ue=s(36164),me=s(10061),L=s(38018),O=s(68043),h=s(45184),N=s(25023),y=s(55297),D=s(39453),J=s(35256),x=s(73201),G=s(65316),K=s(79636),E=s(14550),$=s(27554),V=s(32993);function pe(r,d){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"a",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().goToForgotUsernamePage()}),e._uU(3,"Forgot Username?"),e.qZA()(),e.BQk()}}function he(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"section",26)(1,"a",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().goToFirstTimeLoginPage()}),e._uU(2,"First Time Login?"),e.qZA(),e._UZ(3,"mat-divider",28),e.TgZ(4,"a",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().goToSignUpPage()}),e._uU(5,"Sign Up For EZ TAG"),e.qZA()()}2&r&&(e.xp6(3),e.Q6J("vertical",!0))}let fe=(()=>{class r{constructor(t,n,o,i,a,p,f,v,S,C,M,A,T,w,Q,Ye,Re,be,qe){this.responseErrorService=t,this.stringUtils=n,this.operatingSystemSnifferService=o,this.storefrontUtilityService=i,this.storefrontModalService=a,this.authChannel=p,this.state=f,this.coreStateNames=v,this.authService=S,this.addMissingInformationService=C,this.authenticateRedirectService=M,this.suspendedAccountService=A,this.userRoles=T,this.dialogService=w,this.environmentConfig=Q,this.cmsItemId=Ye,this.currentUserService=Re,this.accntService=be,this.session=qe,this.login={userName:"",password:""},this.isShowPassword=!1}ngOnInit(){var t=this;return(0,g.Z)(function*(){const n=String(t.cmsContent.Popups);t.cmsContent.Popups={MAPP_Login_Modal_Title:t.stringUtils.getUrlParameter("MAPP_Login_Modal_Title",n),MAPP_Login_Browser:t.stringUtils.getUrlParameter("MAPP_Login_Browser",n),MAPP_Login_Android:t.stringUtils.getUrlParameter("MAPP_Login_Android",n),MAPP_Login_IOS:t.stringUtils.getUrlParameter("MAPP_Login_IOS",n),MAPP_Login_Other:t.stringUtils.getUrlParameter("MAPP_Login_Other",n)},t.enableForgotUsername=t.environmentConfig.twoFactorAuth.forgotUsername,(t.session.userRole===t.userRoles.notAuthenticatedMf||t.session.userRole===t.userRoles.missingRequiredInformation)&&(yield t.authService.logout())})()}getLogin(t,n){var o=this;return(0,g.Z)(function*(){if(t.valid)try{const i=yield o.authService.login(o.login);i&&o.responseErrorService.isErrorFree(i)&&(yield o.handleLoginInformation(i,n))}catch(i){if(o.storefrontUtilityService.isRunningAsKiosk)throw i}})()}handleLoginInformation(t,n){var o=this;return(0,g.Z)(function*(){const i=!o.storefrontUtilityService.isRunningAsKiosk||o.storefrontUtilityService.isRunningAsKiosk&&o.storefrontUtilityService.webStoreData.fullSiteMode;if(o.environmentConfig.twoFactorAuth.enableLogin&&t.passwordNeedsReset&&!t.isMfaCompleted)return o.currentUserService.updateCurrentUser(t),yield o.state.go(k.jH.MultiFactorAuthentication,{loginApiResponse:t},{custom:{isExplicitlyAllowedTransition:!0}}),!0;const p=o.addMissingInformationService.isMissingInfo(t.passwordNeedsReset,t.emailIsMissing,t.securityQuestionIsMissing);t.invalidAccountSource?o.showAccountBlockModal():(yield o.authChannel.logIn(t),p?(o.addMissingInformationService.setMissingInformation(t.passwordNeedsReset,t.emailIsMissing,t.securityQuestionIsMissing),i&&(yield o.state.go(l.Dn.AddMissingInformation))):(o.responseErrorService.displayAlertsFromResponse(t,!0),i&&(yield o.handleRedirects(t))),o.storefrontUtilityService.isRunningAsKiosk&&!o.storefrontUtilityService.webStoreData.fullSiteMode&&n&&("PF"===t.accountStatus?yield o.storefrontModalService.genericPostSignup(o.cmsItemId.storefrontCashAccountLoginModal):"S"===t.acctActivity?yield o.storefrontModalService.showVehicalViolationSuspendedAccountMessage():n.gotoNextState()))})()}handleRedirects(t){var n=this;return(0,g.Z)(function*(){n.authService.isAuthorized(n.userRoles.suspended)?yield n.suspendedAccountService.getFirstSuspendedAccountState().then(n.state.go):t.newAccountStep.accountComplete?n.authenticateRedirectService.hasSavedState?yield n.authenticateRedirectService.redirectLoginAndDeleteSavedState():n.environmentConfig.twoFactorAuth.enableLogin&&!t.isMfaCompleted?yield n.state.go(k.jH.MultiFactorAuthentication,{custom:{isExplicitlyAllowedTransition:!0}}):yield n.state.go(_.Dn.Frame):yield n.createAcctRoute(t)})()}showAccountBlockModal(){const t=this.operatingSystemSnifferService.getOsFull(),n=this.operatingSystemSnifferService.getDeviceFull();let o=this.cmsContent.Popups.MAPP_Login_Other;switch(t){case"android":o=this.cmsContent.Popups.MAPP_Login_Android;break;case"ios":o=this.cmsContent.Popups.MAPP_Login_IOS;break;case"windows":case"macos":case"linux":if("Unknown"===n){o=this.cmsContent.Popups.MAPP_Login_Browser;break}}this.dialogService.openGenericModal(q.E5,{cmsContent:{Title:this.cmsContent.Popups.MAPP_Login_Modal_Title,AcceptBtn:"CLOSE",PrimaryContent:o}})}goToForgotPasswordPage(){var t=this;return(0,g.Z)(function*(){t.storefrontUtilityService.isRunningAsKiosk&&!t.storefrontUtilityService.webStoreData.fullSiteMode?(yield t.storefrontModalService.showGotoCsr())&&(yield t.state.go(t.coreStateNames.storefrontSurvey)):yield t.state.go(t.environmentConfig.twoFactorAuth.enableForgotPassword?B.Dn.FindAccount:B.Dn.Root)})()}goToFirstTimeLoginPage(){var t=this;return(0,g.Z)(function*(){const n=t.environmentConfig.twoFactorAuth.enableFirstTimeLogin?ae.Dn.FindAccount:t.coreStateNames.setupOnlineAccessLoginInfo;yield t.state.go(n)})()}goToSignUpPage(){var t=this;return(0,g.Z)(function*(){t.environmentConfig.createAccountRefresh?yield t.state.go(H.t.Login):yield t.state.go(t.coreStateNames.createAccount)})()}createAcctRoute(t){var n=this;return(0,g.Z)(function*(){if(n.environmentConfig.createAccountRefresh){const o=(0,ce.YI)(t);o.isLoginCompleted?n.environmentConfig.enableWebCreateAccount2FA?yield n.createAcctTwoFactor(o):yield n.state.go(o.state,{userResumedCreateAcctFlow:!0}):yield n.state.go(H.t.Login)}else yield n.state.go(n.coreStateNames.createAccount)})()}createAcctTwoFactor(t){var n=this;return(0,g.Z)(function*(){t.twoFactor&&t.twoFactor.authenticate&&(yield n.state.go(t.twoFactor.routeState,{validationSuccessState:t.state,acctId:n.currentUserService.getCurrentUser().acctId,phoneNumber:(yield n.accntService.getContactInfo()).homePhoNbr}))})()}goToForgotUsernamePage(){var t=this;return(0,g.Z)(function*(){t.storefrontUtilityService.isRunningAsKiosk&&!t.storefrontUtilityService.webStoreData.fullSiteMode?(yield t.storefrontModalService.showGotoCsr())&&(yield t.state.go(t.coreStateNames.storefrontSurvey)):yield t.state.go(de.Ne.InputEmail)})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.Sr),e.Y36(u.k9),e.Y36(u.aZ),e.Y36(z.ST),e.Y36(le.i),e.Y36(P.P),e.Y36(Z.StateService),e.Y36(W.s),e.Y36(I.$),e.Y36(U.G),e.Y36(ge.b),e.Y36(F.w),e.Y36(j.v),e.Y36(u.xA),e.Y36(R.U4),e.Y36(ue.Y),e.Y36(u.SF),e.Y36(u.BR),e.Y36(u.mj))},r.\u0275cmp=e.Xpm({type:r,selectors:[["login-component"]],inputs:{cmsContent:"cmsContent"},decls:43,vars:15,consts:[[1,"refresh-2020"],["storefront",""],["fxLayout","column"],[1,"u-spacing__firstHeaderToTitle--marginTop"],[1,"u-spacing__divider--marginTopBottom"],["validation-focus","","novalidate","","fxLayout","column start","method","post"],["LoginForm","ngForm"],["fxLayout","column",3,"error-check"],["for","username"],["type","text","id","usernameTxtBox","name","username","tabindex","1","required","",3,"ngModel","ngModelChange"],["usernameInput","ngModel"],[3,"errors","activeBeforeSubmit"],["rule","required"],[4,"ngIf"],["fxLayout","column","ngClass","spanPosition",1,"u-spacing__fieldToField--marginTop",3,"error-check"],["for","password"],["type","text","id","passwordTxtBox","name","password","tabindex","2","required","",3,"ngModel","type","ngClass","ngModelChange"],["passwordInput","ngModel"],[3,"showField","showFieldChange"],[1,"linkSpacing"],["id","forgotPasswordLnk",3,"click"],[1,"u-spacing__buttonToField--marginTop"],["tabindex","3",1,"btn","u-spacing--widthFill",3,"click"],["wizardUi",""],["id","linksSection","fxLayout","row","fxLayoutAlign","space-around center","class","u-spacing__buttonToField--marginTop","ngClass.lt-md","lt-md",4,"ngIf"],["id","forgotUsernameLnk",3,"click"],["id","linksSection","fxLayout","row","fxLayoutAlign","space-around center","ngClass.lt-md","lt-md",1,"u-spacing__buttonToField--marginTop"],["id","firstTimeLoginLnk","ngClass.lt-md","lt-md",3,"click"],["ngClass.lt-md","lt-md",3,"vertical"],["id","signUpLnk","ngClass.lt-md","lt-md",3,"click"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"main",0),e._UZ(1,"storefront-utility",null,1),e.TgZ(3,"title-banner"),e._uU(4),e.qZA(),e.TgZ(5,"page-centered-container")(6,"div",2)(7,"card-container",3)(8,"section",2)(9,"header")(10,"h2"),e._uU(11),e.qZA(),e._UZ(12,"mat-divider",4),e.qZA(),e.TgZ(13,"section")(14,"form",5,6)(16,"div",7)(17,"mat-label",8),e._uU(18,"USERNAME"),e.qZA(),e.TgZ(19,"input",9,10),e.NdJ("ngModelChange",function(a){return n.login.userName=a}),e.qZA(),e.TgZ(21,"error-messages",11)(22,"error-message",12),e._uU(23,"Please enter your username"),e.qZA()()(),e.YNc(24,pe,4,0,"ng-container",13),e.TgZ(25,"div",14)(26,"mat-label",15),e._uU(27,"PASSWORD"),e.qZA(),e.TgZ(28,"input",16,17),e.NdJ("ngModelChange",function(a){return n.login.password=a}),e.qZA(),e.TgZ(30,"show-hide-input-button",18),e.NdJ("showFieldChange",function(a){return n.isShowPassword=a}),e.qZA(),e.TgZ(31,"error-messages",11)(32,"error-message",12),e._uU(33,"Please enter your password"),e.qZA()()(),e.TgZ(34,"div",19)(35,"a",20),e.NdJ("click",function(){return n.goToForgotPasswordPage()}),e._uU(36,"Forgot password?"),e.qZA()(),e.TgZ(37,"div",21)(38,"button",22),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(15),p=e.MAs(41);return n.getLogin(a,p)}),e._uU(39," LOGIN "),e.qZA(),e._UZ(40,"wizard-ui",null,23),e.qZA()(),e.YNc(42,he,6,1,"section",24),e.qZA()()()()()()}if(2&t){const o=e.MAs(2),i=e.MAs(20),a=e.MAs(29);e.xp6(4),e.hij(" ",n.cmsContent.Title," "),e.xp6(7),e.Oqu(n.cmsContent.LoginSectionTitle),e.xp6(5),e.Q6J("error-check",i),e.xp6(3),e.Q6J("ngModel",n.login.userName),e.xp6(2),e.Q6J("errors",i.errors)("activeBeforeSubmit",i.touched),e.xp6(3),e.Q6J("ngIf",n.enableForgotUsername),e.xp6(1),e.Q6J("error-check",a),e.xp6(3),e.Q6J("ngModel",n.login.password)("type",n.isShowPassword?"text":"password")("ngClass",n.isShowPassword?"pwd-hide":"pwd-show"),e.xp6(2),e.Q6J("showField",n.isShowPassword),e.xp6(1),e.Q6J("errors",a.errors)("activeBeforeSubmit",a.touched),e.xp6(11),e.Q6J("ngIf",!o.isKioskView)}},directives:[me.x,L.v,O.D,h.xw,N.D,y.d,c._Y,c.JL,c.F,D.R,J.i,x.hX,c.Fj,c.Q7,c.JJ,c.On,G.O,K.H,m.O5,m.mk,E.oO,$.n,V.P,h.Wh],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{max-height:70px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   .spanPosition[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .linkSpacing[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{font-family:Jost}[_nghost-%COMP%]   #linksSection[_ngcontent-%COMP%]{margin-left:60px;margin-right:60px;text-align:center}[_nghost-%COMP%]   #linksSection.lt-md[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}[_nghost-%COMP%]   #linksSection[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{height:15px;width:2px;border-width:2px;border-color:#34353a;margin-left:10px;margin-right:10px}[_nghost-%COMP%]   #linksSection[_ngcontent-%COMP%]   mat-divider.lt-md[_ngcontent-%COMP%]{margin-left:0;margin-right:0}[_nghost-%COMP%]   #linksSection[_ngcontent-%COMP%]   a.lt-md[_ngcontent-%COMP%]{max-width:150px}"]}),r})();var X=s(61264),ve=s(19511),Se=s(59031),Ce=s(99758),ee=s(68665),Me=s(69777),Ae=s(37864),te=s(65380);function Te(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"section",11)(1,"section")(2,"h2"),e._uU(3),e.qZA(),e._UZ(4,"mat-divider",12),e.qZA(),e.TgZ(5,"div",13)(6,"mat-label",14),e._uU(7,"CURRENT PASSWORD"),e.qZA(),e.TgZ(8,"input",15,16),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().addMissingInformation.currentPassword=o}),e.qZA(),e.TgZ(10,"show-hide-input-button",17),e.NdJ("showFieldChange",function(o){return e.CHM(t),e.oxw().isShowCurrentPassword=o}),e.qZA(),e.TgZ(11,"error-messages",18)(12,"error-message",19),e._uU(13,"New password must be different from current password."),e.qZA(),e.TgZ(14,"error-message",20),e._uU(15,"Please enter your password"),e.qZA()()(),e.TgZ(16,"div",21)(17,"mat-label",22),e._uU(18,"NEW PASSWORD"),e.qZA(),e.TgZ(19,"input",23,24),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().addMissingInformation.newPassword=o}),e.qZA(),e.TgZ(21,"show-hide-input-button",17),e.NdJ("showFieldChange",function(o){return e.CHM(t),e.oxw().isShowNewPassword=o}),e.qZA(),e.TgZ(22,"span",25),e._uU(23),e.qZA(),e.TgZ(24,"error-messages",18)(25,"error-message",20),e._uU(26,"Please enter a password-"),e.qZA(),e.TgZ(27,"error-message",26),e._uU(28),e.qZA(),e.TgZ(29,"error-message",27),e._uU(30),e.qZA(),e.TgZ(31,"error-message",28),e._uU(32),e.qZA(),e.TgZ(33,"error-message",19),e._uU(34,"New password must be different from current password."),e.qZA()()()()}if(2&r){const t=e.MAs(9),n=e.MAs(20),o=e.oxw();e.xp6(3),e.Oqu(o.cmsContent.ResetPasswordSectionHeader),e.xp6(2),e.Q6J("error-check",t),e.xp6(3),e.Q6J("ngModel",o.addMissingInformation.currentPassword)("type",o.isShowCurrentPassword?"text":"password"),e.xp6(2),e.Q6J("showField",o.isShowCurrentPassword),e.xp6(1),e.Q6J("errors",t.errors)("activeBeforeSubmit",t.touched),e.xp6(5),e.Q6J("error-check",n),e.xp6(3),e.Q6J("ngModel",o.addMissingInformation.newPassword)("type",o.isShowNewPassword?"text":"password")("notEqualTo",o.addMissingInformation.currentPassword),e.xp6(2),e.Q6J("showField",o.isShowNewPassword),e.xp6(2),e.Oqu(o.pwCmsData.PasswordDesc),e.xp6(1),e.Q6J("errors",n.errors)("activeBeforeSubmit",n.touched),e.xp6(4),e.Oqu(o.pwCmsData.MinPassword),e.xp6(2),e.Oqu(o.pwCmsData.MaxPassword),e.xp6(2),e.Oqu(o.pwCmsData.InvalidCharacter)}}function we(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"mat-option",39),e.NdJ("valueChange",function(o){return e.CHM(t).$implicit.securityQuestionID=o}),e._uU(1),e.qZA()}if(2&r){const t=d.$implicit;e.Q6J("value",t.securityQuestionID),e.xp6(1),e.Oqu(t.securityQuestion)}}function ye(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"section",29)(1,"section")(2,"h2"),e._uU(3),e.qZA(),e._UZ(4,"mat-divider",12),e.qZA(),e.TgZ(5,"section",30)(6,"div")(7,"mat-label",31),e._uU(8,"SELECT SECURITY QUESTION"),e.qZA(),e.TgZ(9,"div")(10,"mat-select",32,33),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().addMissingInformation.securityQuestionID=o}),e.YNc(12,we,2,2,"mat-option",34),e.qZA(),e.TgZ(13,"error-messages",18)(14,"error-message",20),e._uU(15,"Please select a new security question"),e.qZA()()()()(),e.TgZ(16,"section",30)(17,"div",35)(18,"mat-label",36),e._uU(19,"YOUR ANSWER"),e.qZA(),e.TgZ(20,"div")(21,"input",37,38),e.NdJ("valueChange",function(o){return e.CHM(t),e.oxw().addMissingInformation.securityAnswer=o})("ngModelChange",function(o){return e.CHM(t),e.oxw().addMissingInformation.securityAnswer=o}),e.qZA(),e.TgZ(23,"show-hide-input-button",17),e.NdJ("showFieldChange",function(o){return e.CHM(t),e.oxw().isShowSecurityAnswer=o}),e.qZA(),e.TgZ(24,"error-messages",18)(25,"error-message",28),e._uU(26,"Please enter a valid answer"),e.qZA(),e.TgZ(27,"error-message",20),e._uU(28,"Please enter a valid answer"),e.qZA(),e.TgZ(29,"error-message",27),e._uU(30,"Max. 20 alpha num character"),e.qZA(),e.TgZ(31,"error-message",26),e._uU(32,"Min. 1 alpha num character"),e.qZA()()()()()()}if(2&r){const t=e.MAs(11),n=e.MAs(22),o=e.oxw();e.xp6(3),e.Oqu(o.cmsContent.UpdateSecurityQuestionSectionHeader),e.xp6(7),e.Q6J("ngModel",o.addMissingInformation.securityQuestionID),e.xp6(2),e.Q6J("ngForOf",o.securityQuestions),e.xp6(1),e.Q6J("errors",t.errors)("activeBeforeSubmit",t.touched),e.xp6(8),e.Q6J("type",o.isShowSecurityAnswer?"text":"password")("value",o.addMissingInformation.securityAnswer)("ngModel",o.addMissingInformation.securityAnswer),e.xp6(2),e.Q6J("showField",o.isShowSecurityAnswer),e.xp6(1),e.Q6J("errors",n.errors)("activeBeforeSubmit",n.touched)}}function xe(r,d){if(1&r){const t=e.EpF();e.TgZ(0,"section",29)(1,"section")(2,"h2"),e._uU(3),e.qZA(),e._UZ(4,"mat-divider",12),e.qZA(),e.TgZ(5,"section",40)(6,"email-address",41),e.NdJ("emailAddressChange",function(o){return e.CHM(t),e.oxw().addMissingInformation.email=o}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(t.cmsContent.UpdateYourEmailSectionHeader),e.xp6(3),e.Q6J("emailAddress",t.addMissingInformation.email)}}let _e=(()=>{class r{constructor(t,n,o,i,a,p,f,v,S,C,M,A,T,w){this.currentUser=t,this.responseErrorService=n,this.session=o,this.isInvoicedService=i,this.window=a,this.storefrontUtilityService=p,this.accountService=f,this.authChannel=v,this.addMissingInformationService=S,this.authService=C,this.suspendedAccountService=M,this.userRoles=A,this.state=T,this.coreStateNames=w,this.addMissingInformation={currentPassword:"",newPassword:"",securityAnswer:"",securityQuestionID:"",email:""}}ngOnInit(){this.missingInformationFlags=this.addMissingInformationService.returnMissingInformation(),this.setSecurityQuestions(),this.window.addEventListener("beforeunload",t=>t.returnValue=this.cmsContent.PopupForClosingTabOrBrowserInIEOnly)}setSecurityQuestions(){var t=this;return(0,g.Z)(function*(){const n=yield t.accountService.getSecurityQuestions();t.responseErrorService.isErrorFree(n)&&(t.securityQuestions=n.securityQuestions)})()}saveInformation(t){var n=this;return(0,g.Z)(function*(){const o={currentPassword:n.addMissingInformation.currentPassword,password:n.addMissingInformation.newPassword,email:n.addMissingInformation.email,securityAnswer:n.addMissingInformation.securityAnswer,securityQuestionID:n.addMissingInformation.securityQuestionID},i=yield n.accountService.saveInformation(o);if(n.responseErrorService.isErrorFree(i)){if(n.addMissingInformationService.destroyMissingInformationFlags(),n.session.create(i.accountId,i.accountActivity,null,!1),n.currentUserData=n.currentUser.getCurrentUser()||{},n.isInvoicedService.setAccountInvoiced(i.isInvoiced),n.currentUserData.accountStatus=i.accountActivity,n.currentUserData.acctActivity=i.accountActivity,n.currentUserData.acctId=i.accountId,n.currentUserData.alerts=i.alerts,n.currentUserData.emailIsMissing=!1,n.currentUserData.errors=i.errors,n.currentUserData.firstName=i.firstName,n.currentUserData.lastName=i.lastName,n.currentUserData.passwordNeedsReset=!1,n.currentUserData.securityQuestionIsMissing=!1,n.currentUserData.sessionTimedOut=i.sessionTimedOut,n.currentUserData.driverLic=i.driverLic,n.currentUserData.driverLicState=i.driverLicState,n.currentUserData.companyName=i.companyName,yield n.authChannel.logIn(n.currentUserData),n.storefrontUtilityService.isRunningAsKiosk&&t)return t.gotoNextState();if(n.authService.isAuthorized(n.userRoles.suspended)){const a=yield n.suspendedAccountService.getFirstSuspendedAccountState();yield n.state.go(a)}else i.newAccountStep.accountComplete?yield n.state.go(_.Dn.Frame):yield n.state.go(n.coreStateNames.newAccount)}})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.SF),e.Y36(u.Sr),e.Y36(ve.m),e.Y36(u.hj),e.Y36(X.X9),e.Y36(z.ST),e.Y36(Se.B),e.Y36(P.P),e.Y36(U.G),e.Y36(I.$),e.Y36(F.w),e.Y36(j.v),e.Y36(Z.StateService),e.Y36(W.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["add-missing-information-component"]],inputs:{cmsContent:"cmsContent",pwCmsData:"pwCmsData"},decls:17,vars:5,consts:[[1,"refresh-2020"],["validation-focus","","name","MissingInformationForm","fxLayout","column",1,"u-spacing--widthFill"],["MissingInformationForm","ngForm"],["fxFlexOffset","20px","fxLayout","column"],[3,"innerHtml"],["class","u-spacing__sectionToSection--marginTop",4,"ngIf"],["class","u-spacing__headerToSection--marginTop",4,"ngIf"],[1,"u-spacing__buttonToField--marginTop"],[3,"main"],["action-main",""],["wizardUi",""],[1,"u-spacing__sectionToSection--marginTop"],[1,"u-spacing__divider--marginTopBottom"],["fxLayout","column",3,"error-check"],["for","currentPassword"],["type","text","id","currentPasswordTxtBox","name","currentPassword","tabindex","2","required","",3,"ngModel","type","ngModelChange"],["currentPasswordInput","ngModel"],[3,"showField","showFieldChange"],[3,"errors","activeBeforeSubmit"],["rule","notEqualTo"],["rule","required"],["fxLayout","column",1,"u-spacing__fieldToField--marginTop",3,"error-check"],["for","newPassword"],["type","text","id","newPasswordTxtBox","name","newPassword","tabindex","2","pattern","[A-Za-z0-9._!@#$^*&();?{}`~<>,+-]+$","minlength","12","maxlength","50","required","",3,"ngModel","type","notEqualTo","ngModelChange"],["newPasswordInput","ngModel"],[1,"password-rules"],["rule","minlength"],["rule","maxlength"],["rule","pattern"],[1,"u-spacing__headerToSection--marginTop"],["fxLayout","column","ngClass","labelMarginInternal"],["fxLayout","row","ngClass","labelMargin"],["name","securityQuestions","id","securityQuestions","placeholder","Please select security question","required","",3,"ngModel","ngModelChange"],["SecurityQuestion","ngModel"],[3,"value","valueChange",4,"ngFor","ngForOf"],[1,"u-spacing__fieldToField--marginTop"],["for","Answer","fxLayout","row","ngClass","labelMargin"],["fxLayout","row","id","Answer","name","answer","pattern","^[0-9a-zA-Z?\\.,\\'\\u0022\\s]{1,20}$","required","","minlength","1","maxlength","20",3,"type","value","ngModel","valueChange","ngModelChange"],["Answer","ngModel"],[3,"value","valueChange"],["fxLayout","column",1,"u-spacing__fieldToField--marginTop"],[3,"emailAddress","emailAddressChange"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"main",0)(1,"title-banner"),e._uU(2),e.qZA(),e.TgZ(3,"page-centered-container")(4,"form",1,2)(6,"card-container",3),e._UZ(7,"article",4),e.YNc(8,Te,35,18,"section",5),e.YNc(9,ye,33,11,"section",6),e.YNc(10,xe,7,2,"section",6),e.qZA(),e.TgZ(11,"section",7)(12,"action-buttons",8),e.NdJ("main",function(){e.CHM(o);const a=e.MAs(16);return n.saveInformation(a)}),e.TgZ(13,"span",9),e._uU(14,"CONTINUE"),e.qZA()(),e._UZ(15,"wizard-ui",null,10),e.qZA()()()()}2&t&&(e.xp6(2),e.hij(" ",n.cmsContent.Title," "),e.xp6(5),e.Q6J("innerHtml",n.cmsContent.ShortDescription,e.oJD),e.xp6(1),e.Q6J("ngIf",n.missingInformationFlags.passwordNeedsReset),e.xp6(1),e.Q6J("ngIf",n.missingInformationFlags.securityQuestionIsMissing),e.xp6(1),e.Q6J("ngIf",n.missingInformationFlags.emailIsMissing))},directives:[L.v,O.D,c._Y,c.JL,c.F,D.R,h.xw,N.D,h.UT,m.O5,y.d,J.i,x.hX,c.Fj,c.Q7,c.JJ,c.On,$.n,G.O,K.H,c.c5,c.wO,c.nD,Ce.a,m.mk,E.oO,ee.gD,m.sg,Me.ey,Ae.a,te.O,V.P],styles:["[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{max-height:70px}[_nghost-%COMP%]   .password-rules[_ngcontent-%COMP%]{font-size:12px}"]}),r})();var Pe=s(59119),Ze=s(38898),Ie=s(18407);let ne=(()=>{class r{constructor(t){this.httpService=t,this.baseUrl="/api/sessions/Session"}claimSession(t){var n=this;return(0,g.Z)(function*(){const o=`${n.baseUrl}/ClaimSession`;return yield n.httpService.post(o,t)})()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Ie.OE))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();var oe=s(79210),Ue=s(2365);function Fe(r,d){1&r&&(e.TgZ(0,"p",19),e._uU(1,"Please enter a valid pin"),e.qZA())}function Le(r,d){if(1&r&&(e.ynx(0,17),e.YNc(1,Fe,2,0,"p",18),e.BQk()),2&r){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.key),e.xp6(1),e.Q6J("ngSwitchCase","required")}}function Oe(r,d){if(1&r&&(e.TgZ(0,"aside"),e.YNc(1,Le,2,2,"ng-container",16),e.qZA()),2&r){e.oxw();const t=e.MAs(15);e.xp6(1),e.Q6J("ngIf",t.submitted)}}let Ne=(()=>{class r{constructor(t,n,o,i,a,p,f,v,S,C,M,A,T,w,Q){this.responseErrorService=t,this.webStorage=n,this.operatingSystemSnifferService=o,this.loginWebApiService=i,this.authChannel=a,this.webStorageConst=p,this.authService=f,this.userRoles=v,this.state=S,this.suspendedAccountService=C,this.addMissingInformationService=M,this.dialogService=A,this.ezTagAppRedirectLinkService=T,this.fingerprintService=w,this.window=Q}ngOnInit(){["ios","android"].indexOf(this.operatingSystemSnifferService.getOsFull())<0?this.state.go(Pe.Dn.Frame):(this.authService.isAuthenticated()&&(this.state.params.token?this.authService.claimSessionLogOut():this.authService.logout()),this.webStorage.setKeyValue(this.webStorageConst.mappSessionBeingUsed,!0),this.triggerShowExpirationModal())}triggerShowExpirationModal(){const t=new Date(this.state.params.expires).getTime(),n=new Date(Date.now()).getTime(),o=isNaN(t)||n>=t?0:t-n;this.timer=setTimeout(()=>this.showExpirationModal(),o)}showExpirationModal(){var t=this;return(0,g.Z)(function*(){const n={cmsContent:{Title:t.cmsClaimSessionExpirationModal.Title,AcceptBtn:t.cmsClaimSessionExpirationModal.AcceptButton,PrimaryContent:t.cmsClaimSessionExpirationModal.ShortDescription}};yield t.dialogService.openGenericModal(q.E5,n);try{t.returnToApp()}catch{t.state.go(l.Dn.Login)}})()}submitPinNumber(t){var n=this;return(0,g.Z)(function*(){if(!t.valid)return;const o=yield n.loginWebApiService.claimSession({claimSessionCredential:{token:n.state.params.token,pin:n.pin}});if(n.responseErrorService.isErrorFree(o)){const i=null==o?void 0:o.firebaseId;i&&n.fingerprintService.setFingerprintId(i);const a=yield n.authService.profile({});n.responseErrorService.isErrorFree(a)&&(yield n.redirect(a),clearTimeout(n.timer))}})()}loginInformationIsMissing({passwordNeedsReset:t,emailIsMissing:n,securityQuestionIsMissing:o}){return this.addMissingInformationService.isMissingInfo(t,n,o)}redirect(t){var n=this;return(0,g.Z)(function*(){if(n.authChannel.logIn(t),n.loginInformationIsMissing(t))yield n.state.go(l.Dn.AddMissingInformation);else if(n.authService.isAuthorized(n.userRoles.suspended)){const o=yield n.suspendedAccountService.getFirstSuspendedAccountState();yield n.state.go(o)}else yield n.state.go(_.Dn.Frame)})()}returnToApp(){const t=this.ezTagAppRedirectLinkService.getEzTagAppLink();t?this.window.location.href=t:this.state.go(l.Dn.Login)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.Sr),e.Y36(Ze.V),e.Y36(u.aZ),e.Y36(ne),e.Y36(P.P),e.Y36(oe.LC),e.Y36(I.$),e.Y36(oe.vX),e.Y36(Z.StateService),e.Y36(F.w),e.Y36(U.G),e.Y36(u.xA),e.Y36(b.C),e.Y36(Ue.r),e.Y36(X.X9))},r.\u0275cmp=e.Xpm({type:r,selectors:[["claim-session-component"]],inputs:{cmsContent:"cmsContent",cmsClaimSessionExpirationModal:"cmsClaimSessionExpirationModal"},decls:27,vars:9,consts:[[1,"refresh-2020"],["fxLayout","column"],[1,"u-spacing__firstHeaderToTitle--marginTop"],[1,"u-spacing__divider--marginTopBottom"],[3,"innerHtml"],[3,"ngClass"],["validation-focus","","novalidate","","fxLayout","column start"],["ClaimSessionForm","ngForm"],["fxLayout","column",3,"error-check"],["for","pin"],["type","text","id","pinTxtBox","name","pin","tabindex","1","required","",3,"ngModel","ngModelChange"],["pinInput","ngModel"],[4,"ngFor","ngForOf"],[1,"u-spacing__buttonToField--marginTop"],[3,"main"],["action-main",""],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","help-block",4,"ngSwitchCase"],[1,"help-block"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"main",0)(1,"title-banner"),e._uU(2),e.qZA(),e.TgZ(3,"page-centered-container")(4,"div",1)(5,"card-container",2)(6,"section",1)(7,"header")(8,"h2"),e._uU(9),e.qZA(),e._UZ(10,"mat-divider",3),e.TgZ(11,"section"),e._UZ(12,"div",4),e.qZA()(),e.TgZ(13,"section",5)(14,"form",6,7)(16,"div",8)(17,"mat-label",9),e._uU(18,"PLEASE ENTER PIN"),e.qZA(),e.TgZ(19,"input",10,11),e.NdJ("ngModelChange",function(a){return n.pin=a}),e.qZA(),e.YNc(21,Oe,2,1,"aside",12),e.ALo(22,"keyvalue"),e.qZA(),e.TgZ(23,"div",13)(24,"action-buttons",14),e.NdJ("main",function(){e.CHM(o);const a=e.MAs(15);return n.submitPinNumber(a)}),e.TgZ(25,"span",15),e._uU(26,"SUBMIT"),e.qZA()()()()()()()()()()}if(2&t){const o=e.MAs(20);e.xp6(2),e.hij(" ",n.cmsContent.Title," "),e.xp6(7),e.Oqu(n.cmsContent.PinFormSectionTitle),e.xp6(3),e.Q6J("innerHtml",n.cmsContent.ShortDescription,e.oJD),e.xp6(1),e.Q6J("ngClass",n.cmsContent.ShortDescription?"u-spacing__sectionToSection--marginTop":""),e.xp6(3),e.Q6J("error-check",o),e.xp6(3),e.Q6J("ngModel",n.pin),e.xp6(2),e.Q6J("ngForOf",e.lcZ(22,7,o.errors))}},directives:[L.v,O.D,h.xw,N.D,y.d,m.mk,E.oO,c._Y,c.JL,c.F,D.R,J.i,x.hX,c.Fj,c.Q7,c.JJ,c.On,m.sg,m.O5,m.RF,m.n9,te.O],pipes:[m.Nd],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{max-height:70px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}"]}),r})();var De=s(68359);const Ee=s(95173)._.map(r=>{const d={[l.Dn.Login]:fe,[l.Dn.AddMissingInformation]:_e,[l.Dn.ClaimSession]:Ne};return{...r,component:d[r.name]}});let Qe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[{provide:l.sV,useValue:l.Dn},b.C,ne],imports:[[m.ez,R.ez,se.lg,ie.UIRouterModule.forChild({states:Ee}),x.lN,c.u5,y.t,De.o9,re.n,ee.LD]]}),r})()}}]);