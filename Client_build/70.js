"use strict";(self.webpackChunkng_app=self.webpackChunkng_app||[]).push([[70],{63457:(lt,E,r)=>{r.d(E,{v:()=>h});var s=r(13847),I=r(83434),m=r(4857),Y=r(14550),F=r(45184),O=r(55297);const w=function(u){return{greyed:u}};function q(u,f){if(1&u&&(s.TgZ(0,"figure",4)(1,"div",4),s._uU(2),s.qZA(),s.TgZ(3,"figcaption",4),s._uU(4),s.qZA()()),2&u){const p=f.$implicit,P=f.index,J=s.oxw(2);s.Q6J("ngClass",J.stepClass(P+1)),s.xp6(1),s.Q6J("ngClass",s.VKq(5,w,p.isGreyed)),s.xp6(1),s.Oqu(P+1),s.xp6(1),s.Q6J("ngClass",s.VKq(7,w,p.isGreyed)),s.xp6(1),s.Oqu(p.name)}}function Q(u,f){if(1&u&&(s.TgZ(0,"section",2),s.YNc(1,q,5,9,"figure",3),s.ALo(2,"slice"),s.qZA()),2&u){const p=s.oxw();s.Q6J("ngClass",p.steps[p.currentStepNum-1].background),s.xp6(1),s.Q6J("ngForOf",s.Dn7(2,2,p.steps,0,p.steps.length))}}function D(u,f){if(1&u&&(s.TgZ(0,"div",11),s._uU(1),s.qZA()),2&u){const p=s.oxw(2);s.xp6(1),s.hij("Next: ",p.nextStepName,"")}}function t(u,f){if(1&u&&(s.TgZ(0,"section",5)(1,"section",6),s._uU(2),s.qZA(),s._UZ(3,"mat-divider",7),s.TgZ(4,"section",8)(5,"div",9),s._uU(6),s.qZA(),s.YNc(7,D,2,1,"div",10),s.qZA()()),2&u){const p=s.oxw();s.xp6(2),s.AsE("",p.currentStepNum," of ",p.steps.length,""),s.xp6(1),s.Q6J("vertical",!0),s.xp6(3),s.Oqu(p.currentStepName),s.xp6(1),s.Q6J("ngIf",p.currentStepNum>0&&p.currentStepNum<p.steps.length)}}let h=(()=>{class u{constructor(p,P){this.stateService=p,this.transition=P,this.transitionHook=J=>{this.tryTransition(J.to())}}ngOnInit(){this.deregisterTransitionHook=this.transition.onSuccess({},this.transitionHook),this.tryTransition(this.stateService.current)}ngOnDestroy(){this.deregisterTransitionHook&&this.deregisterTransitionHook()}tryTransition(p){this.stepMap&&p&&(this.currentStepNum=this.stepMap[p.name]?this.stepMap[p.name]:0)}stepClass(p){return this.currentStepNum===p?"stepOn":"step"}get currentStepName(){return this.getStepName(this.currentStepNum-1)}get nextStepName(){return this.getStepName(this.currentStepNum)}getStepName(p){return p>=0&&p<this.steps.length?this.steps[p].name:""}}return u.\u0275fac=function(p){return new(p||u)(s.Y36(I.StateService),s.Y36(I.TransitionService))},u.\u0275cmp=s.Xpm({type:u,selectors:[["stepper"]],inputs:{steps:"steps",currentStepNum:"currentStepNum",stepMap:"stepMap"},decls:2,vars:2,consts:[["id","wizard-stepper-desktop","fxShow","","fxHide.lt-md","",3,"ngClass",4,"ngIf"],["id","wizard-stepper-mobile","fxHide","","fxShow.lt-md","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px",4,"ngIf"],["id","wizard-stepper-desktop","fxShow","","fxHide.lt-md","",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["id","wizard-stepper-mobile","fxHide","","fxShow.lt-md","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","15px"],["id","step-counter"],[3,"vertical"],["fxLayout","column","fxLayoutAlign","start start"],["id","step-current"],["id","step-next",4,"ngIf"],["id","step-next"]],template:function(p,P){1&p&&(s.YNc(0,Q,3,6,"section",0),s.YNc(1,t,8,5,"section",1)),2&p&&(s.Q6J("ngIf",P.currentStepNum>0&&P.currentStepNum<P.steps.length+1),s.xp6(1),s.Q6J("ngIf",P.currentStepNum>0&&P.currentStepNum<P.steps.length+1))},directives:[m.O5,Y.b8,m.mk,Y.oO,m.sg,F.xw,F.Wh,F.SQ,O.d],pipes:[m.OU],styles:["[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:32px;padding:20px;width:100%;font-family:Jost;font-weight:500}[_nghost-%COMP%]   #wizard-stepper-desktop.primary[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]   #wizard-stepper-desktop.secondary[_ngcontent-%COMP%]{background-color:#efeff4}[_nghost-%COMP%]   #wizard-stepper-desktop.ternary[_ngcontent-%COMP%]{background-color:#efeff4}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:6px}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   figure.stepOn[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#611eb8}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   figure.stepOn[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{color:#611eb8}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#757575;border-radius:50%;width:18px;height:18px;flex-shrink:0;font-size:11px;line-height:1.6em;text-align:center;color:#fff}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   div.greyed[_ngcontent-%COMP%]{background-color:#c4c4c4}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   figcaption[_ngcontent-%COMP%]{color:#757575;font-size:16px;line-height:1.3em;word-wrap:break-word;overflow-wrap:break-word}[_nghost-%COMP%]   #wizard-stepper-desktop[_ngcontent-%COMP%]   figcaption.greyed[_ngcontent-%COMP%]{color:#c4c4c4}[_nghost-%COMP%]   #wizard-stepper-mobile[_ngcontent-%COMP%]{background-color:#fafafa;padding-left:24px;padding-top:7px;padding-bottom:7px;margin-bottom:16px;width:100%}[_nghost-%COMP%]   #wizard-stepper-mobile[_ngcontent-%COMP%]   #step-counter[_ngcontent-%COMP%]{color:#611eb8;font-family:Jost;font-weight:700;font-size:16px}[_nghost-%COMP%]   #wizard-stepper-mobile[_ngcontent-%COMP%]   mat-divider.mat-divider.mat-divider-vertical[_ngcontent-%COMP%]{border-color:#c4c4c4;height:36px;border-width:1px}[_nghost-%COMP%]   #wizard-stepper-mobile[_ngcontent-%COMP%]   #step-current[_ngcontent-%COMP%]{color:#611eb8;font-family:Jost;font-weight:700;font-size:14px}[_nghost-%COMP%]   #wizard-stepper-mobile[_ngcontent-%COMP%]   #step-next[_ngcontent-%COMP%]{color:#34353a;font-family:Jost;font-weight:400;font-size:14px}"]}),u})()},58070:(lt,E,r)=>{r.r(E),r.d(E,{PaymentPlansModule:()=>Xe});var s=r(4857),I=r(59008),m=r(63660),Y=r(67914),F=r(82701),O=r(55297),w=r(73201),q=r(68359),Q=r(68665),D=r(39230),t=r(13847),h=r(96165),u=r(83434),f=r(14550),p=r(45184),P=r(32761);const J=function(a,i){return{width:a,"background-color":i}},rt=function(a){return{left:a}};let ct=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["progress-bar"]],inputs:{progress:"progress",color:"color",statusClasses:"statusClasses"},decls:5,vars:9,consts:[["id","progressPrg",3,"ngClass","ngStyle"],[3,"ngStyle"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"div",0),t.TgZ(2,"i",1)(3,"span"),t._uU(4),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngClass",n.statusClasses)("ngStyle",t.WLB(4,J,n.progress+"%",n.color||void 0)),t.xp6(1),t.Q6J("ngStyle",t.VKq(7,rt,"calc("+n.progress+"% - 2em)")),t.xp6(2),t.hij("",n.progress,"%"))},directives:[s.mk,f.oO,s.PC,f.Zl],styles:["[_nghost-%COMP%]{display:block;width:100%;height:48px}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{display:block;width:100%;height:16px;border:0px;background-color:#c4c4c4;border-radius:8px;margin:3px 0}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block;width:0%;height:16px;border:0px;background-color:#3c055f;border-radius:8px;text-align:right;transition-delay:.25s;transition:width 1s}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAXklEQVQYV2NkIAAYkeVVev//B/HvFDPCxVEUMFRBFDC0YVEg0PT//4cfEPMEOBgYPtRBFIGJpLX//887i+qYJGMGhnnBjFCjYEajO7iNkZExYMn//1deYveKjjgDAwCEEhr6FbWgywAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center 3px;display:block;position:relative;padding-top:12px;width:4em;height:24px;font-style:normal;text-align:center;vertical-align:bottom;font-weight:700;left:-2em;transition-delay:.25s;transition:left 1s}"]}),a})();var N=r(32993),L=r(27358),U=r(89707);const V=function(){return{"text-align":"right"}},pt=function(){return{"text-align":"left","padding-top":"16px"}};function dt(a,i){if(1&a&&(t.TgZ(0,"div",31)(1,"mat-label"),t._uU(2,"AutoPay:"),t.qZA(),t.TgZ(3,"strong"),t._uU(4),t.qZA()()),2&a){const e=t.oxw(2);t.Q6J("ngStyle",t.DdM(3,V))("ngStyle.lt-md",t.DdM(4,pt)),t.xp6(4),t.Oqu(e.autoPayInfo.autoPayData)}}function mt(a,i){if(1&a&&(t.TgZ(0,"div"),t._UZ(1,"article",20),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("innerHTML",e.cmsContent.data.paymentLateText,t.oJD)}}function gt(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"wizard-ui",32),t.NdJ("next",function(o){return t.CHM(e),t.oxw(2).continueWithPayment(o)}),t.TgZ(1,"span",33),t._uU(2,"MAKE A PAYMENT"),t.qZA()()}}const ut=function(a){return{paymentPastDue:a}},W=function(a){return{"media-buttons-faded":a}};function ht(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"section")(2,"h3"),t._uU(3,"Plan Summary"),t.qZA()(),t.TgZ(4,"section",8),t._uU(5," Agency: "),t.TgZ(6,"span",3),t._uU(7),t.qZA()(),t.TgZ(8,"section",9)(9,"div",10)(10,"div",11)(11,"mat-label"),t._uU(12,"Next installment:"),t.qZA(),t.TgZ(13,"strong"),t._uU(14),t.qZA()(),t.TgZ(15,"div",12)(16,"mat-label"),t._uU(17,"Installment amount:"),t.qZA(),t.TgZ(18,"strong"),t._UZ(19,"currency",13),t.qZA()(),t.YNc(20,dt,5,5,"div",14),t.qZA(),t.YNc(21,mt,2,1,"div",15),t.qZA(),t.TgZ(22,"section",16)(23,"h3",17),t._uU(24,"Payment Progress"),t.qZA(),t.TgZ(25,"div",18)(26,"div",19)(27,"mat-label"),t._UZ(28,"span",20),t.qZA(),t.TgZ(29,"strong"),t._UZ(30,"currency",13),t.qZA()(),t.TgZ(31,"div",16)(32,"a"),t._UZ(33,"mat-icon",21)(34,"mat-label",22),t.qZA(),t.TgZ(35,"div")(36,"aside",16)(37,"div",23),t._UZ(38,"span",20),t.TgZ(39,"span",24),t._UZ(40,"currency",13),t.qZA()(),t.TgZ(41,"div",23),t._UZ(42,"span",20),t.TgZ(43,"span",24),t._uU(44,"- "),t._UZ(45,"currency",13),t.qZA()(),t._UZ(46,"hr"),t.TgZ(47,"div",23),t._UZ(48,"strong",20),t.TgZ(49,"strong",24),t._UZ(50,"currency",13),t.qZA()()()(),t.TgZ(51,"strong",24),t._UZ(52,"currency",13),t.qZA()()(),t._UZ(53,"progress-bar",25),t.qZA(),t.TgZ(54,"div",26)(55,"a",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadPdf()}),t._UZ(56,"img",28),t._uU(57),t.qZA(),t.TgZ(58,"div",29),t.YNc(59,gt,3,0,"wizard-ui",30),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(7),t.Oqu(e.details.mobileAgency),t.xp6(1),t.Q6J("ngClass",t.VKq(22,ut,e.isPastDue)),t.xp6(6),t.Oqu(e.formattedDueDate),t.xp6(1),t.Q6J("ngStyle.lt-md",t.DdM(24,V)),t.xp6(4),t.Q6J("value",e.details.nextInstallmentAmount),t.xp6(1),t.Q6J("ngIf",e.autoPayInfo.autoPayFlag),t.xp6(1),t.Q6J("ngIf",e.isPastDue),t.xp6(7),t.Q6J("innerHTML",e.cmsContent.data.settlementAmmountText,t.oJD),t.xp6(2),t.Q6J("value",e.details.settlementAmount),t.xp6(4),t.Q6J("innerHTML",e.cmsContent.data.balanceDueText,t.oJD),t.xp6(4),t.Q6J("innerHTML",e.cmsContent.data.settlementAmmountText,t.oJD),t.xp6(2),t.Q6J("value",e.details.settlementAmount),t.xp6(2),t.Q6J("innerHTML",e.cmsContent.data.paidAmmountText,t.oJD),t.xp6(3),t.Q6J("value",e.details.paidAmount),t.xp6(3),t.Q6J("innerHTML",e.cmsContent.data.balanceDueText,t.oJD),t.xp6(2),t.Q6J("value",e.details.balanceAmount),t.xp6(2),t.Q6J("value",e.details.balanceAmount),t.xp6(1),t.Q6J("color",e.isPastDue&&"#FC2125")("progress",e.progress),t.xp6(2),t.Q6J("ngClass",t.VKq(25,W,e.pdfProcessing)),t.xp6(2),t.hij("",e.cmsContent.pdf.pdfDownloadText," "),t.xp6(2),t.Q6J("ngIf","Open"===e.details.status)}}function ft(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"section"),t._UZ(1,"h3",20),t.qZA(),t.TgZ(2,"section"),t._UZ(3,"cms-content",34),t.qZA(),t.TgZ(4,"div",35)(5,"a",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadPdf()}),t._UZ(6,"img",28),t._uU(7),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("innerHTML",e.cmsContent.data.defaultedTitle,t.oJD),t.xp6(2),t.Q6J("template",e.cmsContent.data.defaultedBody)("data",e.details),t.xp6(2),t.Q6J("ngClass",t.VKq(5,W,e.pdfProcessing)),t.xp6(2),t.hij("",e.cmsContent.pdf.pdfDownloadText," ")}}let G=(()=>{class a{constructor(e,n,o,l,c){this.dateWithTimeZoneService=e,this.operatingSystemSnifferService=n,this.stateService=o,this.dialogRef=l,this.downloadService=c,this.pdfProcessing=!1,this.downloadPdf=()=>{this.downloadService.download(this.isEzTagFlow?"api/sessions/Pdf/GetPaymentPlanAccountPdf":"api/sessions/Pdf/GetPaymentPlanPdf",!0,{paymentPlanId:this.details.paymentPlanId},{busy:this.cmsContent.pdf.pdfProcessingMesssage,failure:this.cmsContent.pdf.pdfError,success:this.cmsContent.pdf.pdfDownloadedMessage},1e5)},l&&(this.details=l.data.details,this.cmsContent=l.data.cmsContent,this.isEzTagFlow=l.data.isEzTagFlow)}get autoPayInfo(){return this.checkAutoPay()}get isFullsite(){return this.operatingSystemSnifferService.isDesktopOs()}get progress(){return this.details?Math.round(this.details.paidAmount/this.details.settlementAmount*100):0}get isPastDue(){if(!this.details||!this.details.nextInstallmentDate)return!1;const e=new Date,n=new Date(this.details.nextInstallmentDate);return new Date(e.getFullYear(),e.getMonth(),e.getDate())>n&&this.details.nextInstallmentAmount>0}get formattedDueDate(){if(this.details&&"Closed"===this.details.status||!this.details||!this.details.nextInstallmentDate)return"None";const e=this.dateWithTimeZoneService.withoutOffsetToCentral(this.details.nextInstallmentDate,"MMM Do, YYYY z");return"Invalid date"===e?"None":e}checkAutoPay(){return this.details&&this.details.billingMethod&&null!=this.details.billingMethod.creditCardPaymentMethod?{autoPayFlag:!0,autoPayData:"****"+this.details.billingMethod.creditCardPaymentMethod.cardNbr.slice(-4)}:this.details&&this.details.billingMethod&&null!=this.details.billingMethod.eftPaymentMethod?{autoPayFlag:!0,autoPayData:"****"+this.details.billingMethod.eftPaymentMethod.accountNumber.slice(-4)}:{autoPayFlag:!1,autoPayData:""}}continueWithPayment(e){this.stateService.go(e).then(()=>this.dialogRef&&this.dialogRef.close())}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.xV),t.Y36(h.aZ),t.Y36(u.StateService),t.Y36(h.zj,8),t.Y36(h._B))},a.\u0275cmp=t.Xpm({type:a,selectors:[["payment-details"]],inputs:{details:"details",cmsContent:"cmsContent",isEzTagFlow:"isEzTagFlow"},decls:17,vars:5,consts:[["ngClass.lt-md","lt-md",1,"refresh-2020"],["fxLayout","row","fxLayoutAlign","center center"],["fxFlex","","fxShow","","fxHide.lt-md",""],["translation-skip",""],["fxFlex","","fxHide","","fxShow.lt-md",""],["fxShow","","fxHide.lt-md","",2,"text-align","right"],[4,"ngIf","ngIfElse"],["defaulted",""],["fxHide","","fxShow.lt-md",""],["fxLayout","column",3,"ngClass"],["fxLayout","row","fxLayoutGap","14px","fxLayout.lt-md","row wrap","fxLayoutGap.lt-md","0px"],["fxFlex","0 0 160px","fxFlex.lt-md","0 0 50%","fxLayout","column"],["fxFlex","1 1 160px","fxFlex.lt-md","0 0 50%","fxLayout","column",3,"ngStyle.lt-md"],[3,"value"],["fxFlex","1 1 100%","fxFlex.lt-md","2 0 100%","fxLayout","column",3,"ngStyle","ngStyle.lt-md",4,"ngIf"],[4,"ngIf"],["fxLayout","column"],[2,"padding-bottom","17px"],["fxLayout","row","fxLayoutAlign","end"],["fxFlex","","fxLayout","column"],[3,"innerHTML"],["svgIcon","information"],[2,"padding-left","4px","text-align","right",3,"innerHTML"],["fxLayout","row","fxLayoutAlign","space-between stretch"],[2,"text-align","right"],[3,"color","progress"],["fxLayout","row","fxLayout.lt-md","column","fxLayoutAlign.gt-md","center center",2,"padding","0 16px"],["fxFlex","grow",3,"ngClass","click"],["src","/Content/icons/pdf.gif",2,"vertical-align","text-top","padding-right","8px"],["fxFlex","294px","fxFlex.lt-md","","fxFlexOffset.lt-md","52px"],[3,"next",4,"ngIf"],["fxFlex","1 1 100%","fxFlex.lt-md","2 0 100%","fxLayout","column",3,"ngStyle","ngStyle.lt-md"],[3,"next"],["wizard-next",""],[3,"template","data"],["fxLayout","row","fxLayoutAlign","center center",2,"padding","0 16px"]],template:function(e,n){if(1&e&&(t.TgZ(0,"main",0)(1,"section",1)(2,"h2",2),t._uU(3," Plan: "),t.TgZ(4,"span",3),t._uU(5),t.qZA()(),t.TgZ(6,"h2",4),t._uU(7," Payment Plan Number: "),t.TgZ(8,"span",3),t._uU(9),t.qZA()(),t.TgZ(10,"div",5),t._uU(11," Agency: "),t.TgZ(12,"span",3),t._uU(13),t.qZA()()(),t.YNc(14,ht,60,27,"ng-container",6),t.qZA(),t.YNc(15,ft,8,7,"ng-template",null,7,t.W1O)),2&e){const o=t.MAs(16);t.xp6(5),t.Oqu(n.details.paymentPlanId),t.xp6(4),t.Oqu(n.details.paymentPlanId),t.xp6(4),t.Oqu(n.details.agency),t.xp6(1),t.Q6J("ngIf","Defaulted"!==n.details.status)("ngIfElse",o)}},directives:[f.oO,p.xw,p.Wh,p.yH,f.b8,s.O5,s.mk,p.SQ,w.hX,f.Zl,P.Q,s.PC,D.Hw,ct,p.UT,N.P,L.O,U.R],styles:["[_nghost-%COMP%]{font-size:16px;line-height:26px;font-weight:600;font-family:Montserrat;display:block;height:100%}[_nghost-%COMP%]   main[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   mat-label[_ngcontent-%COMP%]{text-transform:uppercase;font-size:10px;line-height:12px;font-weight:700;font-family:Jost;margin:0 0 4px}[_nghost-%COMP%]   section[_ngcontent-%COMP%]{margin:2px 0;padding:15px 14px;background-color:#efeff4;display:block;min-height:50px;width:100%}[_nghost-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;line-height:30px;font-weight:600;font-family:Jost}[_nghost-%COMP%]   section[_ngcontent-%COMP%]:first-child{margin-top:0;border-top-left-radius:10px;border-top-right-radius:10px;background-color:#e0e0ef}[_nghost-%COMP%]   section[_ngcontent-%COMP%]:last-of-type{border-bottom-left-radius:10px;border-bottom-right-radius:10px;margin-bottom:24px}[_nghost-%COMP%]   progress-bar[_ngcontent-%COMP%]{margin:24px 0 12px}[_nghost-%COMP%]   progress-bar[_ngcontent-%COMP%]   .progressBarPaymentPastDue[_ngcontent-%COMP%]{background-color:#fc2125!important}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]{width:100%;text-transform:uppercase}[_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]   .prev-button[_ngcontent-%COMP%], [_nghost-%COMP%]   wizard-ui[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   section.paymentPastDue[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%], [_nghost-%COMP%]   section.paymentPastDue[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%], [_nghost-%COMP%]   section.paymentPastDue[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{color:#fc2125!important}[_nghost-%COMP%]   section.paymentPastDue[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{margin:24px 0}[_nghost-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none;color:unset}[_nghost-%COMP%]   a[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   a[_ngcontent-%COMP%] + div[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]{position:absolute;opacity:0;width:270px;height:75px;left:-135px;top:-98px;background-color:#fff;transition:opacity .5s;text-align:left;padding:10px 8px;font-size:12px;line-height:15px;font-family:Montserrat;box-shadow:0 3px 3px #00000029;text-transform:capitalize}[_nghost-%COMP%]   a[_ngcontent-%COMP%] + div[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:3px 0 10px}[_nghost-%COMP%]   a[_ngcontent-%COMP%] + div[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{min-width:126px}[_nghost-%COMP%]   a[_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]{padding-bottom:60px}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:first-child{border-top-left-radius:0;border-top-right-radius:0;background-color:unset}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:last-of-type{border-bottom-left-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + div[_ngcontent-%COMP%] > aside[_ngcontent-%COMP%]{left:auto;right:0}"]}),a})();var A=r(60195),_t=r(33965),yt=r(6304),Pt=r(61264),v=r(46298),xt=r(38018),Ct=r(63457);let Z=(()=>{class a{constructor(e,n,o){this.paymentPlansStateService=e,this.plateDataService=n,this.windowRef=o,this.steps=[],this.stepNum=0,this.eftMailingInfo=new Map}ngOnInit(){this.isEzTagFlow=this.isEzTagFlow,this.planData=this.plateDataService.getPlanDataInfo(this.isEzTagFlow),this.Title=this.cmsBaseContent.Title,this.steps=[{name:this.cmsBaseContent.Step1,background:"primary"},{name:this.cmsBaseContent.Step2,background:"secondary"},{name:this.cmsBaseContent.Step3,background:"secondary"},{name:this.cmsBaseContent.Step4}];const e=this.paymentPlansStateService.getCachedEftAddressInfo()||{};this.eftMailingInfo.clear(),Object.keys(e).forEach(n=>{this.eftMailingInfo.set(+n,e[n])})}ngOnDestroy(){this.paymentPlansStateService.destroyPaymentPlansCurrentStep(this.isEzTagFlow),this.eftMailingInfo.clear()}getCachedEftMailingInfo(e){return this.eftMailingInfo.get(e)}setCachedEftMailingInfo(e,n){this.eftMailingInfo.set(e,n);const o=[...this.eftMailingInfo.entries()].reduce((l,c)=>({...l,[c[0]]:c[1]}),{});this.paymentPlansStateService.setCachedEftAddressInfo(o)}scrollToTop(){var e=this;return(0,A.Z)(function*(){e.isHidden=!0,yield(0,yt.Dc)(20),e.windowRef.scrollTo(0,0),e.isHidden=!1})()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.b2),t.Y36(v.AY),t.Y36(Pt.X9))},a.\u0275cmp=t.Xpm({type:a,selectors:[["payment-plans-frame-component"]],inputs:{isEzTagFlow:"isEzTagFlow",cmsBaseContent:"cmsBaseContent"},decls:6,vars:4,consts:[[1,"refresh-2020"],[3,"steps","currentStepNum"]],template:function(e,n){1&e&&(t.TgZ(0,"main",0)(1,"title-banner"),t._uU(2),t.qZA(),t._UZ(3,"stepper",1),t.TgZ(4,"div"),t._UZ(5,"ui-view"),t.qZA()()),2&e&&(t.xp6(2),t.hij(" ",n.cmsBaseContent.Title," "),t.xp6(1),t.Q6J("steps",n.steps)("currentStepNum",n.stepNum),t.xp6(1),t.Q6J("@hide",n.isHidden))},directives:[xt.v,Ct.v,I.UIView],styles:[""],data:{animation:[_t.F]}}),a})();var $=r(37661);function Mt(a,i){if(1&a&&(t.TgZ(0,"section")(1,"h3"),t._uU(2),t.qZA(),t._UZ(3,"img",1),t.qZA()),2&a){const e=i.$implicit;t.xp6(2),t.Oqu(e.message),t.xp6(1),t.Q6J("src",e.url,t.LSH)}}let vt=(()=>{class a{constructor(e,n){this.dialogRef=e,this.cmsUtilityService=n;const o=e.data.pageData,l=e.data.reverseOrder;this.header=o.ShortDescription,this.sections=o.Children.map(c=>({message:c.ShortDescription,url:n.generateFileSrc(c.Image),order:c.order})).sort((c,g)=>(c.order-g.order)*(l?-1:1))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.zj),t.Y36($.pA))},a.\u0275cmp=t.Xpm({type:a,selectors:[["paymentplan-invoice-example"]],decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1),t.qZA(),t._UZ(2,"mat-divider"),t.YNc(3,Mt,4,2,"section",0)),2&e&&(t.xp6(1),t.Oqu(n.header),t.xp6(2),t.Q6J("ngForOf",n.sections))},directives:[O.d,s.sg],styles:["[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-top:16px;width:65px;margin-bottom:20px}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;font-family:Jost;margin-bottom:0;margin-top:0}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;font-family:Jost;margin-bottom:0}[_nghost-%COMP%]   section[_ngcontent-%COMP%]{margin-top:32px}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin-top:8px;width:100%}"]}),a})();var Tt=r(41034),At=r(87917),S=r(42423),Ot=r(38898),wt=r(60450),K=r(95556),B=r(39453),Dt=r(69777),R=r(35256);function Zt(a,i){if(1&a&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.stateCode)}}function bt(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid license plate number"),t.qZA())}function St(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid license plate number"),t.qZA())}function It(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid license plate number"),t.qZA())}function Ft(a,i){if(1&a&&(t.ynx(0,30),t.YNc(1,bt,2,0,"p",31),t.YNc(2,St,2,0,"p",31),t.YNc(3,It,2,0,"p",31),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("ngSwitch",e.key),t.xp6(1),t.Q6J("ngSwitchCase","pattern"),t.xp6(1),t.Q6J("ngSwitchCase","required"),t.xp6(1),t.Q6J("ngSwitchCase","maxlength")}}function Jt(a,i){if(1&a&&(t.TgZ(0,"aside"),t.YNc(1,Ft,4,4,"ng-container",29),t.qZA()),2&a){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf",e.submitted)}}function Nt(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid invoice number"),t.qZA())}function Lt(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid invoice number"),t.qZA())}function Ut(a,i){if(1&a&&(t.ynx(0,30),t.YNc(1,Nt,2,0,"p",31),t.YNc(2,Lt,2,0,"p",31),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("ngSwitch",e.key),t.xp6(1),t.Q6J("ngSwitchCase","pattern"),t.xp6(1),t.Q6J("ngSwitchCase","required")}}function Et(a,i){if(1&a&&(t.TgZ(0,"aside"),t.YNc(1,Ut,3,3,"ng-container",29),t.qZA()),2&a){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf",e.submitted)}}function Yt(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid payment plan number"),t.qZA())}function Qt(a,i){1&a&&(t.TgZ(0,"p",32),t._uU(1,"Please enter a valid payment plan number"),t.qZA())}function zt(a,i){if(1&a&&(t.ynx(0,30),t.YNc(1,Yt,2,0,"p",31),t.YNc(2,Qt,2,0,"p",31),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("ngSwitch",e.key),t.xp6(1),t.Q6J("ngSwitchCase","pattern"),t.xp6(1),t.Q6J("ngSwitchCase","required")}}function kt(a,i){if(1&a&&(t.TgZ(0,"aside",33),t.YNc(1,zt,3,3,"ng-container",29),t.qZA()),2&a){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf",e.submitted)}}let qt=(()=>{class a{constructor(e,n,o,l,c,g,y,d,x,C){this.parent=e,this.authService=n,this.dataService=o,this.responseErrorService=l,this.paymentPlanApi=c,this.state=g,this.dialogService=y,this.webStorage=d,this.webStorageConst=x,this.environmentConfig=C}get isEzTagFlow(){return this.parent.isEzTagFlow}get Title(){return this.cmsPage.ShortDescription}get Description(){return this.cmsPage.LongDescription}ngOnInit(){var e,n;this.parent.stepNum=0,this.parent.scrollToTop();const o=this.webStorage.getValue(this.webStorageConst.vehicleSelected);if(this.environmentConfig.isMergeMATandVioOn&&null!=o){this.licensePlateNumber=null!==(e=o.number)&&void 0!==e?e:"";const l=null!==(n=o.state)&&void 0!==n?n:"";this.selectedState=this.USstates.find(l?c=>c.stateCode===l:c=>"TX"===c.stateCode),this.webStorage.removeEntry(this.webStorageConst.vehicleSelected)}(!this.environmentConfig.isMergeMATandVioOn||null===o)&&(this.licensePlateNumber="",this.selectedState=this.USstates.find(l=>"TX"===l.stateCode)),this.authService.isAuthenticated()}findViolations(e){var n=this;return(0,A.Z)(function*(){const o={InvoiceNumber:n.invoiceNumber?""+n.invoiceNumber:null,LicenseState:n.selectedState.stateCode,LicensePlate:n.licensePlateNumber,PaymentPlanId:n.paymentPlanId?""+n.paymentPlanId:null},l=yield n.paymentPlanApi.violationsPaymentPlansSearch(o);!n.responseErrorService.isErrorFree(l)||(n.dataService.setPaymentPlans(l,n.isEzTagFlow),yield n.state.go(e))})()}openInvoiceExample(e){this.dialogService.openSliderCentered(vt,{pageData:this.cmsInvoiceExample,reverseOrder:e})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z),t.Y36(At.$),t.Y36(v.AY),t.Y36(h.Sr),t.Y36(S.f),t.Y36(u.StateService),t.Y36(h.xA),t.Y36(Ot.V),t.Y36(wt.L),t.Y36(Tt.U4))},a.\u0275cmp=t.Xpm({type:a,selectors:[["payment-plans-landing-component"]],inputs:{selectedState:"selectedState",licensePlateNumber:"licensePlateNumber",paymentPlanId:"paymentPlanId",invoiceNumber:"invoiceNumber",USstates:"USstates",cmsPopup:"cmsPopup",cmsPage:"cmsPage",closeImage:"closeImage",cmsInvoiceExample:"cmsInvoiceExample"},decls:50,vars:23,consts:[[1,"u-spacing__firstHeaderToTitle--marginTop"],[1,"u-spacing__divider--marginTopBottom"],["fxLayout","column","validation-focus","","novalidate","",1,"u-spacing__fieldToSection--marginTop"],["LandingForm","ngForm"],["fxLayout","row","fxLayoutGap","20px"],["fxFlex","none"],["translation-skip","","id","selectedState","tabindex","1",3,"value","disableOptionCentering","valueChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","auto","ngClass.gt-sm","plate-input-width",3,"error-check"],["for","licensePlate"],["type","text","name","licensePlate","pattern","^[a-zA-Z0-9]{1,10}$","id","licensePlate","tabindex","2","maxlength","10","required","",3,"ngModel","ngModelChange"],["licensePlateInput","ngModel"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start start","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start center",1,"u-spacing__fieldToField--marginTop"],["fxFlex","grow 100%","fxFlex.lt-md","auto","ngClass.gt-sm","invoice-number-container","ngClass.lt-md","u-spacing--widthFill",3,"error-check"],["type","text","id","invoice","pattern","^[0-9]+$","name","invoice","tabindex","3",3,"ngModel","required","ngModelChange"],["invoiceNumberInput","ngModel"],["id","findInvoiceLnk",3,"click"],["ngClass.gt-sm","or-separator-spacing-desktop","ngClass.lt-md","or-separator-spacing-mobile","fxFlex","none","fxFlex.lt-md","auto",1,"or-separator"],["fxFlex","grow 100%","fxFlex.lt-md","auto","ngClass.gt-sm","payment-plan-number-container","ngClass.lt-md","u-spacing--widthFill",3,"error-check"],["for","invoice"],["type","text","id","payPlanIdTxt","pattern","^[0-9]{1,10}$","name","paymentPlans","tabindex","3",3,"ngModel","required","ngModelChange"],["PaymentPlanNumberInput","ngModel"],["class","error-messages",4,"ngFor","ngForOf"],[3,"click"],[1,"u-spacing__buttonToField--marginTop"],[3,"reverseOrder","next"],["wizard-next",""],[3,"value"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","help-block",4,"ngSwitchCase"],[1,"help-block"],[1,"error-messages"]],template:function(e,n){if(1&e&&(t.TgZ(0,"page-filled-container")(1,"section",0)(2,"header")(3,"h2"),t._uU(4),t.qZA(),t._UZ(5,"mat-divider",1),t.qZA(),t.TgZ(6,"article"),t._uU(7),t.qZA(),t.TgZ(8,"form",2,3)(10,"div",4)(11,"section",5)(12,"mat-label"),t._uU(13,"STATE"),t.qZA(),t.TgZ(14,"mat-select",6),t.NdJ("valueChange",function(l){return n.selectedState=l}),t.YNc(15,Zt,2,2,"mat-option",7),t.qZA()(),t.TgZ(16,"section",8)(17,"mat-label",9),t._uU(18,"LICENSE PLATE NUMBER"),t.qZA(),t.TgZ(19,"input",10,11),t.NdJ("ngModelChange",function(l){return n.licensePlateNumber=l}),t.qZA(),t.YNc(21,Jt,2,1,"aside",12),t.ALo(22,"keyvalue"),t.qZA()(),t.TgZ(23,"div",13)(24,"section",14)(25,"mat-label"),t._uU(26,"INVOICE NUMBER"),t.qZA(),t.TgZ(27,"input",15,16),t.NdJ("ngModelChange",function(l){return n.invoiceNumber=l}),t.qZA(),t.YNc(29,Et,2,1,"aside",12),t.ALo(30,"keyvalue"),t.TgZ(31,"div")(32,"a",17),t.NdJ("click",function(){return n.openInvoiceExample(!0)}),t._uU(33,"Need help finding the information on your invoice?"),t.qZA()()(),t.TgZ(34,"div",18),t._uU(35,"OR"),t.qZA(),t.TgZ(36,"section",19)(37,"mat-label",20),t._uU(38,"PAYMENT PLAN NUMBER"),t.qZA(),t.TgZ(39,"input",21,22),t.NdJ("ngModelChange",function(l){return n.paymentPlanId=l}),t.qZA(),t.YNc(41,kt,2,1,"aside",23),t.ALo(42,"keyvalue"),t.TgZ(43,"div")(44,"a",24),t.NdJ("click",function(){return n.openInvoiceExample(!1)}),t._uU(45,"The Payment Plan Number was given upon creation of your Payment Plan"),t.qZA()()()(),t.TgZ(46,"div",25)(47,"wizard-ui",26),t.NdJ("next",function(l){return n.findViolations(l)}),t.TgZ(48,"span",27),t._uU(49,"SEARCH PAYMENT PLANS"),t.qZA()()()()()()),2&e){const o=t.MAs(20),l=t.MAs(28),c=t.MAs(40);t.xp6(4),t.Oqu(n.Title),t.xp6(3),t.Oqu(n.Description),t.xp6(7),t.Q6J("value",n.selectedState)("disableOptionCentering",!0),t.xp6(1),t.Q6J("ngForOf",n.USstates),t.xp6(1),t.Q6J("error-check",o),t.xp6(3),t.Q6J("ngModel",n.licensePlateNumber),t.xp6(2),t.Q6J("ngForOf",t.lcZ(22,17,o.errors)),t.xp6(3),t.Q6J("error-check",l),t.xp6(3),t.Q6J("ngModel",n.invoiceNumber)("required",!n.paymentPlanId),t.xp6(2),t.Q6J("ngForOf",t.lcZ(30,19,l.errors)),t.xp6(7),t.Q6J("error-check",c),t.xp6(3),t.Q6J("ngModel",n.paymentPlanId)("required",!n.invoiceNumber),t.xp6(2),t.Q6J("ngForOf",t.lcZ(42,21,c.errors)),t.xp6(6),t.Q6J("reverseOrder",!0)}},directives:[K.C,O.d,m._Y,m.JL,m.F,p.xw,B.R,p.SQ,p.yH,w.hX,Q.gD,s.sg,Dt.ey,f.oO,R.i,m.Fj,m.c5,m.nD,m.Q7,m.JJ,m.On,s.O5,s.RF,s.n9,p.Wh,N.P,L.O],pipes:[s.Nd],styles:["[_nghost-%COMP%]   .or-separator[_ngcontent-%COMP%]{text-align:center;font-family:Jost;font-size:15px;font-weight:700;width:125px}[_nghost-%COMP%]   .or-separator-spacing-desktop[_ngcontent-%COMP%]{margin-top:42px}[_nghost-%COMP%]   .or-separator-spacing-mobile[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:10px}[_nghost-%COMP%]   mat-select[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   .plate-input-width[_ngcontent-%COMP%]{max-width:370px;min-width:225px}[_nghost-%COMP%]   .invoice-number-container[_ngcontent-%COMP%]{max-width:445px}[_nghost-%COMP%]   .payment-plan-number-container[_ngcontent-%COMP%]{max-width:470px}"]}),a})();var X=r(79150);const tt=function(a){return{"plate-spacing":a}};function Bt(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"h3",6),t._uU(2),t.TgZ(3,"span",7),t._uU(4),t.qZA()(),t._UZ(5,"plan-detail",8),t.BQk()),2&a){const e=i.$implicit,n=i.first,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(6,tt,!n)),t.xp6(1),t.hij(" ",o.cms.data.planActiveTitle," "),t.xp6(2),t.AsE("",e.licPlateState," ",e.licPlateNumber,""),t.xp6(1),t.Q6J("isActive",!0)("plate",e)}}function Rt(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"h3",6),t._uU(2),t.TgZ(3,"span",7),t._uU(4),t.qZA()(),t._UZ(5,"plan-detail",8),t.BQk()),2&a){const e=i.$implicit,n=i.first,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(6,tt,!n)),t.xp6(1),t.hij(" ",o.cms.data.planInactiveTitle," "),t.xp6(2),t.AsE("",e.licPlateState," ",e.licPlateNumber,""),t.xp6(1),t.Q6J("isActive",!1)("plate",e)}}function Ht(a,i){if(1&a&&t._UZ(0,"payment-details",9),2&a){const e=t.oxw();t.Q6J("details",e.planData.selectedPaymentPlan)("cmsContent",e.cms)("isEzTagFlow",e.isEzTagFlow)}}let z=(()=>{class a{constructor(e,n,o,l,c,g){this.parent=e,this.dataService=n,this.responseErrorService=o,this.paymentPlanApi=l,this.cmsUtilService=c,this.spinnerService=g,this.activePlates=[],this.inactivePlates=[],this.processingPlans=()=>{this.dataService.resetPlanDataInfo(this.isEzTagFlow),this.planData=this.dataService.getPlanDataInfo(this.isEzTagFlow),this.activePlates=this.dataService.getActive(this.isEzTagFlow),this.inactivePlates=this.dataService.getInactive(this.isEzTagFlow),this.planData.selectedPaymentPlan=this.dataService.resetSelectedPlan(this.activePlates,this.inactivePlates,this.isEzTagFlow),this.hasCurrentSelectedPlan=!0},this.processPaymentPlanSearch=y=>{if(this.spinnerService.stopSpinner(),!this.responseErrorService.isErrorFree(y))throw y;this.dataService.setPaymentPlans(y,!0)},this.onClickGrid=y=>{this.planData.selectedPaymentPlan=this.dataService.toggleCurrentPlan(y,this.activePlates,this.inactivePlates,this.isEzTagFlow)},this.selectPlan=y=>{this.planData.selectedPaymentPlan=y,[...this.activePlates,...this.inactivePlates].reduce((d,x)=>d.concat(x.paymentPlans),[]).forEach(d=>d.isSelected=d.paymentPlanId===y.paymentPlanId),this.dataService.storePlan(this.planData.selectedPaymentPlan,this.isEzTagFlow)}}get planData(){return this.parent.planData}set planData(e){this.parent.planData=e}ngOnInit(){this.parent.stepNum=1,this.parent.scrollToTop(),this.hasCurrentSelectedPlan=!1;const e=this.cmsContent.Children[4],o=this.cmsContent.Children[1];this.cms={pdf:{pdfDownloadText:e.ShortDescription,pdfDownloadedMessage:e.pdfDownloaded,pdfError:e.pdfError,pdfProcessingMesssage:e.pdfProcessing},data:{planActiveTitle:this.cmsContent.ShortDescription,planInactiveTitle:this.cmsContent.LongDescription,infoIcon:this.cmsUtilService.generateFileSrc(this.cmsContent.Children[3].Image),settlementAmmountText:o.SettlementAmount,paidAmmountText:o.PaidAmount,balanceDueText:o.BalanceDue,paymentPlanTerms:o.LongDescription,activePlanToolTipdecription:o.ShortDescription,defaultedTitle:this.cmsContent.Children[2].Title,defaultedBody:this.cmsContent.Children[2].LongDescription,balanceToolTip:null,paymentPlanTermsLink:null,paymentLateText:this.cmsContent.Children[0].LongDescription,paymentLatePopup:this.cmsContent.Children[0].passedDueTemplate}},this.isEzTagFlow?(this.spinnerService.startSpinner(),this.paymentPlanApi.ezTagSearchPaymentPlans().then(this.processPaymentPlanSearch).then(this.processingPlans).catch(()=>{})):(this.spinnerService.stopSpinner(),this.processingPlans())}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z),t.Y36(v.AY),t.Y36(h.Sr),t.Y36(S.f),t.Y36($.pA),t.Y36(X.V))},a.\u0275cmp=t.Xpm({type:a,selectors:[["payment-plans-grid-component"]],inputs:{isEzTagFlow:"isEzTagFlow",cmsContent:"cmsContent"},decls:7,vars:4,consts:[[3,"hasGutter"],["fxLayout","row","fxLayoutGap","30px","fxLayoutGap.lt-md","none","ngClass.lt-md","lt-md"],["fxFlex","445px","fxFlex.lt-md","none","ngClass.lt-md","u-spacing--widthFill"],[4,"ngFor","ngForOf"],["fxFlex","grow","fxHide.lt-md",""],[3,"details","cmsContent","isEzTagFlow",4,"ngIf"],[3,"ngClass"],["translation-skip",""],[3,"isActive","plate"],[3,"details","cmsContent","isEzTagFlow"]],template:function(e,n){1&e&&(t.TgZ(0,"page-filled-container",0)(1,"main",1)(2,"section",2),t.YNc(3,Bt,6,8,"ng-container",3),t.YNc(4,Rt,6,8,"ng-container",3),t.qZA(),t.TgZ(5,"section",4),t.YNc(6,Ht,1,3,"payment-details",5),t.qZA()()()),2&e&&(t.Q6J("hasGutter",!1),t.xp6(3),t.Q6J("ngForOf",n.activePlates),t.xp6(1),t.Q6J("ngForOf",n.inactivePlates),t.xp6(2),t.Q6J("ngIf",n.planData.selectedPaymentPlan&&n.hasCurrentSelectedPlan))},styles:["[_nghost-%COMP%]   section[_ngcontent-%COMP%]{min-height:600px}[_nghost-%COMP%]   section[_ngcontent-%COMP%]:first-child{overflow-y:scroll;padding-right:13px}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:20px;line-height:30px;font-family:Jost}[_nghost-%COMP%]   .plate-spacing[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:first-child{padding-right:0}[_nghost-%COMP%]   .lt-md[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-left:14px}"]}),a})();var k=r(76739),_=r(33945),jt=r(60697),Vt=r(49985);function Wt(a,i){1&a&&t._UZ(0,"mat-icon",12)}function Gt(a,i){1&a&&t._UZ(0,"mat-icon",13)}const $t=function(a,i){return{nextInstallmentAmount:a,formatedPassedDue:i}};function Kt(a,i){if(1&a&&t._UZ(0,"cms-content",14),2&a){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("template",n.infoIconText(e))("data",t.WLB(2,$t,e.nextInstallmentAmount,n.getCorrectTimeZoneTime(e.nextInstallmentDate)))}}function Xt(a,i){if(1&a&&(t._UZ(0,"div",15),t.ALo(1,"safeHtml")),2&a){const e=t.oxw(2);t.Q6J("innerHtml",t.lcZ(1,1,e.setdeafultTooltip()),t.oJD)}}function te(a,i){if(1&a&&(t.TgZ(0,"div",16)(1,"div",17)(2,"strong"),t._UZ(3,"currency",18),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span",19),t._uU(7,"\xa0|\xa0"),t.qZA()(),t.TgZ(8,"div",20)(9,"span"),t._uU(10,"Bal:\xa0"),t.qZA(),t.TgZ(11,"strong"),t._UZ(12,"currency",18),t.qZA()()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(3),t.Q6J("value",e.nextInstallmentAmount),t.xp6(2),t.hij("\xa0due\xa0",n.getCorrectTimeZoneTime(e.nextInstallmentDate),""),t.xp6(7),t.Q6J("value",e.balanceAmount)}}function ee(a,i){if(1&a&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(2),t.hij("Closed: ",n.getCorrectTimeZoneTime(e.nextInstallmentDate),"")}}function ne(a,i){1&a&&(t.TgZ(0,"div")(1,"span"),t._uU(2,"Defaulted"),t.qZA()())}const ae=function(a){return{selectedPlan:a}},oe=function(a,i){return{passedDue:a,defaulted:i}};function ie(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"section",1),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().viewDetails(l,"lt-md")}),t.TgZ(1,"div",2)(2,"div")(3,"strong"),t._uU(4,"Payment Plan Number: "),t.TgZ(5,"span",3),t._uU(6),t.qZA()(),t.TgZ(7,"a",4),t.NdJ("click",function(o){t.CHM(e);const l=t.oxw();return o.stopPropagation(),l.updateToggleFlag()}),t.YNc(8,Wt,1,0,"mat-icon",5),t.YNc(9,Gt,1,0,"mat-icon",6),t.qZA(),t.TgZ(10,"div")(11,"aside"),t.YNc(12,Kt,1,5,"cms-content",7),t.YNc(13,Xt,2,3,"div",8),t.qZA()()(),t.YNc(14,te,13,3,"div",9),t.YNc(15,ee,3,1,"div",10),t.YNc(16,ne,3,0,"div",10),t.qZA(),t._UZ(17,"i",11),t.qZA()}if(2&a){const e=i.$implicit,n=t.oxw();t.MGl("id","plan",e.paymentPlanId,""),t.Q6J("ngClass",t.VKq(11,ae,n.currentSelectedPlan===e)),t.xp6(6),t.Oqu(e.paymentPlanId),t.xp6(1),t.Q6J("ngClass",t.WLB(13,oe,n.isPassedDue(e),"Defaulted"===e.status)),t.xp6(1),t.Q6J("ngIf","Open"===e.status&&n.isPassedDue(e)||"Defaulted"===e.status),t.xp6(1),t.Q6J("ngIf","Closed"===e.status),t.xp6(3),t.Q6J("ngIf","Defaulted"!==e.status&&n.infoIconText(e)),t.xp6(1),t.Q6J("ngIf","Defaulted"===e.status),t.xp6(1),t.Q6J("ngIf",n.isActive),t.xp6(1),t.Q6J("ngIf","Closed"===e.status),t.xp6(1),t.Q6J("ngIf","Defaulted"===e.status)}}let se=(()=>{class a{constructor(e,n,o,l,c,g,y){this.grid=e,this.dateWithTimeZoneService=n,this.genericRepoService=o,this.cmsIds=l,this.operatingSystemSnifferService=c,this.dialogService=g,this.mediaObserver=y,this.populateCmsContent=d=>{const x=JSON.parse(d.cmsResponse);this.alertContent=x.ShortDescription},this.getCorrectTimeZoneTime=d=>(this.dueDate=this.dateWithTimeZoneService.withoutOffsetToCentral(d,"MMM Do, YYYY z"),this.dueDate),this.setCurrentDate=()=>{this.currentDate=k().format("YYYY-MM-DD")},this.isPassedDueDate=(d,x)=>new Date(d)>new Date(x),this.onClickPlanDesktop=d=>{this.operatingSystemSnifferService.isDesktopOs()&&this.grid.onClickGrid(d.paymentPlanId)},this.onClickPlanMobile=d=>{this.operatingSystemSnifferService.isDesktopOs()||this.grid.onClickGrid(d.paymentPlanId)},this.viewDetails=(d,x)=>{const C=this.mediaObserver.isActive(x);this.grid.selectPlan(d),C&&!this.warningBoxFlag?this.dialogService.openSliderFilled(G,{details:d,cmsContent:this.cms,isEzTagFlow:this.isEzTagFlow},{title:"Plan Details"}):this.warningBoxFlag&&this.updateToggleFlag()}}get currentSelectedPlan(){return this.grid.planData.selectedPaymentPlan}get cms(){return this.grid.cms}get isEzTagFlow(){return this.grid.isEzTagFlow}ngOnInit(){this.warningBoxFlag=!1,this.setCurrentDate(),this.genericRepoService.dataFactory.getCmsPageById({ItemId:this.cmsIds.DetailsAlert}).then(this.populateCmsContent)}get isFullsite(){return this.operatingSystemSnifferService.isDesktopOs()}isPassedDue(e){return this.isPassedDueDate(this.currentDate,e.nextInstallmentDate)}infoIconText(e){const n=this.isPassedDueDate(this.currentDate,e.nextInstallmentDate);return"Open"===e.status&&n?this.cms.data.paymentLatePopup:null}setdeafultTooltip(){var e;return null===(e=this.cms.data)||void 0===e?void 0:e.defaultedBody}updateToggleFlag(){this.warningBoxFlag=!this.warningBoxFlag}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(z),t.Y36(h.xV),t.Y36(h.mb),t.Y36(_.ST),t.Y36(h.aZ),t.Y36(h.xA),t.Y36(jt.u0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["plan-detail"]],inputs:{plate:"plate",isActive:"isActive"},decls:1,vars:1,consts:[["ngClass.lt-md","lt-md","class","refresh-2020","fxLayout","row","fxLayoutAlign","start center","fxLayoutAlign.lt-md","space-between center",3,"ngClass","id","click",4,"ngFor","ngForOf"],["ngClass.lt-md","lt-md","fxLayout","row","fxLayoutAlign","start center","fxLayoutAlign.lt-md","space-between center",1,"refresh-2020",3,"ngClass","id","click"],["fxLayout","column"],["translation-skip",""],[3,"ngClass","click"],["svgIcon","alert",4,"ngIf"],["svgIcon","checkmark","class","center-align",4,"ngIf"],[3,"template","data",4,"ngIf"],["class","default-plan-tooltip",3,"innerHtml",4,"ngIf"],["fxLayout","row wrap",4,"ngIf"],[4,"ngIf"],["fxHide","","fxShow.lt-md","",1,"selectArrow"],["svgIcon","alert"],["svgIcon","checkmark",1,"center-align"],[3,"template","data"],[1,"default-plan-tooltip",3,"innerHtml"],["fxLayout","row wrap"],["fxFlex.lt-md","grow"],[3,"value"],["fxHide.lt-md",""],["fxFlex","nogrow"]],template:function(e,n){1&e&&t.YNc(0,ie,18,16,"section",0),2&e&&t.Q6J("ngForOf",n.plate.paymentPlans)},directives:[s.sg,f.oO,p.xw,p.Wh,s.mk,s.O5,D.Hw,U.R,p.yH,P.Q,f.b8],pipes:[Vt.z],styles:["plan-detail{width:100%}plan-detail section{border:1px solid #f6f6f6;border-radius:10px;background-color:#f6f6f6;margin:8px 0!important;max-height:110px;padding:30px 14px;cursor:pointer}plan-detail section>div{width:100%}plan-detail section>div>div strong{font-weight:700;font-size:16px;line-height:26px;font-family:Montserrat}plan-detail section>div>div:first-child strong{font-weight:600;font-size:18px;line-height:30px;font-family:Jost}plan-detail section i.selectArrow{border:0px;border-right:2px solid #007aff;border-bottom:2px solid #007aff;width:7px;height:7px;margin-right:4px;transform:rotate(-45deg)}plan-detail section a,plan-detail section a:hover{text-decoration:none;color:unset}plan-detail section a:empty{display:none}plan-detail section a{display:inline-block;width:20.25px;height:17.21px}plan-detail section a img{vertical-align:text-bottom}plan-detail section a+div{position:relative}plan-detail section a+div>aside{position:absolute;opacity:0;width:270px;min-height:75px;left:calc(50% - 135px);background-color:#fff;transition:opacity .5s;box-shadow:0 3px 6px #00000029;padding:21px 10px;font-weight:400;font-size:14px;line-height:20px;font-family:Montserrat}plan-detail section a.passedDue mat-icon{fill:#fc2125;margin-left:8px}plan-detail section a.defaulted mat-icon{fill:#ff9200;margin-left:8px}plan-detail section a.passedDue+div>aside *{color:#fc2125}plan-detail section .default-plan-tooltip *{color:#34353a!important}plan-detail section a:hover+div>aside{opacity:1}plan-detail section.selectedPlan{border:1px solid #007aff;background-color:#e0e0ef}plan-detail section.lt-md a+div>aside{width:100%;left:0}plan-detail section.lt-md,plan-detail section.lt-md.selectedPlan{border:0px;border-radius:0;background-color:#f6f6f6;margin:4px 0;padding:18px 15px 22px}plan-detail .center-align{vertical-align:text-bottom}\n"],encapsulation:2}),a})();var le=r(16573),M=r(44367),re=r(37882),ce=r(93436),pe=r(25636),de=r(92208),H=r(68043),j=r(25023),me=r(44854),ge=r(54491);let ue=(()=>{class a{constructor(e,n,o,l){this.el=e,this.currencyPipe=n,this.renderer=o,this.locale=l,this.currencyCode="USD",this.regex={positiveDecimal:new RegExp(/^\d*[\.|,]?\d*$/g),allDecimal:new RegExp(/^-?\d*[\.|,]?\d*$/g)},this.specialKeys=["Backspace","Delete","ArrowLeft","ArrowRight","Del"]}reverseFormatNumber(e,n){const o=new Intl.NumberFormat(n).format(1111).replace(/1/g,""),l=new Intl.NumberFormat(n).format(1.1).replace(/1/g,"");let c=e.replace(new RegExp("\\"+o,"g"),"");c=c.replace(new RegExp("\\"+l,"g"),".");const g=c.replace(/[^\d.-]/g,"");return Number.isNaN(g)?0:g}ngAfterViewInit(){this.el.nativeElement.value=this.currencyPipe.transform(this.el.nativeElement.value.replace(/[,]/g,""),this.currencyCode)}onFocus(){this.el.nativeElement.value=this.el.nativeElement.value.replace(/[^\d.,-]/g,""),this.el.nativeElement.select()}onFocusout(){let e=this.el.nativeElement.value;(0===e.length||1===e.length&&[",",".",""].indexOf(e[0])>-1)&&(e="0"),this.el.nativeElement.value=this.currencyPipe.transform(e,this.currencyCode)}onKeyDown(e){-1===this.specialKeys.indexOf(e.key)&&(e.key.match(this.regex.positiveDecimal)||e.preventDefault())}onBlur(e){const n=this.reverseFormatNumber(this.el.nativeElement.value,this.locale).replace(/^[^0-9]{2}..*/g,"");this.el.nativeElement.value=n}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.SBq),t.Y36(s.H9),t.Y36(t.Qsj),t.Y36(t.soG))},a.\u0275dir=t.lG2({type:a,selectors:[["","inputCurrency",""]],hostBindings:function(e,n){1&e&&t.NdJ("focus",function(){return n.onFocus()})("focusout",function(){return n.onFocusout()})("keydown",function(l){return n.onKeyDown(l)})("blur",function(){return n.onBlur()})},features:[t._Bn([s.H9])]}),a})();var he=r(65316),fe=r(79636),_e=r(29565);function ye(a,i){1&a&&(t.TgZ(0,"span",8),t._uU(1," (AutoPay)"),t.qZA())}function Pe(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"section",20)(1,"input",21),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().selectedPaymentMethod=o}),t.qZA(),t.TgZ(2,"label",22)(3,"span",8),t._uU(4),t.qZA(),t.YNc(5,ye,2,0,"span",23),t.qZA()()}if(2&a){const e=i.$implicit,n=i.index,o=t.oxw();t.xp6(1),t.MGl("id","paymentPlanPaymentMethod_",n,""),t.Q6J("ngModel",o.selectedPaymentMethod)("value",e),t.xp6(1),t.MGl("for","paymentPlanPaymentMethod_",n,""),t.xp6(2),t.Oqu(e.label),t.xp6(1),t.Q6J("ngIf",e.data.autoPay)}}function xe(a,i){if(1&a&&(t.TgZ(0,"section",24)(1,"header")(2,"h3"),t._uU(3),t.qZA()()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(e.cms.selectPaymentAmount)}}function Ce(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"section",28)(1,"input",29),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).selectedPaymentAmount=o})("change",function(){return t.CHM(e),t.oxw(2).updateAmount()}),t.qZA(),t.TgZ(2,"label",30)(3,"span",8),t._uU(4,"Installment Amount"),t.qZA(),t.TgZ(5,"strong",8),t._UZ(6,"currency",31),t.qZA()()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedPaymentAmount)("value",e.PaymentOptions.NextInstallmentAmount),t.xp6(5),t.Q6J("value",e.planData.selectedPaymentPlan.nextInstallmentAmount)}}function Me(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"section",5)(1,"input",32),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).selectedPaymentAmount=o})("change",function(){return t.CHM(e),t.oxw(2).updateAmount()}),t.qZA(),t.TgZ(2,"label",33)(3,"span",8),t._uU(4,"Remaining Amount"),t.qZA(),t.TgZ(5,"strong",8),t._UZ(6,"currency",31),t.qZA()()()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.selectedPaymentAmount)("value",e.PaymentOptions.BalanceAmount),t.xp6(5),t.Q6J("value",e.planData.selectedPaymentPlan.balanceAmount)}}function ve(a,i){if(1&a&&(t.TgZ(0,"error-messages",41)(1,"error-message",42),t._uU(2,"Minimum payment amount must be more than "),t._UZ(3,"currency",31),t.qZA(),t.TgZ(4,"error-message",43),t._uU(5,"Amount may not exceed your balance amount of "),t._UZ(6,"currency",31),t.qZA()()),2&a){t.oxw();const e=t.MAs(8),n=t.oxw(2);t.Q6J("errors",e.errors)("activeBeforeSubmit",!0),t.xp6(3),t.Q6J("value",n.minPaymentAmount),t.xp6(3),t.Q6J("value",n.planData.selectedPaymentPlan.balanceAmount)}}const Te=function(){return{"margin-left":"0%"}};function Ae(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"section",5)(2,"input",34),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).selectedPaymentAmount=o})("change",function(){return t.CHM(e),t.oxw(2).updateAmount(!0)}),t.qZA(),t.TgZ(3,"label",35)(4,"span",36),t._uU(5,"Other amount"),t.qZA(),t.TgZ(6,"span",37)(7,"input",38,39),t.NdJ("change",function(o){return t.CHM(e),t.oxw(2).updateDisplayText(o)}),t.ALo(9,"number"),t.ALo(10,"number"),t.qZA()()()(),t.YNc(11,ve,7,4,"error-messages",40),t.BQk()}if(2&a){const e=t.MAs(8),n=t.oxw(2);t.xp6(2),t.Q6J("ngModel",n.selectedPaymentAmount)("value",n.PaymentOptions.OtherPaymentAmount),t.xp6(1),t.Q6J("error-check",e),t.xp6(3),t.Q6J("ngStyle.lt-md",t.DdM(16,Te)),t.xp6(1),t.Q6J("min",n.minPaymentAmount)("max",n.planData.selectedPaymentPlan.balanceAmount)("value",t.xi3(9,10,n.otherPaymentAmount,"1.2-2"))("ngModel",t.xi3(10,13,n.otherPaymentAmount,"1.2-2"))("required",n.selectedPaymentAmount===n.PaymentOptions.OtherPaymentAmount),t.xp6(4),t.Q6J("ngIf",n.selectedPaymentAmount===n.PaymentOptions.OtherPaymentAmount)}}const Oe=function(){return{"margin-bottom":"20px"}};function we(a,i){if(1&a&&(t.TgZ(0,"section",25),t.YNc(1,Ce,7,3,"section",26),t.YNc(2,Me,7,3,"section",27),t.YNc(3,Ae,12,17,"ng-container",12),t.qZA()),2&a){const e=t.oxw();t.Q6J("ngStyle.lt-md",t.DdM(4,Oe)),t.xp6(1),t.Q6J("ngIf",e.selectedPaymentMethod),t.xp6(1),t.Q6J("ngIf",e.selectedPaymentMethod),t.xp6(1),t.Q6J("ngIf",e.selectedPaymentMethod)}}const De=function(a,i){return{otherPaymentAmount:a,nextUpcomingInstallmentDateFormatted:i}};function Ze(a,i){if(1&a&&(t.TgZ(0,"section",44)(1,"article",45),t._UZ(2,"cms-content",46),t.qZA()()),2&a){const e=t.oxw();t.Q6J("@collapse",!e.hasOverage),t.xp6(2),t.Q6J("template",e.cms.amountSelectionNoteTemplate)("data",t.WLB(3,De,e.otherPaymentAmount,e.nextUpcomingInstallmentDateFormatted))}}function be(a,i){1&a&&(t.TgZ(0,"section"),t._UZ(1,"eft-ach-disclaimer"),t.qZA())}var b=(()=>{return(a=b||(b={})).BalanceAmount="balanceAmount",a.NextInstallmentAmount="nextInstallmentAmount",a.OtherPaymentAmount="otherPaymentAmount",b;var a})();let et=(()=>{class a{constructor(e,n,o,l,c,g,y,d,x){this.parent=e,this.dataService=n,this.state=o,this.dialogService=l,this.countryConversionService=c,this.billingInfoUtilitiesService=g,this.creditCardTypeService=y,this.genericRepoService=d,this.responseErrorService=x,this.PaymentOptions=b,this.BillingType=M.ck,this.maxPaymentAmount=1e4,this.nextUpcomingInstallmentDateFormatted=null,this.addEzTagPayment=!1,this.ezTagPaymentAmount=0,this.paymentInfo=[],this.getLabel=C=>{if(null===C)return null;if(C.billingType===M.ck.Credit){let T;return T=C.billingInformation?C.billingInformation.credit:C.creditCardPaymentMethod,`${this.creditCardTypeService.cardCodeToName(T.cardCode)} **** ${T.cardNbr.replace(/[*-]/g,"")}`}if(C.billingType===M.ck.Eft){let T;return T=C.billingInformation?C.billingInformation.eft:C.eftPaymentMethod,`${T.accountType?T.accountType:T.accountTypeDisplay} **** ${T.accountNumber.slice(-4)}`}return null}}get planData(){return this.parent.planData}get host(){return this}updateOtherAmount(e){e===b.BalanceAmount?this.otherPaymentAmount=this.planData.selectedPaymentPlan.balanceAmount:e===b.NextInstallmentAmount&&(this.otherPaymentAmount=this.planData.selectedPaymentPlan.nextInstallmentAmount)}get minPaymentAmount(){if(this.selectedPaymentAmount===b.OtherPaymentAmount)return this.planData&&this.planData.selectedPaymentPlan&&(this.planData.selectedPaymentPlan.balanceAmount<1||this.planData.selectedPaymentPlan.nextInstallmentAmount<1)?.01:1}updateDisplayText(e){let n=null;e.target.value.match(/^\d+(,\d{3})*(\.\d{0,2})?$/)?(n=e.target.value.replace(/[,]/g,""),this.otherPaymentAmount=n):(this.otherPaymentAmount=0,e.target.value=0)}updateAmount(e){this.otherPaymentAmount=this.planData.selectedPaymentPlan.balanceAmount,e&&document.getElementById("otherAmountTxt").select()}get paymentAmount(){let e=null;return this.selectedPaymentAmount===this.PaymentOptions.BalanceAmount||this.selectedPaymentAmount===this.PaymentOptions.NextInstallmentAmount?e=this.planData.selectedPaymentPlan[this.selectedPaymentAmount]:this.selectedPaymentAmount===this.PaymentOptions.OtherPaymentAmount&&(e=this.otherPaymentAmount),e}isWizardDisabled(e){return null==this.selectedPaymentMethod||e}ngOnInit(){var e=this;return(0,A.Z)(function*(){e.parent.stepNum=2,e.parent.scrollToTop(),e.cms=Object.assign({},e.cmsContent,{amountSelectionNoteTemplate:e.cmsContent.ShortDescription}),yield e.processingPaymentInfo(),e.planData.selectedPaymentPlan.nextUpcomingInstallmentDate&&(e.nextUpcomingInstallmentDateFormatted=k(e.planData.selectedPaymentPlan.nextUpcomingInstallmentDate).format("MMM Do, YYYY")),e.planData.paymentAmount?(e.selectedPaymentAmount=e.planData.paymentAmount===e.planData.selectedPaymentPlan.balanceAmount?e.PaymentOptions.BalanceAmount:e.planData.paymentAmount===e.planData.selectedPaymentPlan.nextInstallmentAmount?e.PaymentOptions.NextInstallmentAmount:e.PaymentOptions.OtherPaymentAmount,e.otherPaymentAmount=e.planData.paymentAmount):(e.selectedPaymentAmount=e.PaymentOptions.NextInstallmentAmount,e.otherPaymentAmount=e.planData.selectedPaymentPlan.nextInstallmentAmount)})()}promptNewPaymentMethod(){var e=this;return(0,A.Z)(function*(){const n=yield e.getCurrentMailingAddress();return e.dialogService.openSliderCentered(re.i,{stateList:e.states,countryList:e.countries,billingType:null,billingInformation:{eft:{accountType:null,accountTypeDisplay:null,name:null,routingNumber:null,accountNumber:null,account2:null,primary:null,accountBillingMethodId:null,nameOnBankAccount:null,address1:null,city:null,state:null,zip:null,plus4:null,country:"USA",displayCountry:"USA",international:!1},credit:{cardCode:null,cardNbr:null,expMonth:null,expYear:null,nameOnCard:null,paypageRegistrationId:null,omniToken:null,primary:null,isNewCard:null,address1:null,city:null,state:null,zip:null,plus4:null,country:"USA",displayCountry:"USA",international:!1}}},{title:"Add a New Payment Method"}).then(g=>{if(g){const y=g.billingType,x={data:{billingType:y,creditCardPaymentMethod:g.billingInformation.credit,eftPaymentMethod:g.billingInformation.eft,address:y===M.ck.Credit?g.billingInformation.credit||n:g.billingInformation.eft||n},label:e.getLabel(g),stored:!1,attached:!1};e.paymentInfo.push(x),e.selectedPaymentMethod=x,e.selectedPaymentAmount||(e.selectedPaymentAmount=e.PaymentOptions.NextInstallmentAmount)}else e.selectedPaymentMethod=null})})()}nextStep(e){var n=this;return(0,A.Z)(function*(){if(n.selectedPaymentMethod.data.billingType===M.ck.Eft&&n.selectedPaymentMethod.stored){const c=n.selectedPaymentMethod.data.eftPaymentMethod,g=n.parent.getCachedEftMailingInfo(c.accountBillingMethodId),y={stateList:n.states,countryList:n.countries,isShowPersonalInfo:!0,addressTitle:"EFT Billing Address",mailingInfo:g?{...g}:{}},d=yield n.dialogService.openSliderCentered(X.zy,y,{title:"EFT Billing Information"});if(!d)return;n.parent.setCachedEftMailingInfo(c.accountBillingMethodId,d.mailingInfo);const{firstName:x,lastName:C}=d.mailingInfo;n.selectedPaymentMethod.data.eftPaymentMethod.nameOnBankAccount=`${x} ${C}`,n.selectedPaymentMethod.data.address=d.mailingInfo}n.planData.billingMethod=n.selectedPaymentMethod.data,n.planData.paymentAmount=n.paymentAmount,n.dataService.setBillingMethod(n.planData.billingMethod,n.planData.paymentAmount,n.isEzTagFlow),n.planData.addAccountFunds=n.addEzTagPayment,n.planData.addAccountFundsAmount=n.addEzTagPayment?n.ezTagPaymentAmount:0,yield n.state.go(e)})()}get hasOverage(){return this.selectedPaymentAmount===this.PaymentOptions.OtherPaymentAmount&&this.otherPaymentAmount>this.planData.selectedPaymentPlan.nextInstallmentAmount}get showNoteForOtherAmmount(){return this.planData.selectedPaymentPlan.balanceAmount>this.planData.selectedPaymentPlan.nextInstallmentAmount}processingPaymentInfo(){var e=this;return(0,A.Z)(function*(){if(e.paymentInfo=[],e.isEzTagFlow){const n=yield e.genericRepoService.dataFactory.getAllPaymentMethods();e.responseErrorService.isErrorFree(n)&&(e.paymentInfo=[...(n.creditCards||[]).map(o=>({billingType:M.ck.Credit,creditCardPaymentMethod:o,autoPay:!1,eftPaymentMethod:null,address:n.address||o,isInternational:"USA"!==(n.address||o||{}).country})).filter(o=>!o.creditCardPaymentMethod.isBlocked),...(n.bankAccounts||[]).map(o=>({billingType:M.ck.Eft,eftPaymentMethod:o,autoPay:!1,address:n.address,isInternational:"USA"!==(n.address||{}).country}))].map(o=>({data:o,label:e.getLabel(o),stored:!0,attached:!1})))}if(e.planData.selectedPaymentPlan.billingMethod&&e.planData.selectedPaymentPlan.billingMethod.billingType){const n={data:e.planData.selectedPaymentPlan.billingMethod,label:e.getLabel(e.planData.selectedPaymentPlan.billingMethod),stored:!0,attached:!0};e.paymentInfo.push(n)}if(e.planData.billingMethod&&e.planData.billingMethod.billingType){const n=e.planData.billingMethod.billingType===M.ck.Credit?e.planData.billingMethod.creditCardPaymentMethod.accountBillingMethodId:e.planData.billingMethod.eftPaymentMethod.accountBillingMethodId;let o;if(n){const l=e.planData.billingMethod.billingType===M.ck.Credit?c=>c.data.creditCardPaymentMethod.accountBillingMethodId===n:c=>c.data.eftPaymentMethod.accountBillingMethodId===n;o=e.paymentInfo.filter(c=>c.stored&&c.data.billingType===e.planData.billingMethod.billingType).find(l)}o?e.selectedPaymentMethod=o:(e.selectedPaymentMethod={attached:!1,label:e.getLabel(e.planData.billingMethod),stored:!1,data:e.planData.billingMethod},e.paymentInfo.push(e.selectedPaymentMethod))}else e.selectedPaymentMethod=e.paymentInfo.find(n=>n.attached)})()}getCurrentMailingAddress(){var e=this;return(0,A.Z)(function*(){const n=yield e.genericRepoService.dataFactory.getPersonalInfo();if(n.errors.length>0||!e.isEzTagFlow)return null;const{mailingAddress:o}=n,{countryList:l}=o;let{country:c}=o;return c&&!e.countryConversionService.isValidCountryCode(l,c)&&(c=e.countryConversionService.countryNameToCode(l,c)),{...o,country:c,international:e.billingInfoUtilitiesService.isInternationalAddress(o)}})()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z),t.Y36(v.AY),t.Y36(u.StateService),t.Y36(h.xA),t.Y36(ce.J),t.Y36(pe.b),t.Y36(de.Qi),t.Y36(h.mb),t.Y36(h.Sr))},a.\u0275cmp=t.Xpm({type:a,selectors:[["select-payment"]],inputs:{isEzTagFlow:"isEzTagFlow",states:"states",countries:"countries",cmsContent:"cmsContent"},decls:34,vars:9,consts:[["name","selectPaymentPlanPaymentMethod","validation-focus","","novalidate",""],["Form","ngForm"],[1,"u-spacing__divider--marginTopBottom"],[1,"selection-to-header-spacing",2,"justify-content","flex-start"],["fxLayout","row","fxLayoutAlign","start center","class","stack-layout","id","paymentMethodsLst",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"stack-layout"],["type","radio","id","newPaymentRadioBtn","name","paymentMethodSelection","value","",1,"inputPosition",3,"ngModel","ngModelChange","click"],["for","newPaymentRadioBtn",1,"u-spacing--widthFill"],[1,"spanReadjust"],["class","u-spacing__sectionToSection--marginTop",4,"ngIf"],["class","selection-to-header-spacing","style","justify-content: flex-start;",3,"ngStyle.lt-md",4,"ngIf"],["class","noteBoxLayout u-spacing__sectionToSection--marginTop",4,"ngIf"],[4,"ngIf"],[1,"u-spacing__buttonToField--marginTop"],[3,"disabled","next"],["Wizard",""],["wizard-next",""],["wizard-cancel",""],["wizard-previous","","fxLayout","row","fxLayoutAlign","start center"],["svgIcon","previous-arrow"],["fxLayout","row","fxLayoutAlign","start center","id","paymentMethodsLst",1,"stack-layout"],["type","radio","name","paymentMethodSelection",1,"inputPosition",3,"id","ngModel","value","ngModelChange"],[1,"u-spacing--widthFill",3,"for"],["class","spanReadjust",4,"ngIf"],[1,"u-spacing__sectionToSection--marginTop"],[1,"selection-to-header-spacing",2,"justify-content","flex-start",3,"ngStyle.lt-md"],["fxLayout","row","fxLayoutAlign","start center","class","stack-layout","id","installmentAmountRdo",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","class","stack-layout",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","id","installmentAmountRdo",1,"stack-layout"],["type","radio","id","paymentPlanInstallationAmount","name","paymentAmountSelection",1,"inputPosition",3,"ngModel","value","ngModelChange","change"],["for","paymentPlanInstallationAmount",1,"boxSpread","u-spacing--widthFill"],[3,"value"],["type","radio","id","paymentPlanRemainingAmount","name","paymentAmountSelection",1,"inputPosition",3,"ngModel","value","ngModelChange","change"],["for","paymentPlanRemainingAmount",1,"boxSpread","u-spacing--widthFill"],["type","radio","id","paymentPlanOtherAmount","name","paymentAmountSelection",1,"inputPosition",3,"ngModel","value","ngModelChange","change"],["fxLayout","row","fxLayoutAlign","start center","for","paymentPlanOtherAmount",1,"boxSpread","staticOtherAmountPadding","u-spacing--widthFill",3,"error-check"],["fxFlex","grow",1,"spanReadjust"],["fxFlex","none",1,"form-text","spanReadjust","otherAmountMargin",3,"ngStyle.lt-md"],["inputCurrency","","type","text","id","otherAmountTxt","step","0.01","name","otherAmount","pattern","^\\d+(,\\d{3})*(\\.\\d{0,2})?$",1,"otherAmountPadding",3,"min","max","value","ngModel","required","change"],["OtherInputAmount","ngModel"],[3,"errors","activeBeforeSubmit",4,"ngIf"],[3,"errors","activeBeforeSubmit"],["rule","min"],["rule","max"],[1,"noteBoxLayout","u-spacing__sectionToSection--marginTop"],["fxLayout","column"],["id","otherNoteTxt",3,"template","data"]],template:function(e,n){if(1&e&&(t.TgZ(0,"page-centered-container")(1,"form",0,1)(3,"card-container")(4,"section")(5,"header")(6,"h2"),t._uU(7),t.qZA(),t._UZ(8,"mat-divider",2),t.qZA()(),t.TgZ(9,"section")(10,"header")(11,"h3"),t._uU(12),t.qZA()()(),t.TgZ(13,"section",3),t.YNc(14,Pe,6,6,"section",4),t.TgZ(15,"section",5)(16,"input",6),t.NdJ("ngModelChange",function(l){return n.selectedPaymentMethod=l})("click",function(){return n.promptNewPaymentMethod()}),t.qZA(),t.TgZ(17,"label",7)(18,"span",8),t._uU(19,"New payment method"),t.qZA()()()(),t.YNc(20,xe,4,1,"section",9),t.YNc(21,we,4,5,"section",10),t.YNc(22,Ze,3,6,"section",11),t.YNc(23,be,2,0,"section",12),t.qZA(),t.TgZ(24,"section",13)(25,"wizard-ui",14,15),t.NdJ("next",function(l){return n.nextStep(l)}),t.TgZ(27,"span",16),t._uU(28,"CONTINUE"),t.qZA(),t.TgZ(29,"span",17),t._uU(30,"Cancel"),t.qZA(),t.TgZ(31,"span",18),t._UZ(32,"mat-icon",19),t._uU(33," Previous "),t.qZA()()()()()),2&e){const o=t.MAs(2);t.xp6(7),t.Oqu(n.cms.Title),t.xp6(5),t.Oqu(n.cms.selectPaymentMethod),t.xp6(2),t.Q6J("ngForOf",n.paymentInfo),t.xp6(2),t.Q6J("ngModel",n.selectedPaymentMethod),t.xp6(4),t.Q6J("ngIf",n.selectedPaymentMethod),t.xp6(1),t.Q6J("ngIf",n.selectedPaymentMethod),t.xp6(1),t.Q6J("ngIf",n.showNoteForOtherAmmount),t.xp6(1),t.Q6J("ngIf",n.selectedPaymentMethod&&n.selectedPaymentMethod.data.billingType===n.BillingType.Eft),t.xp6(2),t.Q6J("disabled",n.isWizardDisabled(o.invalid))}},directives:[H.D,m._Y,m.JL,m.F,B.R,j.D,O.d,s.sg,p.xw,p.Wh,m._,m.Fj,m.JJ,m.On,s.O5,f.Zl,P.Q,R.i,p.yH,me.a,ge.t,ue,m.c5,m.Q7,he.O,fe.H,U.R,_e.QC,N.P,L.O,D.Hw],pipes:[s.JJ],styles:["[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]{vertical-align:text-top;cursor:pointer;z-index:501;margin-left:10px;margin-top:0}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus{outline-width:0px}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{padding-left:48px;padding-top:10px;padding-bottom:10px;margin-bottom:0;border-width:1px;border-style:solid;border-color:#d1d1d5;border-top-width:0px;cursor:pointer;z-index:500;user-select:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#d1d1d5;box-shadow:0 0 0 1px #2b90ff}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%] > strong[_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%] > stack-layout[_ngcontent-%COMP%]{float:right!important;margin-right:10px;width:100px;text-align:right}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%]{display:flex;height:44px!important;position:relative}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%]:first-of-type > input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{border-top-width:1px;border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%]:last-of-type > input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]{border-left-color:#fc2125;border-right-color:#fc2125}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%]:nth-child(2) > input[type=radio][_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]{border-top-color:#fc2125}[_nghost-%COMP%]   .stack-layout[_ngcontent-%COMP%]:last-of-type > input[type=radio][_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]{border-bottom-color:#fc2125}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]:not(:checked) + label[for=paymentPlanOtherAmount][_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){display:none}[_nghost-%COMP%]   label[for=paymentPlanOtherAmount][_ngcontent-%COMP%]{display:flex!important}[_nghost-%COMP%]   label[for=paymentPlanOtherAmount][_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{margin-left:25%}[_nghost-%COMP%]   input.currency[_ngcontent-%COMP%]{float:right!important;padding-left:2em;padding-right:5px;width:100px;text-align:right;border:1px solid #2b90ff;border-radius:3px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   .selection-to-header-spacing[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .otherAmountPadding[_ngcontent-%COMP%]{height:32px!important;width:133px;text-align:end}[_nghost-%COMP%]   input.otherAmountPadding[_ngcontent-%COMP%]:valid, [_nghost-%COMP%]   input.otherAmountPadding.ng-valid[_ngcontent-%COMP%]{border:0px}[_nghost-%COMP%]   input.otherAmountPadding[_ngcontent-%COMP%]:invalid, [_nghost-%COMP%]   input.otherAmountPadding.ng-invalid[_ngcontent-%COMP%]{border-width:1px;border-color:#fc2125}[_nghost-%COMP%]   .otherAmountMargin[_ngcontent-%COMP%]{margin-right:8px;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .form-text[_ngcontent-%COMP%]{position:relative!important}[_nghost-%COMP%]   .boxSpread[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]   .staticOtherAmountPadding[_ngcontent-%COMP%]{padding-top:5px!important}[_nghost-%COMP%]   .spanReadjust[_ngcontent-%COMP%]{font-family:Montserrat;font-size:16px;font-weight:700;padding-top:2px}[_nghost-%COMP%]   .noteBoxLayout[_ngcontent-%COMP%]{background-color:#fafafa;padding:16px 20px;margin-left:-20px;margin-right:-20px;border-radius:10px}[_nghost-%COMP%]   .inputPosition[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto}[_nghost-%COMP%]   .otherAmountWarning[_ngcontent-%COMP%]{font-size:12px;margin-left:10px;margin-top:5px}"],data:{animation:[le.b]}}),a})();var nt=r(38321),at=r(23204),ot=r(80001);function Se(a,i){1&a&&(t.TgZ(0,"p",35),t._uU(1,"Please enter a valid email address"),t.qZA())}function Ie(a,i){1&a&&(t.TgZ(0,"p",35),t._uU(1,"Please enter a valid email address"),t.qZA())}function Fe(a,i){1&a&&(t.TgZ(0,"p",35),t._uU(1,"Please enter a valid email address"),t.qZA())}function Je(a,i){if(1&a&&(t.ynx(0,33),t.YNc(1,Se,2,0,"p",34),t.YNc(2,Ie,2,0,"p",34),t.YNc(3,Fe,2,0,"p",34),t.BQk()),2&a){const e=t.oxw().$implicit;t.Q6J("ngSwitch",e.key),t.xp6(1),t.Q6J("ngSwitchCase","email"),t.xp6(1),t.Q6J("ngSwitchCase","maxLength"),t.xp6(1),t.Q6J("ngSwitchCase","minLength")}}function Ne(a,i){if(1&a&&(t.TgZ(0,"div",31),t.YNc(1,Je,4,4,"ng-container",32),t.qZA()),2&a){t.oxw(2);const e=t.MAs(2);t.xp6(1),t.Q6J("ngIf",e.submitted)}}function Le(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"section",25)(1,"header")(2,"h2"),t._uU(3),t.qZA(),t._UZ(4,"mat-divider",8),t.qZA(),t._UZ(5,"div",26),t.TgZ(6,"section",27)(7,"mat-label"),t._uU(8,"EMAIL"),t.qZA(),t.TgZ(9,"input",28,29),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().emailReceipt=o}),t.qZA(),t.YNc(11,Ne,2,1,"div",30),t.ALo(12,"keyvalue"),t.qZA()()}if(2&a){const e=t.MAs(10),n=t.oxw();t.xp6(3),t.Oqu(n.cmsContent.paymentDetailsTitle),t.xp6(2),t.Q6J("innerHtml",n.cmsContent.emailInstruction,t.oJD),t.xp6(1),t.Q6J("error-check",e),t.xp6(3),t.Q6J("ngModel",n.emailReceipt),t.xp6(2),t.Q6J("ngForOf",t.lcZ(12,5,e.errors))}}const Ue=function(a,i){return{paymentAmount:a,nextUpcomingInstallmentDateFormatted:i}};function Ee(a,i){if(1&a&&(t.TgZ(0,"section",36)(1,"article"),t._UZ(2,"cms-content",37),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("template",e.cmsContent.amountSelectionNoteTemplate)("data",t.WLB(2,Ue,e.paymentAmount,e.nextUpcomingInstallmentDateFormatted))}}let it=(()=>{class a{constructor(e,n,o,l,c,g,y){this.parent=e,this.dataService=n,this.state=o,this.responseErrorService=l,this.paymentPlanApi=c,this.genericRepoService=g,this.stateNames=y,this.formatDate=d=>k(d instanceof Date?d:new Date(d)).format("MMM Do, YYYY"),this.todayFormatted=this.formatDate(new Date)}get planData(){return this.parent.planData}get cms(){return this.cmsContent}get isMaxPayment(){return this.planData.paymentAmount===this.planData.selectedPaymentPlan.balanceAmount}get hasOverage(){return this.planData.paymentAmount>this.planData.selectedPaymentPlan.nextInstallmentAmount}get paymentAmount(){return this.planData.paymentAmount}get nextUpcomingInstallmentDateFormatted(){return this.formatDate(this.planData.selectedPaymentPlan.nextUpcomingInstallmentDate)}ngOnInit(){this.parent.stepNum=3,this.parent.scrollToTop(),this.isEzTagFlow&&this.genericRepoService.dataFactory.getPersonalInfo().then(e=>{this.emailReceipt=e.contactInfo.emailAddress}),this.totalDue=this.planData.paymentAmount+(this.planData.addAccountFunds?this.planData.addAccountFundsAmount:0)}makePayment(e){var n=this;return(0,A.Z)(function*(){let o;n.planData.billingMethod.billingType===M.ck.Eft&&(n.planData.billingMethod.eftPaymentMethod.name=n.planData.billingMethod.eftPaymentMethod.name||n.planData.billingMethod.eftPaymentMethod.nameOnBankAccount,n.planData.billingMethod.eftPaymentMethod.nameOnBankAccount=n.planData.billingMethod.eftPaymentMethod.nameOnBankAccount||n.planData.billingMethod.eftPaymentMethod.name),n.planData.billingMethod.eftPaymentMethod&&(o=n.planData.billingMethod.eftPaymentMethod.accountType===M.Jb.Personal?"Personal":"Business");const l={eftPaymentMethod:Object.assign({},n.planData.billingMethod.eftPaymentMethod,{accountTypeDisplay:o}),creditCardPaymentMethod:n.planData.billingMethod.creditCardPaymentMethod,creditCard:n.planData.billingMethod.billingType===M.ck.Credit,paymentPlanId:n.planData.selectedPaymentPlan.paymentPlanId,amount:n.planData.paymentAmount,email:n.emailReceipt};n.isEzTagFlow&&Object.assign(l,{AccountPayment:n.planData.addAccountFunds,AccountPaymentAmount:n.planData.addAccountFundsAmount});const c=yield n.isEzTagFlow?n.paymentPlanApi.ezTagPayment(l):n.paymentPlanApi.violationsPayment(l);n.responseErrorService.isErrorFree(c)&&(n.dataService.setPaymentResponse({originalRequest:c.originalRequest,currentBalanceObj:n.isEzTagFlow?c.currentBalanceObj:null,currentPaymentPlanBalanceObj:n.isEzTagFlow?c.currentPaymentPlanBalanceObj:null},n.isEzTagFlow),n.dataService.setPlanDataInfo(n.planData,n.isEzTagFlow),yield n.state.go(e))})()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z),t.Y36(v.AY),t.Y36(u.StateService),t.Y36(h.Sr),t.Y36(S.f),t.Y36(h.mb),t.Y36(_.l2))},a.\u0275cmp=t.Xpm({type:a,selectors:[["confirm-component"]],inputs:{cmsContent:"cmsContent",isEzTagFlow:"isEzTagFlow"},decls:39,vars:17,consts:[["validation-focus","","name","paymentPlanConfirmForm"],["ConfirmForm","ngForm"],["fxLayout","column"],["fxLayout","column","class","u-spacing__sectionToSection--marginTop",4,"ngIf"],["fxLayout","column",1,"u-spacing__headerToSection--marginTop"],["fxLayout","row","fxLayoutAlign","start center",1,"u-spacing--widthFill"],["fxFlex","grow"],["fxFlex","none","aria-label","Edit",1,"editButton",3,"click"],[1,"u-spacing__divider--marginTopBottom"],[3,"billingType","bankDetails","creditCard","showAccountNumber","showLabels","edit"],[3,"address","international","showLabels"],[1,"u-spacing__rowToSection--marginTop",3,"rowType"],["col-start","","id","totalPaymentLabel","fxFlex","grow"],["col-end","","id","totalPaymentValue","fxFlex","none"],[3,"value"],["fxLayout","row",1,"u-spacing__sectionToRow--marginTop"],["fxFlex","none"],["class","noteBoxLayout u-spacing__sectionToSection--marginTop",4,"ngIf"],["fxLayout","column",1,"u-spacing__buttonToField--marginTop"],[3,"next"],["Wizard",""],["wizard-next",""],["wizard-cancel",""],["wizard-previous","","fxLayout","row","fxLayoutAlign","start center"],["svgIcon","previous-arrow"],["fxLayout","column",1,"u-spacing__sectionToSection--marginTop"],[3,"innerHtml"],[1,"u-spacing--widthFill","u-spacing__fieldToSection--marginTop",3,"error-check"],["type","text","id","emailAddress","name","emailAddress","maxLength","80","minLength","1","placeholder","username@domain.com","email","",1,"u-spacing--widthFill",3,"ngModel","ngModelChange"],["EmailAddressInput","ngModel"],["role","alert",4,"ngFor","ngForOf"],["role","alert"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","help-block",4,"ngSwitchCase"],[1,"help-block"],[1,"noteBoxLayout","u-spacing__sectionToSection--marginTop"],[3,"template","data"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"page-centered-container")(1,"form",0,1)(3,"card-container")(4,"section",2)(5,"article"),t._uU(6),t.qZA()(),t.YNc(7,Le,13,7,"section",3),t.TgZ(8,"section",4)(9,"header")(10,"div",5)(11,"h2",6),t._uU(12),t.qZA(),t.TgZ(13,"a",7),t.NdJ("click",function(){return t.CHM(o),t.MAs(31).gotoPreviousState()}),t._uU(14," Edit "),t.qZA()(),t._UZ(15,"mat-divider",8),t.qZA(),t.TgZ(16,"payment-display",9),t.NdJ("edit",function(){return t.CHM(o),t.MAs(31).gotoPreviousState()}),t.qZA(),t._UZ(17,"address-display",10),t.qZA(),t.TgZ(18,"row-container",11)(19,"section",12),t._uU(20),t.qZA(),t.TgZ(21,"section",13),t._UZ(22,"currency",14),t.qZA()(),t.TgZ(23,"section",15)(24,"article",6),t._uU(25),t.qZA(),t.TgZ(26,"article",16),t._uU(27),t.qZA()(),t.YNc(28,Ee,3,5,"section",17),t.qZA(),t.TgZ(29,"section",18)(30,"wizard-ui",19,20),t.NdJ("next",function(c){return n.makePayment(c)}),t.TgZ(32,"span",21),t._uU(33,"SUBMIT PAYMENT"),t.qZA(),t.TgZ(34,"span",22),t._uU(35,"Cancel"),t.qZA(),t.TgZ(36,"span",23),t._UZ(37,"mat-icon",24),t._uU(38," Previous "),t.qZA()()()()()}2&e&&(t.xp6(6),t.hij(" ",n.cmsContent.reviewInfoHeader," "),t.xp6(1),t.Q6J("ngIf",!n.isEzTagFlow),t.xp6(5),t.Oqu(n.cms.paymentDetailsHeader),t.xp6(4),t.Q6J("billingType",n.planData.billingMethod.billingType)("bankDetails",n.planData.billingMethod.eftPaymentMethod)("creditCard",n.planData.billingMethod.creditCardPaymentMethod)("showAccountNumber",!0)("showLabels",!0),t.xp6(1),t.Q6J("address",n.planData.billingMethod.address)("international",n.planData.billingMethod.address.international)("showLabels",!0),t.xp6(1),t.Q6J("rowType","emphasis"),t.xp6(2),t.hij(" ",n.cmsContent.paymentPlanAmountLabel," "),t.xp6(2),t.Q6J("value",n.planData.paymentAmount),t.xp6(3),t.hij(" ",n.cmsContent.paymentDateLabel," "),t.xp6(2),t.hij(" ",n.todayFormatted," "),t.xp6(1),t.Q6J("ngIf",n.hasOverage&&!n.isMaxPayment))},directives:[H.D,m._Y,m.JL,m.F,B.R,j.D,p.xw,s.O5,O.d,R.i,w.hX,m.Fj,m.on,m.JJ,m.On,s.sg,s.RF,s.n9,p.Wh,p.yH,nt.K,at.G,ot.v,P.Q,U.R,N.P,L.O,D.Hw],pipes:[s.Nd],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{max-height:70px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   .noteBoxLayout[_ngcontent-%COMP%]{background-color:#fafafa;padding:16px 20px;margin-left:-20px;margin-right:-20px;border-radius:10px}[_nghost-%COMP%]   #totalPaymentLabel[_ngcontent-%COMP%]{font-family:Montserrat;color:#34353a;font-weight:700;font-size:16px}[_nghost-%COMP%]   #totalPaymentValue[_ngcontent-%COMP%]{text-align:right;font-family:Montserrat;color:#34353a;font-weight:700;font-size:16px}[_nghost-%COMP%]   .editButton[_ngcontent-%COMP%]{font-weight:500;font-family:Jost}"]}),a})();var Ye=r(33402);const Qe=function(a){return{paymentPlanNumber:a}};function ze(a,i){if(1&a&&(t.TgZ(0,"section",22)(1,"article"),t._UZ(2,"cms-content",14),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("template",e.cmsContent.Children[0].ShortDescription)("data",t.VKq(2,Qe,e.paymentPlanNumber))}}function ke(a,i){if(1&a&&t._UZ(0,"payment-display",23),2&a){const e=t.oxw();t.Q6J("billingType",e.planData.billingMethod.billingType)("bankDetails",e.planData.billingMethod.eftPaymentMethod)("creditCard",e.planData.billingMethod.creditCardPaymentMethod)("showAccountNumber",!0)}}function qe(a,i){if(1&a&&t._UZ(0,"address-display",24),2&a){const e=t.oxw();t.Q6J("address",e.planData.billingMethod.billingType===e.BillingType.Credit?e.planData.billingMethod.creditCardPaymentMethod:e.planData.billingMethod.eftPaymentMethod)("international",e.planData.billingMethod.billingType===e.BillingType.Credit?e.planData.billingMethod.creditCardPaymentMethod.international:e.planData.billingMethod.eftPaymentMethod.international)("showLabels",!1)("showEdit",!1)}}const Be=function(a,i){return{paymentAmount:a,nextUpcomingInstallmentDateFormatted:i}};function Re(a,i){if(1&a&&(t.TgZ(0,"section",22)(1,"article"),t._UZ(2,"cms-content",14),t.qZA()()),2&a){const e=t.oxw();t.xp6(2),t.Q6J("template",e.cmsContent.LongDescription)("data",t.WLB(2,Be,e.paymentAmount,e.nextUpcomingInstallmentDateFormatted))}}const He=function(a,i){return{"u-spacing__sectionToSection--marginTop":a,"u-spacing__sectionToRow--marginTop":i}},je=function(a){return{leftoverAmount:a}};let st=(()=>{class a{constructor(e,n,o,l,c,g){this.parent=e,this.state=n,this.paymentPlanApi=o,this.responseErrorService=l,this.dataService=c,this.dateWithTimeZoneService=g,this.BillingType=M.ck,this.formatCurrentDate=()=>{this.paymentDate=this.dateWithTimeZoneService.withoutOffsetToCentral(k().format("YYYY-MM-DDTHH:mm:ss"),"MMM D, YYYY h:mm:ss A z")}}get cms(){return this.cmsContent}get planData(){return this.parent.planData}get paymentAmount(){return this.planData.paymentAmount}backToPaymentPlans(e){var n=this;return(0,A.Z)(function*(){const o=yield n.isEzTagFlow?n.paymentPlanApi.ezTagSearchPaymentPlans():n.paymentPlanApi.violationsPaymentPlansSearch({InvoiceNumber:""+(n.paymentResponse.originalRequest.invoiceNumber||""),LicenseState:n.paymentResponse.originalRequest.licenseState,LicensePlate:n.paymentResponse.originalRequest.licensePlate,PaymentPlanId:""+(n.paymentResponse.originalRequest.paymentPlanId||"")});n.responseErrorService.isErrorFree(o)&&(n.dataService.setPaymentPlans(o,n.isEzTagFlow),yield n.state.go(e))})()}ngOnInit(){this.parent.stepNum=4,this.parent.scrollToTop(),this.paymentResponse=this.dataService.getPaymentResponse(this.isEzTagFlow),this.formatCurrentDate(),this.leftoverAmount=this.planData.selectedPaymentPlan.balanceAmount-this.planData.paymentAmount,this.nextUpcomingInstallmentDateFormatted=this.dateWithTimeZoneService.withoutOffsetToCentral(this.planData.selectedPaymentPlan.nextInstallmentDate,"MMM Do, YYYY z"),this.paymentPlanNumber=this.planData.selectedPaymentPlan.paymentPlanId}get isMaxPayment(){return this.planData.paymentAmount===this.planData.selectedPaymentPlan.balanceAmount}get hasOverage(){return this.planData.paymentAmount>this.planData.selectedPaymentPlan.nextInstallmentAmount}print(){window.print()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z),t.Y36(u.StateService),t.Y36(S.f),t.Y36(h.Sr),t.Y36(v.AY),t.Y36(h.xV))},a.\u0275cmp=t.Xpm({type:a,selectors:[["receipt-component"]],inputs:{cmsContent:"cmsContent",isEzTagFlow:"isEzTagFlow"},decls:36,vars:20,consts:[["fxLayout","column"],[1,"u-spacing__firstHeaderToTitle--marginTop"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","start start"],["fxFlex","grow","fxFlexOrder","1","fxFlexOrder.lt-md","2"],["fxFlex","none","fxFlexOrder","2","fxFlexOrder.lt-md","1","ngClass.lt-md","printContainer-extra-bottom-space"],["id","printButton"],[1,"u-spacing__divider--marginTopBottom"],[3,"rowType"],["col-start","","id","totalPaymentLabel","fxFlex","grow"],["col-end","","id","totalPaymentValue","fxFlex","none"],[3,"value"],[1,"u-spacing__sectionToRow--marginTop"],["class","noteBoxLayout u-spacing__sectionToSection--marginTop",4,"ngIf"],[3,"ngClass"],[3,"template","data"],["fxLayout","column",1,"u-spacing__headerToSection--marginTop"],[3,"billingType","bankDetails","creditCard","showAccountNumber",4,"ngIf"],["class","u-spacing__addressToPaymentDisplay--marginTop",3,"address","international","showLabels","showEdit",4,"ngIf"],[1,"u-spacing__buttonToField--marginTop"],[3,"reverseOrder","next"],["Wizard",""],["wizard-next",""],[1,"noteBoxLayout","u-spacing__sectionToSection--marginTop"],[3,"billingType","bankDetails","creditCard","showAccountNumber"],[1,"u-spacing__addressToPaymentDisplay--marginTop",3,"address","international","showLabels","showEdit"]],template:function(e,n){1&e&&(t.TgZ(0,"page-centered-container")(1,"div",0)(2,"card-container",1)(3,"section",0)(4,"header")(5,"div",2)(6,"h2",3),t._uU(7),t.qZA(),t.TgZ(8,"div",4),t._UZ(9,"print-link",5),t.qZA()(),t._UZ(10,"mat-divider",6),t.qZA(),t.TgZ(11,"row-container",7)(12,"article",8),t._uU(13),t.qZA(),t.TgZ(14,"article",9),t._UZ(15,"currency",10),t.qZA()()(),t.TgZ(16,"section",11)(17,"article"),t._uU(18),t.qZA()(),t.YNc(19,ze,3,4,"section",12),t.TgZ(20,"section",13)(21,"article"),t._UZ(22,"cms-content",14),t.qZA()(),t.TgZ(23,"section",15)(24,"header")(25,"h2"),t._uU(26),t.qZA(),t._UZ(27,"mat-divider",6),t.qZA(),t.YNc(28,ke,1,4,"payment-display",16),t.YNc(29,qe,1,4,"address-display",17),t.qZA(),t.YNc(30,Re,3,5,"section",12),t.TgZ(31,"section",18)(32,"wizard-ui",19,20),t.NdJ("next",function(l){return n.backToPaymentPlans(l)}),t.TgZ(34,"span",21),t._uU(35,"BACK TO PAYMENT PLANS"),t.qZA()()()()()()),2&e&&(t.xp6(7),t.hij(" ",n.cmsContent.Title," "),t.xp6(4),t.Q6J("rowType","emphasis"),t.xp6(2),t.hij(" ",n.cmsContent.paymentAmount," "),t.xp6(2),t.Q6J("value",n.paymentAmount),t.xp6(3),t.AsE("",n.cmsContent.paymentDate," ",n.paymentDate,""),t.xp6(1),t.Q6J("ngIf",0===n.leftoverAmount),t.xp6(1),t.Q6J("ngClass",t.WLB(15,He,0!==n.leftoverAmount,0===n.leftoverAmount)),t.xp6(2),t.Q6J("template",n.cmsContent.ShortDescription)("data",t.VKq(18,je,n.leftoverAmount)),t.xp6(4),t.Oqu(n.cmsContent.billingInfoHeader),t.xp6(2),t.Q6J("ngIf",n.planData.billingMethod&&n.planData.billingMethod.billingType),t.xp6(1),t.Q6J("ngIf",n.planData.billingMethod&&n.planData.billingMethod.billingType),t.xp6(1),t.Q6J("ngIf",n.hasOverage&&!n.isMaxPayment),t.xp6(2),t.Q6J("reverseOrder",!0))},directives:[H.D,p.xw,j.D,p.Wh,p.yH,p.r7,f.oO,Ye.F,O.d,ot.v,P.Q,s.O5,U.R,s.mk,nt.K,at.G,N.P,L.O],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{max-height:70px}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{width:65px}[_nghost-%COMP%]   .noteBoxLayout[_ngcontent-%COMP%]{background-color:#fafafa;padding:16px 20px;margin-left:-20px;margin-right:-20px;border-radius:10px}[_nghost-%COMP%]   #totalPaymentLabel[_ngcontent-%COMP%]{font-weight:700;font-size:16px;color:#34353a}[_nghost-%COMP%]   #totalPaymentValue[_ngcontent-%COMP%]{text-align:right;font-weight:700;font-size:16px}[_nghost-%COMP%]   .printContainer-extra-bottom-space[_ngcontent-%COMP%]{margin-left:26px;margin-bottom:25px}"]}),a})();var Ve=r(29419),We=r(26186),Ge=r(98730);const Ke=r(66274)._.map(a=>{const i={[_.Dn.Root]:Z,[_.Dn.Landing]:qt,[_.Dn.Grid]:z,[_.Dn.MakePayment]:et,[_.Dn.Confirm]:it,[_.Dn.Receipt]:st,[_.Dn.AccountOverview]:Z,[_.Dn.AccountOverviewSummary]:z,[_.Dn.AccountOverviewSelectPayment]:et,[_.Dn.AccountOverviewConfirm]:it,[_.Dn.AccountOverviewReceipt]:st};return{...a,component:i[a.name]}});let Xe=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:s.H9,useClass:s.H9},{provide:v.b2,useClass:v.b2},{provide:_.l2,useValue:_.Dn},{provide:_.ST,useValue:_._J},{provide:_.b_,useValue:_.o0},{provide:v.AY,useClass:v.AY},{provide:_.uv,useValue:_.fq},{provide:S.f,useClass:S.f}],imports:[[F.D,s.ez,I.UIRouterModule.forChild({states:Ke}),Y.ez,Ve.lg,Ge.kS,We.n,m.u5,q.o9,Q.LD,w.lN,O.t,D.Ps]]}),a})();t.B6R(z,[K.C,p.xw,p.SQ,f.oO,p.yH,s.sg,s.mk,se,f.b8,s.O5,G],[])}}]);