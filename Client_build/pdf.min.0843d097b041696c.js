!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],t):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=t():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=t()}(globalThis,()=>(()=>{var __webpack_modules__=[,(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=yt,e.arraysToBytes=function rt(et){const tt=et.length;if(1===tt&&et[0]instanceof Uint8Array)return et[0];let Z=0;for(let dt=0;dt<tt;dt++)Z+=yt(et[dt]);let Et=0;const Mt=new Uint8Array(Z);for(let dt=0;dt<tt;dt++){let ht=et[dt];ht instanceof Uint8Array||(ht="string"==typeof ht?ot(ht):new Uint8Array(ht));const V=ht.byteLength;Mt.set(ht,Et),Et+=V}return Mt},e.assert=function R(et,tt){et||L(tt)},e.bytesToString=function at(et){("object"!=typeof et||null===et||void 0===et.length)&&L("Invalid argument for bytesToString");const tt=et.length,Z=8192;if(tt<Z)return String.fromCharCode.apply(null,et);const Et=[];for(let Mt=0;Mt<tt;Mt+=Z){const dt=Math.min(Mt+Z,tt),ht=et.subarray(Mt,dt);Et.push(String.fromCharCode.apply(null,ht))}return Et.join("")},e.createPromiseCapability=function Ft(){const et=Object.create(null);let tt=!1;return Object.defineProperty(et,"settled",{get:()=>tt}),et.promise=new Promise(function(Z,Et){et.resolve=function(Mt){tt=!0,Z(Mt)},et.reject=function(Mt){tt=!0,Et(Mt)}}),et},e.createValidAbsoluteUrl=function p(et){let tt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!et)return null;try{if(Z&&"string"==typeof et){if(Z.addDefaultProtocol&&et.startsWith("www.")){const Mt=et.match(/\./g);Mt&&Mt.length>=2&&(et=`http://${et}`)}if(Z.tryConvertEncoding)try{et=vt(et)}catch{}}const Et=tt?new URL(et,tt):new URL(et);if(F(Et))return Et}catch{}return null},e.getModificationDate=function Rt(){let et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[et.getUTCFullYear().toString(),(et.getUTCMonth()+1).toString().padStart(2,"0"),et.getUTCDate().toString().padStart(2,"0"),et.getUTCHours().toString().padStart(2,"0"),et.getUTCMinutes().toString().padStart(2,"0"),et.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function z(){return ut},e.info=function $(et){ut>=N.INFOS&&console.log(`Info: ${et}`)},e.isArrayBuffer=function wt(et){return"object"==typeof et&&null!==et&&void 0!==et.byteLength},e.isArrayEqual=function Ct(et,tt){if(et.length!==tt.length)return!1;for(let Z=0,Et=et.length;Z<Et;Z++)if(et[Z]!==tt[Z])return!1;return!0},e.objectFromMap=function M(et){const tt=Object.create(null);for(const[Z,Et]of et)tt[Z]=Et;return tt},e.objectSize=function k(et){return Object.keys(et).length},e.setVerbosityLevel=function ft(et){Number.isInteger(et)&&(ut=et)},e.shadow=f,e.string32=function d(et){return String.fromCharCode(et>>24&255,et>>16&255,et>>8&255,255&et)},e.stringToBytes=ot,e.stringToPDFString=function St(et){if(et[0]>="\xef"){let Z;if("\xfe"===et[0]&&"\xff"===et[1]?Z="utf-16be":"\xff"===et[0]&&"\xfe"===et[1]?Z="utf-16le":"\xef"===et[0]&&"\xbb"===et[1]&&"\xbf"===et[2]&&(Z="utf-8"),Z)try{const Et=new TextDecoder(Z,{fatal:!0}),Mt=ot(et);return Et.decode(Mt)}catch(Et){G(`stringToPDFString: "${Et}".`)}}const tt=[];for(let Z=0,Et=et.length;Z<Et;Z++){const Mt=At[et.charCodeAt(Z)];tt.push(Mt?String.fromCharCode(Mt):et.charAt(Z))}return tt.join("")},e.stringToUTF8String=vt,e.unreachable=L,e.utf8StringToString=function bt(et){return unescape(encodeURIComponent(et))},e.warn=G,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,t(2)),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.LINE_FACTOR=1.35,e.LINE_DESCENT_FACTOR=.35,e.BASELINE_FACTOR=.25925925925925924,e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.AnnotationEditorPrefix="pdfjs_internal_editor_",e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},e.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"};const N={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=N,e.CMapCompressionType={NONE:0,BINARY:1},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ut=N.WARNINGS;function G(et){ut>=N.WARNINGS&&console.log(`Warning: ${et}`)}function L(et){throw new Error(et)}function F(et){if(!et)return!1;switch(et.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function f(et,tt,Z){let Et=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(et,tt,{value:Z,enumerable:!Et,configurable:!0,writable:!1}),Z}const x=function(){function tt(Z,Et){this.constructor===tt&&L("Cannot initialize BaseException."),this.message=Z,this.name=Et}return tt.prototype=new Error,tt.constructor=tt,tt}();function ot(et){"string"!=typeof et&&L("Invalid argument for stringToBytes");const tt=et.length,Z=new Uint8Array(tt);for(let Et=0;Et<tt;++Et)Z[Et]=255&et.charCodeAt(Et);return Z}function yt(et){return void 0!==et.length?et.length:void 0!==et.byteLength?et.byteLength:void L("Invalid argument for arrayByteLength")}e.BaseException=x,e.PasswordException=class U extends x{constructor(tt,Z){super(tt,"PasswordException"),this.code=Z}},e.UnknownErrorException=class B extends x{constructor(tt,Z){super(tt,"UnknownErrorException"),this.details=Z}},e.InvalidPDFException=class H extends x{constructor(tt){super(tt,"InvalidPDFException")}},e.MissingPDFException=class X extends x{constructor(tt){super(tt,"MissingPDFException")}},e.UnexpectedResponseException=class J extends x{constructor(tt,Z){super(tt,"UnexpectedResponseException"),this.status=Z}},e.FormatError=class st extends x{constructor(tt){super(tt,"FormatError")}},e.AbortException=class nt extends x{constructor(tt){super(tt,"AbortException")}},e.FeatureTest=class j{static get isLittleEndian(){return f(this,"isLittleEndian",function I(){const et=new Uint8Array(4);return et[0]=1,1===new Uint32Array(et.buffer,0,1)[0]}())}static get isEvalSupported(){return f(this,"isEvalSupported",function W(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return f(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?f(this,"platform",{isWin:!1,isMac:!1}):f(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}};const pt=[...Array(256).keys()].map(et=>et.toString(16).padStart(2,"0"));class it{static makeHexColor(tt,Z,Et){return`#${pt[tt]}${pt[Z]}${pt[Et]}`}static scaleMinMax(tt,Z){let Et;tt[0]?(tt[0]<0&&(Et=Z[0],Z[0]=Z[1],Z[1]=Et),Z[0]*=tt[0],Z[1]*=tt[0],tt[3]<0&&(Et=Z[2],Z[2]=Z[3],Z[3]=Et),Z[2]*=tt[3],Z[3]*=tt[3]):(Et=Z[0],Z[0]=Z[2],Z[2]=Et,Et=Z[1],Z[1]=Z[3],Z[3]=Et,tt[1]<0&&(Et=Z[2],Z[2]=Z[3],Z[3]=Et),Z[2]*=tt[1],Z[3]*=tt[1],tt[2]<0&&(Et=Z[0],Z[0]=Z[1],Z[1]=Et),Z[0]*=tt[2],Z[1]*=tt[2]),Z[0]+=tt[4],Z[1]+=tt[4],Z[2]+=tt[5],Z[3]+=tt[5]}static transform(tt,Z){return[tt[0]*Z[0]+tt[2]*Z[1],tt[1]*Z[0]+tt[3]*Z[1],tt[0]*Z[2]+tt[2]*Z[3],tt[1]*Z[2]+tt[3]*Z[3],tt[0]*Z[4]+tt[2]*Z[5]+tt[4],tt[1]*Z[4]+tt[3]*Z[5]+tt[5]]}static applyTransform(tt,Z){return[tt[0]*Z[0]+tt[1]*Z[2]+Z[4],tt[0]*Z[1]+tt[1]*Z[3]+Z[5]]}static applyInverseTransform(tt,Z){const Et=Z[0]*Z[3]-Z[1]*Z[2];return[(tt[0]*Z[3]-tt[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/Et,(-tt[0]*Z[1]+tt[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/Et]}static getAxialAlignedBoundingBox(tt,Z){const Et=it.applyTransform(tt,Z),Mt=it.applyTransform(tt.slice(2,4),Z),dt=it.applyTransform([tt[0],tt[3]],Z),ht=it.applyTransform([tt[2],tt[1]],Z);return[Math.min(Et[0],Mt[0],dt[0],ht[0]),Math.min(Et[1],Mt[1],dt[1],ht[1]),Math.max(Et[0],Mt[0],dt[0],ht[0]),Math.max(Et[1],Mt[1],dt[1],ht[1])]}static inverseTransform(tt){const Z=tt[0]*tt[3]-tt[1]*tt[2];return[tt[3]/Z,-tt[1]/Z,-tt[2]/Z,tt[0]/Z,(tt[2]*tt[5]-tt[4]*tt[3])/Z,(tt[4]*tt[1]-tt[5]*tt[0])/Z]}static singularValueDecompose2dScale(tt){const Z=[tt[0],tt[2],tt[1],tt[3]],Et=tt[0]*Z[0]+tt[1]*Z[2],ht=tt[2]*Z[1]+tt[3]*Z[3],V=(Et+ht)/2,gt=Math.sqrt((Et+ht)**2-4*(Et*ht-(tt[2]*Z[0]+tt[3]*Z[2])*(tt[0]*Z[1]+tt[1]*Z[3])))/2,_t=V-gt||1;return[Math.sqrt(V+gt||1),Math.sqrt(_t)]}static normalizeRect(tt){const Z=tt.slice(0);return tt[0]>tt[2]&&(Z[0]=tt[2],Z[2]=tt[0]),tt[1]>tt[3]&&(Z[1]=tt[3],Z[3]=tt[1]),Z}static intersect(tt,Z){const Et=Math.max(Math.min(tt[0],tt[2]),Math.min(Z[0],Z[2])),Mt=Math.min(Math.max(tt[0],tt[2]),Math.max(Z[0],Z[2]));if(Et>Mt)return null;const dt=Math.max(Math.min(tt[1],tt[3]),Math.min(Z[1],Z[3])),ht=Math.min(Math.max(tt[1],tt[3]),Math.max(Z[1],Z[3]));return dt>ht?null:[Et,dt,Mt,ht]}static bezierBoundingBox(tt,Z,Et,Mt,dt,ht,V,gt){const Tt=[],_t=[[],[]];let Pt,Nt,ct,Y,mt,kt,xt,Lt;for(let Ut=0;Ut<2;++Ut)if(0===Ut?(Nt=6*tt-12*Et+6*dt,Pt=-3*tt+9*Et-9*dt+3*V,ct=3*Et-3*tt):(Nt=6*Z-12*Mt+6*ht,Pt=-3*Z+9*Mt-9*ht+3*gt,ct=3*Mt-3*Z),Math.abs(Pt)<1e-12){if(Math.abs(Nt)<1e-12)continue;Y=-ct/Nt,0<Y&&Y<1&&Tt.push(Y)}else xt=Nt*Nt-4*ct*Pt,Lt=Math.sqrt(xt),!(xt<0)&&(mt=(-Nt+Lt)/(2*Pt),0<mt&&mt<1&&Tt.push(mt),kt=(-Nt-Lt)/(2*Pt),0<kt&&kt<1&&Tt.push(kt));let It,Ot=Tt.length;const Dt=Ot;for(;Ot--;)Y=Tt[Ot],It=1-Y,_t[0][Ot]=It*It*It*tt+3*It*It*Y*Et+3*It*Y*Y*dt+Y*Y*Y*V,_t[1][Ot]=It*It*It*Z+3*It*It*Y*Mt+3*It*Y*Y*ht+Y*Y*Y*gt;return _t[0][Dt]=tt,_t[1][Dt]=Z,_t[0][Dt+1]=V,_t[1][Dt+1]=gt,_t[0].length=_t[1].length=Dt+2,[Math.min(..._t[0]),Math.min(..._t[1]),Math.max(..._t[0]),Math.max(..._t[1])]}}e.Util=it;const At=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(et){return decodeURIComponent(escape(et))}},(b,e,t)=>{"use strict";var n=t(3);globalThis.btoa||!n.isNodeJS||(globalThis.btoa=function(o){return Buffer.from(o,"binary").toString("base64")}),globalThis.atob||!n.isNodeJS||(globalThis.atob=function(o){return Buffer.from(o,"base64").toString("binary")}),globalThis.DOMMatrix||!n.isNodeJS||(globalThis.DOMMatrix=require("canvas").DOMMatrix),function(){if(globalThis.Path2D||!n.isNodeJS)return;const{CanvasRenderingContext2D:o}=require("canvas"),{polyfillPath2D:g}=require("path2d-polyfill");globalThis.CanvasRenderingContext2D=o,g(globalThis)}(),globalThis.ReadableStream||!n.isNodeJS||(globalThis.ReadableStream=require("web-streams-polyfill/dist/ponyfill.js").ReadableStream),Array.prototype.at||t(4),Uint8Array.prototype.at||t(78),globalThis.structuredClone||t(88)},(b,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const t=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=t},(b,e,t)=>{t(5);var n=t(77);b.exports=n("Array","at")},(b,e,t)=>{"use strict";var n=t(6),r=t(43),o=t(67),g=t(65),A=t(72);n({target:"Array",proto:!0},{at:function(u){var y=r(this),w=o(y),h=g(u),C=h>=0?h:w+h;return C<0||C>=w?void 0:y[C]}}),A("at")},(b,e,t)=>{var n=t(7),r=t(8).f,o=t(47),g=t(51),A=t(41),T=t(59),u=t(71);b.exports=function(y,w){var v,m,_,D,P,h=y.target,C=y.global,l=y.stat;if(v=C?n:l?n[h]||A(h,{}):(n[h]||{}).prototype)for(m in w){if(D=w[m],_=y.dontCallGetSet?(P=r(v,m))&&P.value:v[m],!u(C?m:h+(l?".":"#")+m,y.forced)&&void 0!==_){if(typeof D==typeof _)continue;T(D,_)}(y.sham||_&&_.sham)&&o(D,"sham",!0),g(v,m,D,y)}}},b=>{var e=function(t){return t&&t.Math==Math&&t};b.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(b,e,t)=>{var n=t(9),r=t(11),o=t(13),g=t(14),A=t(15),T=t(21),u=t(42),y=t(45),w=Object.getOwnPropertyDescriptor;e.f=n?w:function(C,l){if(C=A(C),l=T(l),y)try{return w(C,l)}catch{}if(u(C,l))return g(!r(o.f,C,l),C[l])}},(b,e,t)=>{var n=t(10);b.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},b=>{b.exports=function(e){try{return!!e()}catch{return!0}}},(b,e,t)=>{var n=t(12),r=Function.prototype.call;b.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},(b,e,t)=>{var n=t(10);b.exports=!n(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")})},(b,e)=>{"use strict";var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!t.call({1:2},1);e.f=r?function(g){var A=n(this,g);return!!A&&A.enumerable}:t},b=>{b.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(b,e,t)=>{var n=t(16),r=t(19);b.exports=function(o){return n(r(o))}},(b,e,t)=>{var n=t(17),r=t(10),o=t(18),g=Object,A=n("".split);b.exports=r(function(){return!g("z").propertyIsEnumerable(0)})?function(T){return"String"==o(T)?A(T,""):g(T)}:g},(b,e,t)=>{var n=t(12),r=Function.prototype,o=r.call,g=n&&r.bind.bind(o,o);b.exports=n?g:function(A){return function(){return o.apply(A,arguments)}}},(b,e,t)=>{var n=t(17),r=n({}.toString),o=n("".slice);b.exports=function(g){return o(r(g),8,-1)}},(b,e,t)=>{var n=t(20),r=TypeError;b.exports=function(o){if(n(o))throw r("Can't call method on "+o);return o}},b=>{b.exports=function(e){return null==e}},(b,e,t)=>{var n=t(22),r=t(26);b.exports=function(o){var g=n(o,"string");return r(g)?g:g+""}},(b,e,t)=>{var n=t(11),r=t(23),o=t(26),g=t(33),A=t(36),T=t(37),u=TypeError,y=T("toPrimitive");b.exports=function(w,h){if(!r(w)||o(w))return w;var l,C=g(w,y);if(C){if(void 0===h&&(h="default"),l=n(C,w,h),!r(l)||o(l))return l;throw u("Can't convert object to primitive value")}return void 0===h&&(h="number"),A(w,h)}},(b,e,t)=>{var n=t(24),r=t(25),o=r.all;b.exports=r.IS_HTMLDDA?function(g){return"object"==typeof g?null!==g:n(g)||g===o}:function(g){return"object"==typeof g?null!==g:n(g)}},(b,e,t)=>{var n=t(25),r=n.all;b.exports=n.IS_HTMLDDA?function(o){return"function"==typeof o||o===r}:function(o){return"function"==typeof o}},b=>{var e="object"==typeof document&&document.all;b.exports={all:e,IS_HTMLDDA:void 0===e&&void 0!==e}},(b,e,t)=>{var n=t(27),r=t(24),o=t(28),g=t(29),A=Object;b.exports=g?function(T){return"symbol"==typeof T}:function(T){var u=n("Symbol");return r(u)&&o(u.prototype,A(T))}},(b,e,t)=>{var n=t(7),r=t(24),o=function(g){return r(g)?g:void 0};b.exports=function(g,A){return arguments.length<2?o(n[g]):n[g]&&n[g][A]}},(b,e,t)=>{var n=t(17);b.exports=n({}.isPrototypeOf)},(b,e,t)=>{var n=t(30);b.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(b,e,t)=>{var n=t(31),r=t(10);b.exports=!!Object.getOwnPropertySymbols&&!r(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&n&&n<41})},(b,e,t)=>{var u,y,n=t(7),r=t(32),o=n.process,g=n.Deno,A=o&&o.versions||g&&g.version,T=A&&A.v8;T&&(y=(u=T.split("."))[0]>0&&u[0]<4?1:+(u[0]+u[1])),!y&&r&&(!(u=r.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=r.match(/Chrome\/(\d+)/))&&(y=+u[1]),b.exports=y},b=>{b.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},(b,e,t)=>{var n=t(34),r=t(20);b.exports=function(o,g){var A=o[g];return r(A)?void 0:n(A)}},(b,e,t)=>{var n=t(24),r=t(35),o=TypeError;b.exports=function(g){if(n(g))return g;throw o(r(g)+" is not a function")}},b=>{var e=String;b.exports=function(t){try{return e(t)}catch{return"Object"}}},(b,e,t)=>{var n=t(11),r=t(24),o=t(23),g=TypeError;b.exports=function(A,T){var u,y;if("string"===T&&r(u=A.toString)&&!o(y=n(u,A))||r(u=A.valueOf)&&!o(y=n(u,A))||"string"!==T&&r(u=A.toString)&&!o(y=n(u,A)))return y;throw g("Can't convert object to primitive value")}},(b,e,t)=>{var n=t(7),r=t(38),o=t(42),g=t(44),A=t(30),T=t(29),u=n.Symbol,y=r("wks"),w=T?u.for||u:u&&u.withoutSetter||g;b.exports=function(h){return o(y,h)||(y[h]=A&&o(u,h)?u[h]:w("Symbol."+h)),y[h]}},(b,e,t)=>{var n=t(39),r=t(40);(b.exports=function(o,g){return r[o]||(r[o]=void 0!==g?g:{})})("versions",[]).push({version:"3.27.2",mode:n?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"})},b=>{b.exports=!1},(b,e,t)=>{var n=t(7),r=t(41),o="__core-js_shared__",g=n[o]||r(o,{});b.exports=g},(b,e,t)=>{var n=t(7),r=Object.defineProperty;b.exports=function(o,g){try{r(n,o,{value:g,configurable:!0,writable:!0})}catch{n[o]=g}return g}},(b,e,t)=>{var n=t(17),r=t(43),o=n({}.hasOwnProperty);b.exports=Object.hasOwn||function(A,T){return o(r(A),T)}},(b,e,t)=>{var n=t(19),r=Object;b.exports=function(o){return r(n(o))}},(b,e,t)=>{var n=t(17),r=0,o=Math.random(),g=n(1..toString);b.exports=function(A){return"Symbol("+(void 0===A?"":A)+")_"+g(++r+o,36)}},(b,e,t)=>{var n=t(9),r=t(10),o=t(46);b.exports=!n&&!r(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},(b,e,t)=>{var n=t(7),r=t(23),o=n.document,g=r(o)&&r(o.createElement);b.exports=function(A){return g?o.createElement(A):{}}},(b,e,t)=>{var n=t(9),r=t(48),o=t(14);b.exports=n?function(g,A,T){return r.f(g,A,o(1,T))}:function(g,A,T){return g[A]=T,g}},(b,e,t)=>{var n=t(9),r=t(45),o=t(49),g=t(50),A=t(21),T=TypeError,u=Object.defineProperty,y=Object.getOwnPropertyDescriptor,w="enumerable",h="configurable",C="writable";e.f=n?o?function(c,v,m){if(g(c),v=A(v),g(m),"function"==typeof c&&"prototype"===v&&"value"in m&&C in m&&!m[C]){var _=y(c,v);_&&_[C]&&(c[v]=m.value,m={configurable:h in m?m[h]:_[h],enumerable:w in m?m[w]:_[w],writable:!1})}return u(c,v,m)}:u:function(c,v,m){if(g(c),v=A(v),g(m),r)try{return u(c,v,m)}catch{}if("get"in m||"set"in m)throw T("Accessors not supported");return"value"in m&&(c[v]=m.value),c}},(b,e,t)=>{var n=t(9),r=t(10);b.exports=n&&r(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},(b,e,t)=>{var n=t(23),r=String,o=TypeError;b.exports=function(g){if(n(g))return g;throw o(r(g)+" is not an object")}},(b,e,t)=>{var n=t(24),r=t(48),o=t(52),g=t(41);b.exports=function(A,T,u,y){y||(y={});var w=y.enumerable,h=void 0!==y.name?y.name:T;if(n(u)&&o(u,h,y),y.global)w?A[T]=u:g(T,u);else{try{y.unsafe?A[T]&&(w=!0):delete A[T]}catch{}w?A[T]=u:r.f(A,T,{value:u,enumerable:!1,configurable:!y.nonConfigurable,writable:!y.nonWritable})}return A}},(b,e,t)=>{var n=t(17),r=t(10),o=t(24),g=t(42),A=t(9),T=t(53).CONFIGURABLE,u=t(54),y=t(55),w=y.enforce,h=y.get,C=String,l=Object.defineProperty,c=n("".slice),v=n("".replace),m=n([].join),_=A&&!r(function(){return 8!==l(function(){},"length",{value:8}).length}),D=String(String).split("String"),P=b.exports=function(i,s,a){"Symbol("===c(C(s),0,7)&&(s="["+v(C(s),/^Symbol\(([^)]*)\)/,"$1")+"]"),a&&a.getter&&(s="get "+s),a&&a.setter&&(s="set "+s),(!g(i,"name")||T&&i.name!==s)&&(A?l(i,"name",{value:s,configurable:!0}):i.name=s),_&&a&&g(a,"arity")&&i.length!==a.arity&&l(i,"length",{value:a.arity});try{a&&g(a,"constructor")&&a.constructor?A&&l(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch{}var S=w(i);return g(S,"source")||(S.source=m(D,"string"==typeof s?s:"")),i};Function.prototype.toString=P(function(){return o(this)&&h(this).source||u(this)},"toString")},(b,e,t)=>{var n=t(9),r=t(42),o=Function.prototype,g=n&&Object.getOwnPropertyDescriptor,A=r(o,"name"),T=A&&"something"===function(){}.name,u=A&&(!n||n&&g(o,"name").configurable);b.exports={EXISTS:A,PROPER:T,CONFIGURABLE:u}},(b,e,t)=>{var n=t(17),r=t(24),o=t(40),g=n(Function.toString);r(o.inspectSource)||(o.inspectSource=function(A){return g(A)}),b.exports=o.inspectSource},(b,e,t)=>{var l,c,v,n=t(56),r=t(7),o=t(23),g=t(47),A=t(42),T=t(40),u=t(57),y=t(58),w="Object already initialized",h=r.TypeError;if(n||T.state){var D=T.state||(T.state=new(0,r.WeakMap));D.get=D.get,D.has=D.has,D.set=D.set,l=function(i,s){if(D.has(i))throw h(w);return s.facade=i,D.set(i,s),s},c=function(i){return D.get(i)||{}},v=function(i){return D.has(i)}}else{var P=u("state");y[P]=!0,l=function(i,s){if(A(i,P))throw h(w);return s.facade=i,g(i,P,s),s},c=function(i){return A(i,P)?i[P]:{}},v=function(i){return A(i,P)}}b.exports={set:l,get:c,has:v,enforce:function(i){return v(i)?c(i):l(i,{})},getterFor:function(i){return function(s){var a;if(!o(s)||(a=c(s)).type!==i)throw h("Incompatible receiver, "+i+" required");return a}}}},(b,e,t)=>{var n=t(7),r=t(24),o=n.WeakMap;b.exports=r(o)&&/native code/.test(String(o))},(b,e,t)=>{var n=t(38),r=t(44),o=n("keys");b.exports=function(g){return o[g]||(o[g]=r(g))}},b=>{b.exports={}},(b,e,t)=>{var n=t(42),r=t(60),o=t(8),g=t(48);b.exports=function(A,T,u){for(var y=r(T),w=g.f,h=o.f,C=0;C<y.length;C++){var l=y[C];!n(A,l)&&(!u||!n(u,l))&&w(A,l,h(T,l))}}},(b,e,t)=>{var n=t(27),r=t(17),o=t(61),g=t(70),A=t(50),T=r([].concat);b.exports=n("Reflect","ownKeys")||function(y){var w=o.f(A(y)),h=g.f;return h?T(w,h(y)):w}},(b,e,t)=>{var n=t(62),o=t(69).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(A){return n(A,o)}},(b,e,t)=>{var n=t(17),r=t(42),o=t(15),g=t(63).indexOf,A=t(58),T=n([].push);b.exports=function(u,y){var l,w=o(u),h=0,C=[];for(l in w)!r(A,l)&&r(w,l)&&T(C,l);for(;y.length>h;)r(w,l=y[h++])&&(~g(C,l)||T(C,l));return C}},(b,e,t)=>{var n=t(15),r=t(64),o=t(67),g=function(A){return function(T,u,y){var l,w=n(T),h=o(w),C=r(y,h);if(A&&u!=u){for(;h>C;)if((l=w[C++])!=l)return!0}else for(;h>C;C++)if((A||C in w)&&w[C]===u)return A||C||0;return!A&&-1}};b.exports={includes:g(!0),indexOf:g(!1)}},(b,e,t)=>{var n=t(65),r=Math.max,o=Math.min;b.exports=function(g,A){var T=n(g);return T<0?r(T+A,0):o(T,A)}},(b,e,t)=>{var n=t(66);b.exports=function(r){var o=+r;return o!=o||0===o?0:n(o)}},b=>{var e=Math.ceil,t=Math.floor;b.exports=Math.trunc||function(r){var o=+r;return(o>0?t:e)(o)}},(b,e,t)=>{var n=t(68);b.exports=function(r){return n(r.length)}},(b,e,t)=>{var n=t(65),r=Math.min;b.exports=function(o){return o>0?r(n(o),9007199254740991):0}},b=>{b.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(b,e)=>{e.f=Object.getOwnPropertySymbols},(b,e,t)=>{var n=t(10),r=t(24),o=/#|\.prototype\./,g=function(w,h){var C=T[A(w)];return C==y||C!=u&&(r(h)?n(h):!!h)},A=g.normalize=function(w){return String(w).replace(o,".").toLowerCase()},T=g.data={},u=g.NATIVE="N",y=g.POLYFILL="P";b.exports=g},(b,e,t)=>{var n=t(37),r=t(73),o=t(48).f,g=n("unscopables"),A=Array.prototype;null==A[g]&&o(A,g,{configurable:!0,value:r(null)}),b.exports=function(T){A[g][T]=!0}},(b,e,t)=>{var D,n=t(50),r=t(74),o=t(69),g=t(58),A=t(76),T=t(46),u=t(57),h="prototype",C="script",l=u("IE_PROTO"),c=function(){},v=function(i){return"<"+C+">"+i+"</"+C+">"},m=function(i){i.write(v("")),i.close();var s=i.parentWindow.Object;return i=null,s},P=function(){try{D=new ActiveXObject("htmlfile")}catch{}P="undefined"!=typeof document?document.domain&&D?m(D):function(){var a,i=T("iframe");return i.style.display="none",A.appendChild(i),i.src=String("javascript:"),(a=i.contentWindow.document).open(),a.write(v("document.F=Object")),a.close(),a.F}():m(D);for(var i=o.length;i--;)delete P[h][o[i]];return P()};g[l]=!0,b.exports=Object.create||function(s,a){var S;return null!==s?(c[h]=n(s),S=new c,c[h]=null,S[l]=s):S=P(),void 0===a?S:r.f(S,a)}},(b,e,t)=>{var n=t(9),r=t(49),o=t(48),g=t(50),A=t(15),T=t(75);e.f=n&&!r?Object.defineProperties:function(y,w){g(y);for(var v,h=A(w),C=T(w),l=C.length,c=0;l>c;)o.f(y,v=C[c++],h[v]);return y}},(b,e,t)=>{var n=t(62),r=t(69);b.exports=Object.keys||function(g){return n(g,r)}},(b,e,t)=>{var n=t(27);b.exports=n("document","documentElement")},(b,e,t)=>{var n=t(7),r=t(17);b.exports=function(o,g){return r(n[o].prototype[g])}},(b,e,t)=>{t(79)},(b,e,t)=>{"use strict";var n=t(80),r=t(67),o=t(65),g=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",function(u){var y=g(this),w=r(y),h=o(u),C=h>=0?h:w+h;return C<0||C>=w?void 0:y[C]})},(b,e,t)=>{"use strict";var $,G,L,n=t(81),r=t(9),o=t(7),g=t(24),A=t(23),T=t(42),u=t(82),y=t(35),w=t(47),h=t(51),C=t(48).f,l=t(28),c=t(84),v=t(86),m=t(37),_=t(44),D=t(55),P=D.enforce,i=D.get,s=o.Int8Array,a=s&&s.prototype,S=o.Uint8ClampedArray,E=S&&S.prototype,O=s&&c(s),N=a&&c(a),K=Object.prototype,lt=o.TypeError,Q=m("toStringTag"),q=_("TYPED_ARRAY_TAG"),ut="TypedArrayConstructor",ft=n&&!!v&&"Opera"!==u(o.opera),z=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},f=function(J){var st=c(J);if(A(st)){var nt=i(st);return nt&&T(nt,ut)?nt[ut]:f(st)}},x=function(J){if(!A(J))return!1;var st=u(J);return T(R,st)||T(F,st)};for($ in R)(L=(G=o[$])&&G.prototype)?P(L)[ut]=G:ft=!1;for($ in F)(L=(G=o[$])&&G.prototype)&&(P(L)[ut]=G);if((!ft||!g(O)||O===Function.prototype)&&(O=function(){throw lt("Incorrect invocation")},ft))for($ in R)o[$]&&v(o[$],O);if((!ft||!N||N===K)&&(N=O.prototype,ft))for($ in R)o[$]&&v(o[$].prototype,N);if(ft&&c(E)!==N&&v(E,N),r&&!T(N,Q))for($ in z=!0,C(N,Q,{get:function(){return A(this)?this[q]:void 0}}),R)o[$]&&w(o[$],q,$);b.exports={NATIVE_ARRAY_BUFFER_VIEWS:ft,TYPED_ARRAY_TAG:z&&q,aTypedArray:function(J){if(x(J))return J;throw lt("Target is not a typed array")},aTypedArrayConstructor:function(J){if(g(J)&&(!v||l(O,J)))return J;throw lt(y(J)+" is not a typed array constructor")},exportTypedArrayMethod:function(J,st,nt,at){if(r){if(nt)for(var ot in R){var yt=o[ot];if(yt&&T(yt.prototype,J))try{delete yt.prototype[J]}catch{try{yt.prototype[J]=st}catch{}}}(!N[J]||nt)&&h(N,J,nt?st:ft&&a[J]||st,at)}},exportTypedArrayStaticMethod:function(J,st,nt){var at,ot;if(r){if(v){if(nt)for(at in R)if((ot=o[at])&&T(ot,J))try{delete ot[J]}catch{}if(O[J]&&!nt)return;try{return h(O,J,nt?st:ft&&O[J]||st)}catch{}}for(at in R)(ot=o[at])&&(!ot[J]||nt)&&h(ot,J,st)}},getTypedArrayConstructor:f,isView:function(st){if(!A(st))return!1;var nt=u(st);return"DataView"===nt||T(R,nt)||T(F,nt)},isTypedArray:x,TypedArray:O,TypedArrayPrototype:N}},b=>{b.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(b,e,t)=>{var n=t(83),r=t(24),o=t(18),A=t(37)("toStringTag"),T=Object,u="Arguments"==o(function(){return arguments}());b.exports=n?o:function(w){var h,C,l;return void 0===w?"Undefined":null===w?"Null":"string"==typeof(C=function(w,h){try{return w[h]}catch{}}(h=T(w),A))?C:u?o(h):"Object"==(l=o(h))&&r(h.callee)?"Arguments":l}},(b,e,t)=>{var o={};o[t(37)("toStringTag")]="z",b.exports="[object z]"===String(o)},(b,e,t)=>{var n=t(42),r=t(24),o=t(43),g=t(57),A=t(85),T=g("IE_PROTO"),u=Object,y=u.prototype;b.exports=A?u.getPrototypeOf:function(w){var h=o(w);if(n(h,T))return h[T];var C=h.constructor;return r(C)&&h instanceof C?C.prototype:h instanceof u?y:null}},(b,e,t)=>{var n=t(10);b.exports=!n(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},(b,e,t)=>{var n=t(17),r=t(50),o=t(87);b.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var T,g=!1,A={};try{(T=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(A,[]),g=A instanceof Array}catch{}return function(y,w){return r(y),o(w),g?T(y,w):y.__proto__=w,y}}():void 0)},(b,e,t)=>{var n=t(24),r=String,o=TypeError;b.exports=function(g){if("object"==typeof g||n(g))return g;throw o("Can't set "+r(g)+" as a prototype")}},(b,e,t)=>{t(89),t(96),t(98),t(121),t(123);var n=t(134);b.exports=n.structuredClone},(b,e,t)=>{"use strict";var n=t(15),r=t(72),o=t(90),g=t(55),A=t(48).f,T=t(91),u=t(95),y=t(39),w=t(9),h="Array Iterator",C=g.set,l=g.getterFor(h);b.exports=T(Array,"Array",function(v,m){C(this,{type:h,target:n(v),index:0,kind:m})},function(){var v=l(this),m=v.target,_=v.kind,D=v.index++;return!m||D>=m.length?(v.target=void 0,u(void 0,!0)):u("keys"==_?D:"values"==_?m[D]:[D,m[D]],!1)},"values");var c=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!y&&w&&"values"!==c.name)try{A(c,"name",{value:"values"})}catch{}},b=>{b.exports={}},(b,e,t)=>{"use strict";var n=t(6),r=t(11),o=t(39),g=t(53),A=t(24),T=t(92),u=t(84),y=t(86),w=t(94),h=t(47),C=t(51),l=t(37),c=t(90),v=t(93),m=g.PROPER,_=g.CONFIGURABLE,D=v.IteratorPrototype,P=v.BUGGY_SAFARI_ITERATORS,i=l("iterator"),s="keys",a="values",S="entries",E=function(){return this};b.exports=function(O,N,K,lt,Q,q,ut){T(K,N,lt);var p,f,x,ft=function(U){if(U===Q&&R)return R;if(!P&&U in G)return G[U];switch(U){case s:case a:case S:return function(){return new K(this,U)}}return function(){return new K(this)}},z=N+" Iterator",$=!1,G=O.prototype,L=G[i]||G["@@iterator"]||Q&&G[Q],R=!P&&L||ft(Q),F="Array"==N&&G.entries||L;if(F&&(p=u(F.call(new O)))!==Object.prototype&&p.next&&(!o&&u(p)!==D&&(y?y(p,D):A(p[i])||C(p,i,E)),w(p,z,!0,!0),o&&(c[z]=E)),m&&Q==a&&L&&L.name!==a&&(!o&&_?h(G,"name",a):($=!0,R=function(){return r(L,this)})),Q)if(f={values:ft(a),keys:q?R:ft(s),entries:ft(S)},ut)for(x in f)(P||$||!(x in G))&&C(G,x,f[x]);else n({target:N,proto:!0,forced:P||$},f);return(!o||ut)&&G[i]!==R&&C(G,i,R,{name:Q}),c[N]=R,f}},(b,e,t)=>{"use strict";var n=t(93).IteratorPrototype,r=t(73),o=t(14),g=t(94),A=t(90),T=function(){return this};b.exports=function(u,y,w,h){var C=y+" Iterator";return u.prototype=r(n,{next:o(+!h,w)}),g(u,C,!1,!0),A[C]=T,u}},(b,e,t)=>{"use strict";var C,l,c,n=t(10),r=t(24),o=t(23),g=t(73),A=t(84),T=t(51),u=t(37),y=t(39),w=u("iterator"),h=!1;[].keys&&("next"in(c=[].keys())?(l=A(A(c)))!==Object.prototype&&(C=l):h=!0),!o(C)||n(function(){var m={};return C[w].call(m)!==m})?C={}:y&&(C=g(C)),r(C[w])||T(C,w,function(){return this}),b.exports={IteratorPrototype:C,BUGGY_SAFARI_ITERATORS:h}},(b,e,t)=>{var n=t(48).f,r=t(42),g=t(37)("toStringTag");b.exports=function(A,T,u){A&&!u&&(A=A.prototype),A&&!r(A,g)&&n(A,g,{configurable:!0,value:T})}},b=>{b.exports=function(e,t){return{value:e,done:t}}},(b,e,t)=>{var n=t(83),r=t(51),o=t(97);n||r(Object.prototype,"toString",o,{unsafe:!0})},(b,e,t)=>{"use strict";var n=t(83),r=t(82);b.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},(b,e,t)=>{t(99)},(b,e,t)=>{"use strict";t(100)("Map",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},t(118))},(b,e,t)=>{"use strict";var n=t(6),r=t(7),o=t(17),g=t(71),A=t(51),T=t(101),u=t(108),y=t(115),w=t(24),h=t(20),C=t(23),l=t(10),c=t(116),v=t(94),m=t(117);b.exports=function(_,D,P){var i=-1!==_.indexOf("Map"),s=-1!==_.indexOf("Weak"),a=i?"set":"add",S=r[_],E=S&&S.prototype,O=S,N={},K=function($){var G=o(E[$]);A(E,$,"add"==$?function(R){return G(this,0===R?0:R),this}:"delete"==$?function(L){return!(s&&!C(L))&&G(this,0===L?0:L)}:"get"==$?function(R){return s&&!C(R)?void 0:G(this,0===R?0:R)}:"has"==$?function(R){return!(s&&!C(R))&&G(this,0===R?0:R)}:function(R,F){return G(this,0===R?0:R,F),this})};if(g(_,!w(S)||!(s||E.forEach&&!l(function(){(new S).entries().next()}))))O=P.getConstructor(D,_,i,a),T.enable();else if(g(_,!0)){var Q=new O,q=Q[a](s?{}:-0,1)!=Q,ut=l(function(){Q.has(1)}),ft=c(function($){new S($)}),z=!s&&l(function(){for(var $=new S,G=5;G--;)$[a](G,G);return!$.has(-0)});ft||((O=D(function($,G){y($,E);var L=m(new S,$,O);return h(G)||u(G,L[a],{that:L,AS_ENTRIES:i}),L})).prototype=E,E.constructor=O),(ut||z)&&(K("delete"),K("has"),i&&K("get")),(z||q)&&K(a),s&&E.clear&&delete E.clear}return N[_]=O,n({global:!0,constructor:!0,forced:O!=S},N),v(O,_),s||P.setStrong(O,_,i),O}},(b,e,t)=>{var n=t(6),r=t(17),o=t(58),g=t(23),A=t(42),T=t(48).f,u=t(61),y=t(102),w=t(105),h=t(44),C=t(107),l=!1,c=h("meta"),v=0,m=function(a){T(a,c,{value:{objectID:"O"+v++,weakData:{}}})},s=b.exports={enable:function(){s.enable=function(){},l=!0;var a=u.f,S=r([].splice),E={};E[c]=1,a(E).length&&(u.f=function(O){for(var N=a(O),K=0,lt=N.length;K<lt;K++)if(N[K]===c){S(N,K,1);break}return N},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:y.f}))},fastKey:function(a,S){if(!g(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!A(a,c)){if(!w(a))return"F";if(!S)return"E";m(a)}return a[c].objectID},getWeakData:function(a,S){if(!A(a,c)){if(!w(a))return!0;if(!S)return!1;m(a)}return a[c].weakData},onFreeze:function(a){return C&&l&&w(a)&&!A(a,c)&&m(a),a}};o[c]=!0},(b,e,t)=>{var n=t(18),r=t(15),o=t(61).f,g=t(103),A="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];b.exports.f=function(y){return A&&"Window"==n(y)?function(u){try{return o(u)}catch{return g(A)}}(y):o(r(y))}},(b,e,t)=>{var n=t(64),r=t(67),o=t(104),g=Array,A=Math.max;b.exports=function(T,u,y){for(var w=r(T),h=n(u,w),C=n(void 0===y?w:y,w),l=g(A(C-h,0)),c=0;h<C;h++,c++)o(l,c,T[h]);return l.length=c,l}},(b,e,t)=>{"use strict";var n=t(21),r=t(48),o=t(14);b.exports=function(g,A,T){var u=n(A);u in g?r.f(g,u,o(0,T)):g[u]=T}},(b,e,t)=>{var n=t(10),r=t(23),o=t(18),g=t(106),A=Object.isExtensible,T=n(function(){A(1)});b.exports=T||g?function(y){return!(!r(y)||g&&"ArrayBuffer"==o(y))&&(!A||A(y))}:A},(b,e,t)=>{var n=t(10);b.exports=n(function(){if("function"==typeof ArrayBuffer){var r=new ArrayBuffer(8);Object.isExtensible(r)&&Object.defineProperty(r,"a",{value:8})}})},(b,e,t)=>{var n=t(10);b.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(b,e,t)=>{var n=t(109),r=t(11),o=t(50),g=t(35),A=t(111),T=t(67),u=t(28),y=t(112),w=t(113),h=t(114),C=TypeError,l=function(v,m){this.stopped=v,this.result=m},c=l.prototype;b.exports=function(v,m,_){var E,O,N,K,lt,Q,q,P=!(!_||!_.AS_ENTRIES),i=!(!_||!_.IS_RECORD),s=!(!_||!_.IS_ITERATOR),a=!(!_||!_.INTERRUPTED),S=n(m,_&&_.that),ut=function(z){return E&&h(E,"normal",z),new l(!0,z)},ft=function(z){return P?(o(z),a?S(z[0],z[1],ut):S(z[0],z[1])):a?S(z,ut):S(z)};if(i)E=v.iterator;else if(s)E=v;else{if(!(O=w(v)))throw C(g(v)+" is not iterable");if(A(O)){for(N=0,K=T(v);K>N;N++)if((lt=ft(v[N]))&&u(c,lt))return lt;return new l(!1)}E=y(v,O)}for(Q=i?v.next:E.next;!(q=r(Q,E)).done;){try{lt=ft(q.value)}catch(z){h(E,"throw",z)}if("object"==typeof lt&&lt&&u(c,lt))return lt}return new l(!1)}},(b,e,t)=>{var n=t(110),r=t(34),o=t(12),g=n(n.bind);b.exports=function(A,T){return r(A),void 0===T?A:o?g(A,T):function(){return A.apply(T,arguments)}}},(b,e,t)=>{var n=t(18),r=t(17);b.exports=function(o){if("Function"===n(o))return r(o)}},(b,e,t)=>{var n=t(37),r=t(90),o=n("iterator"),g=Array.prototype;b.exports=function(A){return void 0!==A&&(r.Array===A||g[o]===A)}},(b,e,t)=>{var n=t(11),r=t(34),o=t(50),g=t(35),A=t(113),T=TypeError;b.exports=function(u,y){var w=arguments.length<2?A(u):y;if(r(w))return o(n(w,u));throw T(g(u)+" is not iterable")}},(b,e,t)=>{var n=t(82),r=t(33),o=t(20),g=t(90),T=t(37)("iterator");b.exports=function(u){if(!o(u))return r(u,T)||r(u,"@@iterator")||g[n(u)]}},(b,e,t)=>{var n=t(11),r=t(50),o=t(33);b.exports=function(g,A,T){var u,y;r(g);try{if(!(u=o(g,"return"))){if("throw"===A)throw T;return T}u=n(u,g)}catch(w){y=!0,u=w}if("throw"===A)throw T;if(y)throw u;return r(u),T}},(b,e,t)=>{var n=t(28),r=TypeError;b.exports=function(o,g){if(n(g,o))return o;throw r("Incorrect invocation")}},(b,e,t)=>{var r=t(37)("iterator"),o=!1;try{var g=0,A={next:function(){return{done:!!g++}},return:function(){o=!0}};A[r]=function(){return this},Array.from(A,function(){throw 2})}catch{}b.exports=function(T,u){if(!u&&!o)return!1;var y=!1;try{var w={};w[r]=function(){return{next:function(){return{done:y=!0}}}},T(w)}catch{}return y}},(b,e,t)=>{var n=t(24),r=t(23),o=t(86);b.exports=function(g,A,T){var u,y;return o&&n(u=A.constructor)&&u!==T&&r(y=u.prototype)&&y!==T.prototype&&o(g,y),g}},(b,e,t)=>{"use strict";var n=t(48).f,r=t(73),o=t(119),g=t(109),A=t(115),T=t(20),u=t(108),y=t(91),w=t(95),h=t(120),C=t(9),l=t(101).fastKey,c=t(55),v=c.set,m=c.getterFor;b.exports={getConstructor:function(_,D,P,i){var s=_(function(N,K){A(N,a),v(N,{type:D,index:r(null),first:void 0,last:void 0,size:0}),C||(N.size=0),T(K)||u(K,N[i],{that:N,AS_ENTRIES:P})}),a=s.prototype,S=m(D),E=function(N,K,lt){var ut,ft,Q=S(N),q=O(N,K);return q?q.value=lt:(Q.last=q={index:ft=l(K,!0),key:K,value:lt,previous:ut=Q.last,next:void 0,removed:!1},Q.first||(Q.first=q),ut&&(ut.next=q),C?Q.size++:N.size++,"F"!==ft&&(Q.index[ft]=q)),N},O=function(N,K){var q,lt=S(N),Q=l(K);if("F"!==Q)return lt.index[Q];for(q=lt.first;q;q=q.next)if(q.key==K)return q};return o(a,{clear:function(){for(var lt=S(this),Q=lt.index,q=lt.first;q;)q.removed=!0,q.previous&&(q.previous=q.previous.next=void 0),delete Q[q.index],q=q.next;lt.first=lt.last=void 0,C?lt.size=0:this.size=0},delete:function(N){var K=this,lt=S(K),Q=O(K,N);if(Q){var q=Q.next,ut=Q.previous;delete lt.index[Q.index],Q.removed=!0,ut&&(ut.next=q),q&&(q.previous=ut),lt.first==Q&&(lt.first=q),lt.last==Q&&(lt.last=ut),C?lt.size--:K.size--}return!!Q},forEach:function(K){for(var q,lt=S(this),Q=g(K,arguments.length>1?arguments[1]:void 0);q=q?q.next:lt.first;)for(Q(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(K){return!!O(this,K)}}),o(a,P?{get:function(K){var lt=O(this,K);return lt&&lt.value},set:function(K,lt){return E(this,0===K?0:K,lt)}}:{add:function(K){return E(this,K=0===K?0:K,K)}}),C&&n(a,"size",{get:function(){return S(this).size}}),s},setStrong:function(_,D,P){var i=D+" Iterator",s=m(D),a=m(i);y(_,D,function(S,E){v(this,{type:i,target:S,state:s(S),kind:E,last:void 0})},function(){for(var S=a(this),E=S.kind,O=S.last;O&&O.removed;)O=O.previous;return S.target&&(S.last=O=O?O.next:S.state.first)?w("keys"==E?O.key:"values"==E?O.value:[O.key,O.value],!1):(S.target=void 0,w(void 0,!0))},P?"entries":"values",!P,!0),h(D)}}},(b,e,t)=>{var n=t(51);b.exports=function(r,o,g){for(var A in o)n(r,A,o[A],g);return r}},(b,e,t)=>{"use strict";var n=t(27),r=t(48),o=t(37),g=t(9),A=o("species");b.exports=function(T){var u=n(T);g&&u&&!u[A]&&(0,r.f)(u,A,{configurable:!0,get:function(){return this}})}},(b,e,t)=>{t(122)},(b,e,t)=>{"use strict";t(100)("Set",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},t(118))},(b,e,t)=>{var dt,n=t(39),r=t(6),o=t(7),g=t(27),A=t(17),T=t(10),u=t(44),y=t(24),w=t(124),h=t(20),C=t(23),l=t(26),c=t(108),v=t(50),m=t(82),_=t(42),D=t(104),P=t(47),i=t(67),s=t(125),a=t(126),S=t(128),E=t(129),O=t(130),N=t(31),K=t(131),lt=t(132),Q=t(133),q=o.Object,ut=o.Array,ft=o.Date,z=o.Error,$=o.EvalError,G=o.RangeError,L=o.ReferenceError,R=o.SyntaxError,F=o.TypeError,p=o.URIError,f=o.PerformanceMark,x=o.WebAssembly,U=x&&x.CompileError||z,B=x&&x.LinkError||z,H=x&&x.RuntimeError||z,X=g("DOMException"),J=S.Map,st=S.has,nt=S.get,at=S.set,ot=E.Set,yt=E.add,rt=g("Object","keys"),d=A([].push),k=A((!0).valueOf),M=A(1..valueOf),I=A("".valueOf),W=A(ft.prototype.getTime),j=u("structuredClone"),pt="DataCloneError",it="Transferring",At=function(dt){return!T(function(){var ht=new o.Set([7]),V=dt(ht),gt=dt(q(7));return V==ht||!V.has(7)||"object"!=typeof gt||7!=gt})&&dt},St=function(dt,ht){return!T(function(){var V=new ht,gt=dt({a:V,b:V});return!(gt&&gt.a===gt.b&&gt.a instanceof ht&&gt.a.stack===V.stack)})},bt=o.structuredClone,wt=n||!St(bt,z)||!St(bt,X)||(dt=bt,!!T(function(){var ht=dt(new o.AggregateError([1],j,{cause:3}));return"AggregateError"!=ht.name||1!=ht.errors[0]||ht.message!=j||3!=ht.cause})),Ct=!bt&&At(function(dt){return new f(j,{detail:dt}).detail}),Rt=At(bt)||Ct,Ft=function(dt){throw new X("Uncloneable type: "+dt,pt)},et=function(dt,ht){throw new X((ht||"Cloning")+" of "+dt+" cannot be properly polyfilled in this engine",pt)},Z=function(dt,ht){if(l(dt)&&Ft("Symbol"),!C(dt))return dt;if(ht){if(st(ht,dt))return nt(ht,dt)}else ht=new J;var Tt,_t,Pt,Nt,ct,Y,mt,kt,xt,Lt,V=m(dt),gt=!1;switch(V){case"Array":Pt=ut(i(dt)),gt=!0;break;case"Object":Pt={},gt=!0;break;case"Map":Pt=new J,gt=!0;break;case"Set":Pt=new ot,gt=!0;break;case"RegExp":Pt=new RegExp(dt.source,a(dt));break;case"Error":switch(_t=dt.name){case"AggregateError":Pt=g("AggregateError")([]);break;case"EvalError":Pt=$();break;case"RangeError":Pt=G();break;case"ReferenceError":Pt=L();break;case"SyntaxError":Pt=R();break;case"TypeError":Pt=F();break;case"URIError":Pt=p();break;case"CompileError":Pt=U();break;case"LinkError":Pt=B();break;case"RuntimeError":Pt=H();break;default:Pt=z()}gt=!0;break;case"DOMException":Pt=new X(dt.message,dt.name),gt=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":C(Tt=o[V])||et(V),Pt=new Tt(Z(dt.buffer,ht),dt.byteOffset,"DataView"===V?dt.byteLength:dt.length);break;case"DOMQuad":try{Pt=new DOMQuad(Z(dt.p1,ht),Z(dt.p2,ht),Z(dt.p3,ht),Z(dt.p4,ht))}catch{Rt?Pt=Rt(dt):et(V)}break;case"FileList":if(Nt=function(){var dt;try{dt=new o.DataTransfer}catch{try{dt=new o.ClipboardEvent("").clipboardData}catch{}}return dt&&dt.items&&dt.files?dt:null}(),Nt){for(ct=0,Y=i(dt);ct<Y;ct++)Nt.items.add(Z(dt[ct],ht));Pt=Nt.files}else Rt?Pt=Rt(dt):et(V);break;case"ImageData":try{Pt=new ImageData(Z(dt.data,ht),dt.width,dt.height,{colorSpace:dt.colorSpace})}catch{Rt?Pt=Rt(dt):et(V)}break;default:if(Rt)Pt=Rt(dt);else switch(V){case"BigInt":Pt=q(dt.valueOf());break;case"Boolean":Pt=q(k(dt));break;case"Number":Pt=q(M(dt));break;case"String":Pt=q(I(dt));break;case"Date":Pt=new ft(W(dt));break;case"ArrayBuffer":!(Tt=o.DataView)&&"function"!=typeof dt.slice&&et(V);try{if("function"==typeof dt.slice)Pt=dt.slice(0);else for(Y=dt.byteLength,Pt=new ArrayBuffer(Y),xt=new Tt(dt),Lt=new Tt(Pt),ct=0;ct<Y;ct++)Lt.setUint8(ct,xt.getUint8(ct))}catch{throw new X("ArrayBuffer is detached",pt)}break;case"SharedArrayBuffer":Pt=dt;break;case"Blob":try{Pt=dt.slice(0,dt.size,dt.type)}catch{et(V)}break;case"DOMPoint":case"DOMPointReadOnly":Tt=o[V];try{Pt=Tt.fromPoint?Tt.fromPoint(dt):new Tt(dt.x,dt.y,dt.z,dt.w)}catch{et(V)}break;case"DOMRect":case"DOMRectReadOnly":Tt=o[V];try{Pt=Tt.fromRect?Tt.fromRect(dt):new Tt(dt.x,dt.y,dt.width,dt.height)}catch{et(V)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Tt=o[V];try{Pt=Tt.fromMatrix?Tt.fromMatrix(dt):new Tt(dt)}catch{et(V)}break;case"AudioData":case"VideoFrame":y(dt.clone)||et(V);try{Pt=dt.clone()}catch{Ft(V)}break;case"File":try{Pt=new File([dt],dt.name,dt)}catch{et(V)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":et(V);default:Ft(V)}}if(at(ht,dt,Pt),gt)switch(V){case"Array":case"Object":for(mt=rt(dt),ct=0,Y=i(mt);ct<Y;ct++)D(Pt,kt=mt[ct],Z(dt[kt],ht));break;case"Map":dt.forEach(function(Ot,It){at(Pt,Z(It,ht),Z(Ot,ht))});break;case"Set":dt.forEach(function(Ot){yt(Pt,Z(Ot,ht))});break;case"Error":P(Pt,"message",Z(dt.message,ht)),_(dt,"cause")&&P(Pt,"cause",Z(dt.cause,ht)),"AggregateError"==_t&&(Pt.errors=Z(dt.errors,ht));case"DOMException":O&&P(Pt,"stack",Z(dt.stack,ht))}return Pt},Et=bt&&!T(function(){if(lt&&N>92||Q&&N>94||K&&N>97)return!1;var dt=new ArrayBuffer(8),ht=bt(dt,{transfer:[dt]});return 0!=dt.byteLength||8!=ht.byteLength}),Mt=function(dt,ht){if(!C(dt))throw F("Transfer option cannot be converted to a sequence");var V=[];c(dt,function(xt){d(V,v(xt))});var _t,Pt,Nt,ct,Y,mt,gt=0,Tt=i(V);if(Et)for(ct=bt(V,{transfer:V});gt<Tt;)at(ht,V[gt],ct[gt++]);else for(;gt<Tt;){if(_t=V[gt++],st(ht,_t))throw new X("Duplicate transferable",pt);switch(Pt=m(_t)){case"ImageBitmap":w(Nt=o.OffscreenCanvas)||et(Pt,it);try{(mt=new Nt(_t.width,_t.height)).getContext("bitmaprenderer").transferFromImageBitmap(_t),Y=mt.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!y(_t.clone)||!y(_t.close))&&et(Pt,it);try{Y=_t.clone(),_t.close()}catch{}break;case"ArrayBuffer":case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":et(Pt,it)}if(void 0===Y)throw new X("This object cannot be transferred: "+Pt,pt);at(ht,_t,Y)}};r({global:!0,enumerable:!0,sham:!Et,forced:wt},{structuredClone:function(ht){var Tt,V=s(arguments.length,1)>1&&!h(arguments[1])?v(arguments[1]):void 0,gt=V?V.transfer:void 0;return void 0!==gt&&(Tt=new J,Mt(gt,Tt)),Z(ht,Tt)}})},(b,e,t)=>{var n=t(17),r=t(10),o=t(24),g=t(82),A=t(27),T=t(54),u=function(){},y=[],w=A("Reflect","construct"),h=/^\s*(?:class|function)\b/,C=n(h.exec),l=!h.exec(u),c=function(_){if(!o(_))return!1;try{return w(u,y,_),!0}catch{return!1}},v=function(_){if(!o(_))return!1;switch(g(_)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!C(h,T(_))}catch{return!0}};v.sham=!0,b.exports=!w||r(function(){var m;return c(c.call)||!c(Object)||!c(function(){m=!0})||m})?v:c},b=>{var e=TypeError;b.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},(b,e,t)=>{var n=t(11),r=t(42),o=t(28),g=t(127),A=RegExp.prototype;b.exports=function(T){var u=T.flags;return void 0!==u||"flags"in A||r(T,"flags")||!o(A,T)?u:n(g,T)}},(b,e,t)=>{"use strict";var n=t(50);b.exports=function(){var r=n(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o}},(b,e,t)=>{var n=t(17),r=Map.prototype;b.exports={Map,set:n(r.set),get:n(r.get),has:n(r.has),remove:n(r.delete),proto:r}},(b,e,t)=>{var n=t(17),r=Set.prototype;b.exports={Set,add:n(r.add),has:n(r.has),remove:n(r.delete),proto:r,$has:r.has,$keys:r.keys}},(b,e,t)=>{var n=t(10),r=t(14);b.exports=!n(function(){var o=Error("a");return!("stack"in o)||(Object.defineProperty(o,"stack",r(1,7)),7!==o.stack)})},(b,e,t)=>{var n=t(132),r=t(133);b.exports=!n&&!r&&"object"==typeof window&&"object"==typeof document},b=>{b.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(b,e,t)=>{var n=t(18);b.exports="undefined"!=typeof process&&"process"==n(process)},(b,e,t)=>{var n=t(7);b.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(136),_display_utils=__w_pdfjs_require__(139),_font_loader=__w_pdfjs_require__(142),_canvas=__w_pdfjs_require__(143),_worker_options=__w_pdfjs_require__(146),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(147),_metadata=__w_pdfjs_require__(148),_optional_content_config=__w_pdfjs_require__(149),_transport_stream=__w_pdfjs_require__(150),_xfa_text=__w_pdfjs_require__(151);function _classPrivateMethodInitSpec(b,e){_checkPrivateRedeclaration(b,e),e.add(b)}function _classPrivateMethodGet(b,e,t){if(!e.has(b))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(b,e,t){_checkPrivateRedeclaration(b,e),e.set(b,t)}function _checkPrivateRedeclaration(b,e){if(e.has(b))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(b,e,t){return _classApplyDescriptorSet(b,_classExtractFieldDescriptor(b,e,"set"),t),t}function _classPrivateFieldGet(b,e){return _classApplyDescriptorGet(b,_classExtractFieldDescriptor(b,e,"get"))}function _classExtractFieldDescriptor(b,e,t){if(!e.has(b))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(b)}function _classStaticPrivateFieldSpecSet(b,e,t,n){return _classCheckPrivateStaticAccess(b,e),_classCheckPrivateStaticFieldDescriptor(t,"set"),_classApplyDescriptorSet(b,t,n),n}function _classApplyDescriptorSet(b,e,t){if(e.set)e.set.call(b,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function _classStaticPrivateFieldSpecGet(b,e,t){return _classCheckPrivateStaticAccess(b,e),_classCheckPrivateStaticFieldDescriptor(t,"get"),_classApplyDescriptorGet(b,t)}function _classCheckPrivateStaticFieldDescriptor(b,e){if(void 0===b)throw new TypeError("attempted to "+e+" private static field before its declaration")}function _classCheckPrivateStaticAccess(b,e){if(b!==e)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(b,e){return e.get?e.get.call(b):e.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:b,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(152);exports.DefaultCanvasFactory=DefaultCanvasFactory=b,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}if(_is_node.isNodeJS){const{PDFNodeStream:b}=__w_pdfjs_require__(153);createPDFNetworkStream=e=>new b(e)}else{const{PDFNetworkStream:b}=__w_pdfjs_require__(156),{PDFFetchStream:e}=__w_pdfjs_require__(157);createPDFNetworkStream=t=>(0,_display_utils.isValidFetchUrl)(t.url)?new e(t):new b(t)}function getDocument(b){if("string"==typeof b||b instanceof URL)b={url:b};else if((0,_util.isArrayBuffer)(b))b={data:b};else if(b instanceof PDFDataRangeTransport)(0,_display_utils.deprecated)("`PDFDataRangeTransport`-instance, please use a parameter object with `range`-property instead."),b={range:b};else if("object"!=typeof b)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,t=Object.create(null);let n=null,r=null;for(const g in b){const A=b[g];switch(g){case"url":if(A instanceof URL){t[g]=A.href;continue}try{t[g]=new URL(A,window.location).href;continue}catch{if(_is_node.isNodeJS&&"string"==typeof A)break}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":n=A;continue;case"worker":r=A;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&A instanceof Buffer)t[g]=new Uint8Array(A);else{if(A instanceof Uint8Array&&A.byteLength===A.buffer.byteLength)break;if("string"==typeof A)t[g]=(0,_util.stringToBytes)(A);else{if(("object"!=typeof A||null===A||isNaN(A.length))&&!(0,_util.isArrayBuffer)(A))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");t[g]=new Uint8Array(A)}}continue}t[g]=A}if(t.CMapReaderFactory=t.CMapReaderFactory||DefaultCMapReaderFactory,t.StandardFontDataFactory=t.StandardFontDataFactory||DefaultStandardFontDataFactory,t.ignoreErrors=!0!==t.stopAtErrors,t.fontExtraProperties=!0===t.fontExtraProperties,t.pdfBug=!0===t.pdfBug,t.enableXfa=!0===t.enableXfa,(!Number.isInteger(t.rangeChunkSize)||t.rangeChunkSize<1)&&(t.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof t.docBaseUrl||(0,_display_utils.isDataScheme)(t.docBaseUrl))&&(t.docBaseUrl=null),(!Number.isInteger(t.maxImageSize)||t.maxImageSize<-1)&&(t.maxImageSize=-1),"string"!=typeof t.cMapUrl&&(t.cMapUrl=null),"string"!=typeof t.standardFontDataUrl&&(t.standardFontDataUrl=null),"boolean"!=typeof t.useWorkerFetch&&(t.useWorkerFetch=t.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&t.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(t.cMapUrl,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(t.standardFontDataUrl,document.baseURI)),"boolean"!=typeof t.isEvalSupported&&(t.isEvalSupported=!0),"boolean"!=typeof t.isOffscreenCanvasSupported&&(t.isOffscreenCanvasSupported=!_is_node.isNodeJS),"boolean"!=typeof t.disableFontFace&&(t.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof t.useSystemFonts&&(t.useSystemFonts=!_is_node.isNodeJS&&!t.disableFontFace),("object"!=typeof t.ownerDocument||null===t.ownerDocument)&&(t.ownerDocument=globalThis.document),"boolean"!=typeof t.disableRange&&(t.disableRange=!1),"boolean"!=typeof t.disableStream&&(t.disableStream=!1),"boolean"!=typeof t.disableAutoFetch&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!r){const g={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};r=g.port?_PDFWorker.fromPort(g):new _PDFWorker(g),e._worker=r}const o=e.docId;return r.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const g=_fetchDocument(r,t,n,o),A=new Promise(function(T){let u;n?u=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,contentDispositionFilename:t.contentDispositionFilename,disableRange:t.disableRange,disableStream:t.disableStream},n):t.data||(u=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),T(u)});return Promise.all([g,A]).then(function(T){let[u,y]=T;if(e.destroyed)throw new Error("Loading aborted");const w=new _message_handler.MessageHandler(o,u,r.port),h=new WorkerTransport(w,e,y,t);e._transport=h,w.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(b,e,t,n){if(b.destroyed)throw new Error("Worker was destroyed");t&&(e.length=t.length,e.initialData=t.initialData,e.progressiveDone=t.progressiveDone,e.contentDispositionFilename=t.contentDispositionFilename);const r=e.data?[e.data.buffer]:null,o=await b.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"3.3.122",data:e.data,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length,docBaseUrl:e.docBaseUrl,enableXfa:e.enableXfa,evaluatorOptions:{maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,isOffscreenCanvasSupported:e.isOffscreenCanvasSupported,fontExtraProperties:e.fontExtraProperties,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null}},r);if(b.destroyed)throw new Error("Worker was destroyed");return o}var _onUnsupportedFeature=new WeakMap;class PDFDocumentLoadingTask{constructor(){var e,t;_classPrivateFieldInitSpec(this,_onUnsupportedFeature,{writable:!0,value:null}),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(e=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=e++,e)),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get onUnsupportedFeature(){return _classPrivateFieldGet(this,_onUnsupportedFeature)}set onUnsupportedFeature(e){(0,_display_utils.deprecated)("The PDFDocumentLoadingTask onUnsupportedFeature property will be removed in the future."),_classPrivateFieldSet(this,_onUnsupportedFeature,e)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await(null===(e=this._transport)||void 0===e?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){return this._transport.startCleanup(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._pageIndex=e,this._pageInfo=t,this._ownerDocument=r,this._transport=n,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:r,viewport:o,intent:g="display",annotationMode:A=_util.AnnotationMode.ENABLE,transform:T=null,canvasFactory:u=null,background:y=null,optionalContentConfigPromise:w=null,annotationCanvasMap:h=null,pageColors:C=null,printAnnotationStorage:l=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const c=this._transport.getRenderingIntent(g,A,l);this.pendingCleanup=!1,w||(w=this._transport.getOptionalContentConfig());let v=this._intentStates.get(c.cacheKey);v||(v=Object.create(null),this._intentStates.set(c.cacheKey,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const m=u||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),_=!!(c.renderingIntent&_util.RenderingIntentFlag.PRINT);var D;v.displayReadyCapability||(v.displayReadyCapability=(0,_util.createPromiseCapability)(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(D=this._stats)||void 0===D||D.time("Page Request"),this._pumpOperatorList(c));const P=a=>{var S,E;v.renderTasks.delete(i),(this.cleanupAfterRender||_)&&(this.pendingCleanup=!0),this._tryCleanup(),a?(i.capability.reject(a),this._abortOperatorList({intentState:v,reason:a instanceof Error?a:new Error(a)})):i.capability.resolve(),null===(S=this._stats)||void 0===S||S.timeEnd("Rendering"),null===(E=this._stats)||void 0===E||E.timeEnd("Overall")},i=new InternalRenderTask({callback:P,params:{canvasContext:r,viewport:o,transform:T,background:y},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:m,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:C});((n=v).renderTasks||(n.renderTasks=new Set)).add(i);const s=i.task;return Promise.all([v.displayReadyCapability.promise,w]).then(a=>{var S;let[E,O]=a;this.pendingCleanup?P():(null===(S=this._stats)||void 0===S||S.time("Rendering"),i.initializeGraphics({transparency:E,optionalContentConfig:O}),i.operatorListChanged())}).catch(P),s}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=this._transport.getRenderingIntent(e,t,n,!0);let A,g=this._intentStates.get(o.cacheKey);var T,u;return g||(g=Object.create(null),this._intentStates.set(o.cacheKey,g)),g.opListReadCapability||(A=Object.create(null),A.operatorListChanged=function r(){g.operatorList.lastChunk&&(g.opListReadCapability.resolve(g.operatorList),g.renderTasks.delete(A))},g.opListReadCapability=(0,_util.createPromiseCapability)(),((T=g).renderTasks||(T.renderTasks=new Set)).add(A),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(u=this._stats)||void 0===u||u.time("Page Request"),this._pumpOperatorList(o)),g.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:e=!1,includeMarkedContent:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==e,includeMarkedContent:!0===t},{highWaterMark:100,size:r=>r.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){const g=t.getReader(),A={items:[],styles:Object.create(null)};!function o(){g.read().then(function(T){let{value:u,done:y}=T;y?n(A):(Object.assign(A.styles,u.styles),A.items.push(...u.items),o())},r)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,t){var n,r;const o=this._intentStates.get(t);!o||(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(r=o.displayReadyCapability)||void 0===r||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageMap:r}=e;const g=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:r}).getReader(),A=this._intentStates.get(n);A.streamReader=g;const T=()=>{g.read().then(u=>{let{value:y,done:w}=u;w?A.streamReader=null:this._transport.destroyed||(this._renderPageChunk(y,A),T())},u=>{if(A.streamReader=null,!this._transport.destroyed){if(A.operatorList){A.operatorList.lastChunk=!0;for(const y of A.renderTasks)y.operatorListChanged();this._tryCleanup()}if(A.displayReadyCapability)A.displayReadyCapability.reject(u);else{if(!A.opListReadCapability)throw u;A.opListReadCapability.reject(u)}}})};T()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;return n.extraDelay>0&&n.extraDelay<1e3&&(o+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},o))}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[o,g]of this._intentStates)if(g===t){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap;class LoopbackPort{constructor(){_classPrivateFieldInitSpec(this,_listeners,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_deferred,{writable:!0,value:Promise.resolve()})}postMessage(e,t){const n={data:structuredClone(e,t)};_classPrivateFieldGet(this,_deferred).then(()=>{for(const r of _classPrivateFieldGet(this,_listeners))r.call(this,n)})}addEventListener(e,t){_classPrivateFieldGet(this,_listeners).push(t)}removeEventListener(e,t){const n=_classPrivateFieldGet(this,_listeners).indexOf(t);_classPrivateFieldGet(this,_listeners).splice(n,1)}terminate(){_classPrivateFieldGet(this,_listeners).length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&"function"==typeof require)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){var _document,_document$currentScri;const b=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,e){let t;try{if(t=new URL(b),!t.origin||"null"===t.origin)return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(b){return URL.createObjectURL(new Blob([`importScripts("${b}");`]))};class _PDFWorker{constructor(){let{name:b=null,port:e=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=b,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return _classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const e=new Worker(b),t=new _message_handler.MessageHandler("main","worker",e),n=()=>{e.removeEventListener("error",r),t.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||n()};e.addEventListener("error",r),t.on("test",g=>{e.removeEventListener("error",r),this.destroyed?n():g?(this._messageHandler=t,this._port=e,this._webWorker=e,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),e.terminate())}),t.on("ready",g=>{if(e.removeEventListener("error",r),this.destroyed)n();else try{o()}catch{this._setupFakeWorker()}});const o=()=>{const g=new Uint8Array;t.send("test",g,[g.buffer])};return void o()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const t="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(t+"_worker",t,e);b.setup(n,e);const r=new _message_handler.MessageHandler(t,t+"_worker",e);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){if(null==b||!b.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).has(b.port)?_classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).get(b.port):new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var b;return(null===(b=globalThis.pdfjsWorker)||void 0===b?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"==typeof require){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker;var _workerPorts={writable:!0,value:new WeakMap},_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(e,t,n,r){_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,r.useWorkerFetch||(this.CMapReaderFactory=new r.CMapReaderFactory({baseUrl:r.cMapUrl,isCompressed:r.cMapPacked}),this.StandardFontDataFactory=new r.StandardFontDataFactory({baseUrl:r.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=_util.RenderingIntentFlag.DISPLAY,g=null;switch(e){case"any":o=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":o=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:o+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:o+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:o+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,g=(o&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(o+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:o,cacheKey:`${o}_${_annotation_storage.AnnotationStorage.getHash(g)}`,annotationStorageMap:g}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of _classPrivateFieldGet(this,_pageCache).values())e.push(n._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function(o){let{value:g,done:A}=o;A?r.close():((0,_util.assert)(g instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(g),1,[g]))}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(g=>{if(!this.destroyed)throw g})}}),e.on("ReaderHeadersReady",n=>{const r=(0,_util.createPromiseCapability)(),o=this._fullReader;return o.headersReady.then(()=>{var g;o.isStreamingSupported&&o.isRangeSupported||(this._lastProgress&&(null===(g=t.onProgress)||void 0===g||g.call(t,this._lastProgress)),o.onProgress=A=>{var T;null===(T=t.onProgress)||void 0===T||T.call(t,{loaded:A.loaded,total:A.total})});r.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(n,r)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);o?(r.onPull=()=>{o.read().then(function(g){let{value:A,done:T}=g;T?r.close():((0,_util.assert)(A instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(A),1,[A]))}).catch(g=>{r.error(g)})},r.onCancel=g=>{o.cancel(g),r.ready.catch(A=>{if(!this.destroyed)throw A})}):r.close()}),e.on("GetDoc",n=>{let{pdfInfo:r}=n;this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(n){let r;switch(n.name){case"PasswordException":r=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":r=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const r=o=>{o instanceof Error?this._passwordCapability.reject(o):this._passwordCapability.resolve({password:o})};try{t.onPassword(r,n.code)}catch(o){this._passwordCapability.reject(o)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),e.on("DataLoaded",n=>{var r;null===(r=t.onProgress)||void 0===r||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{this.destroyed||_classPrivateFieldGet(this,_pageCache).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",n=>{var r;let[o,g,A]=n;if(!this.destroyed&&!this.commonObjs.has(o))switch(g){case"Font":const T=this._params;if("error"in A){const w=A.error;(0,_util.warn)(`Error during font loading: ${w}`),this.commonObjs.resolve(o,w);break}let u=null;T.pdfBug&&null!==(r=globalThis.FontInspector)&&void 0!==r&&r.enabled&&(u={registerFont(w,h){globalThis.FontInspector.fontAdded(w,h)}});const y=new _font_loader.FontFaceObject(A,{isEvalSupported:T.isEvalSupported,disableFontFace:T.disableFontFace,ignoreErrors:T.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(y).catch(w=>e.sendWithPromise("FontFallback",{id:o})).finally(()=>{!T.fontExtraProperties&&y.data&&(y.data=null),this.commonObjs.resolve(o,y)});break;case"FontPath":case"Image":this.commonObjs.resolve(o,A);break;default:throw new Error(`Got unknown common object type ${g}`)}}),e.on("obj",n=>{let[r,o,g,A]=n;if(this.destroyed)return;const T=_classPrivateFieldGet(this,_pageCache).get(o);if(!T.objs.has(r))switch(g){case"Image":T.objs.resolve(r,A);const y=8e6;if(A){let w;if(A.bitmap){const{bitmap:h,width:C,height:l}=A;w=C*l*4,T._bitmaps.add(h)}else{var u;w=(null===(u=A.data)||void 0===u?void 0:u.length)||0}w>y&&(T.cleanupAfterRender=!0)}break;case"Pattern":T.objs.resolve(r,A);break;default:throw new Error(`Got unknown object type ${g}`)}}),e.on("DocProgress",n=>{var r;this.destroyed||null===(r=t.onProgress)||void 0===r||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(e){var t,n;let{featureId:r}=e;this.destroyed||null===(t=(n=this.loadingTask).onUnsupportedFeature)||void 0===t||t.call(n,r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t,e;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(t=null===(e=this._fullReader)||void 0===e?void 0:e.filename)?t:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=_classPrivateFieldGet(this,_pagePromises).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");const g=new PDFPageProxy(t,o,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,g),g});return _classPrivateFieldGet(this,_pagePromises).set(t,r),r}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var r,o,t,n;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!=(r=null===(t=this._fullReader)||void 0===t?void 0:t.filename)?r:null,contentLength:null!=(o=null===(n=this._fullReader)||void 0===n?void 0:n.contentLength)?o:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);return r.capability.promise.then(()=>t(r.data)),null}const n=_classPrivateFieldGet(this,_objs)[e];if(null==n||!n.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=_classPrivateFieldGet(this,_objs)[e];return(null==t?void 0:t.capability.settled)||!1}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);n.data=t,n.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(b){return _classPrivateFieldGet(this,_objs)[b]||(_classPrivateFieldGet(this,_objs)[b]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(e){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,e),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_classPrivateFieldGet(this,_internalRenderTask).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return e.form||e.canvas&&(null==t?void 0:t.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(e){let{callback:t,params:n,objs:r,commonObjs:o,annotationCanvasMap:g,operatorList:A,pageIndex:T,canvasFactory:u,useRequestAnimationFrame:y=!1,pdfBug:w=!1,pageColors:h=null}=e;this.callback=t,this.params=n,this.objs=r,this.commonObjs=o,this.annotationCanvasMap=g,this.operatorListIdx=null,this.operatorList=A,this._pageIndex=T,this.canvasFactory=u,this._pdfBug=w,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===y&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:r=!1,optionalContentConfig:o}=e;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:A,transform:T,background:u}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:o},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:T,viewport:A,transparency:r,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback())))}}var _canvasInUse={writable:!0,value:new WeakSet};const version="3.3.122";exports.version=version;const build="562045607";exports.build=build},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=t(1),r=t(137),o=t(141);function A(s,a,S){T(s,a),a.set(s,S)}function T(s,a){if(a.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(s,a,S){return function y(s,a,S){if(a.set)a.set.call(s,S);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=S}}(s,C(s,a,"set"),S),S}function h(s,a){return function l(s,a){return a.get?a.get.call(s):a.value}(s,C(s,a,"get"))}function C(s,a,S){if(!a.has(s))throw new TypeError("attempted to "+S+" private field on non-instance");return a.get(s)}var c=new WeakMap,v=new WeakMap,m=new WeakSet;class _{constructor(){(function g(s,a){T(s,a),a.add(s)})(this,m),A(this,c,{writable:!0,value:!1}),A(this,v,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,S){const E=h(this,v).get(a);return void 0===E?S:Object.assign(S,E)}getRawValue(a){return h(this,v).get(a)}remove(a){if(h(this,v).delete(a),0===h(this,v).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const S of h(this,v).values())if(S instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,S){const E=h(this,v).get(a);let O=!1;if(void 0!==E)for(const[N,K]of Object.entries(S))E[N]!==K&&(O=!0,E[N]=K);else O=!0,h(this,v).set(a,S);O&&function w(s,a,S){if(!a.has(s))throw new TypeError("attempted to get private field on non-instance");return S}(this,m,D).call(this),S instanceof r.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(S.constructor._type)}has(a){return h(this,v).has(a)}getAll(){return h(this,v).size>0?(0,n.objectFromMap)(h(this,v)):null}get size(){return h(this,v).size}resetModified(){h(this,c)&&(u(this,c,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new i(this)}get serializable(){if(0===h(this,v).size)return null;const a=new Map;for(const[S,E]of h(this,v)){const O=E instanceof r.AnnotationEditor?E.serialize():E;O&&a.set(S,O)}return a}static getHash(a){if(!a)return"";const S=new o.MurmurHash3_64;for(const[E,O]of a)S.update(`${E}:${JSON.stringify(O)}`);return S.hexdigest()}}function D(){h(this,c)||(u(this,c,!0),"function"==typeof this.onSetModified&&this.onSetModified())}e.AnnotationStorage=_;var P=new WeakMap;class i extends _{constructor(a){super(),A(this,P,{writable:!0,value:null}),u(this,P,structuredClone(a.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,P)}}e.PrintAnnotationStorage=i},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=t(138),r=t(1);function o(s,a,S){return a=function g(s){var a=function A(s,a){if("object"!=typeof s||null===s)return s;var S=s[Symbol.toPrimitive];if(void 0!==S){var E=S.call(s,a||"default");if("object"!=typeof E)return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(s)}(s,"string");return"symbol"==typeof a?a:String(a)}(a),a in s?Object.defineProperty(s,a,{value:S,enumerable:!0,configurable:!0,writable:!0}):s[a]=S,s}function T(s,a,S){(function u(s,a){if(a.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")})(s,a),a.set(s,S)}function y(s,a,S){return function w(s,a,S){if(a.set)a.set.call(s,S);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=S}}(s,C(s,a,"set"),S),S}function h(s,a){return function l(s,a){return a.get?a.get.call(s):a.value}(s,C(s,a,"get"))}function C(s,a,S){if(!a.has(s))throw new TypeError("attempted to "+S+" private field on non-instance");return a.get(s)}var c=new WeakMap,v=new WeakMap,m=new WeakMap,_=new WeakMap,D=new WeakMap,P=new WeakMap;class i{constructor(a){T(this,c,{writable:!0,value:this.focusin.bind(this)}),T(this,v,{writable:!0,value:this.focusout.bind(this)}),T(this,m,{writable:!0,value:!1}),T(this,_,{writable:!0,value:!1}),T(this,D,{writable:!0,value:!1}),o(this,"_uiManager",null),T(this,P,{writable:!0,value:i._zIndex++}),this.constructor===i&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager;const{rotation:S,rawDims:{pageWidth:E,pageHeight:O,pageX:N,pageY:K}}=this.parent.viewport;this.rotation=S,this.pageDimensions=[E,O],this.pageTranslation=[N,K];const[lt,Q]=this.parentDimensions;this.x=a.x/lt,this.y=a.y/Q,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,P)}setParent(a){null!==a&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){h(this,m)?y(this,m,!1):this.parent.setSelected(this)}focusout(a){var S;if(!this.isAttachedToDOM)return;const E=a.relatedTarget;null!=E&&E.closest(`#${this.id}`)||(a.preventDefault(),null!==(S=this.parent)&&void 0!==S&&S.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(a){const S=this.parent.div.getBoundingClientRect();this.startX=a.clientX-S.x,this.startY=a.clientY-S.y,a.dataTransfer.setData("text/plain",this.id),a.dataTransfer.effectAllowed="move"}setAt(a,S,E,O){const[N,K]=this.parentDimensions;[E,O]=this.screenToPageTranslation(E,O),this.x=(a+E)/N,this.y=(S+O)/K,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(a,S){const[E,O]=this.parentDimensions;[a,S]=this.screenToPageTranslation(a,S),this.x+=a/E,this.y+=S/O,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(a,S){switch(this.parentRotation){case 90:return[S,-a];case 180:return[-a,-S];case 270:return[-S,a];default:return[a,S]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:a}=this._uiManager.viewParameters,[S,E]=this.pageDimensions;return[S*a,E*a]}setDims(a,S){const[E,O]=this.parentDimensions;this.div.style.width=100*a/E+"%",this.div.style.height=100*S/O+"%"}fixDims(){const{style:a}=this.div,{height:S,width:E}=a,O=E.endsWith("%"),N=S.endsWith("%");if(O&&N)return;const[K,lt]=this.parentDimensions;O||(a.width=100*parseFloat(E)/K+"%"),N||(a.height=100*parseFloat(S)/lt+"%")}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",h(this,c)),this.div.addEventListener("focusout",h(this,v));const[a,S]=this.getInitialTranslation();return this.translate(a,S),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(a){const{isMac:S}=r.FeatureTest.platform;0!==a.button||a.ctrlKey&&S?a.preventDefault():(a.ctrlKey&&!S||a.shiftKey||a.metaKey&&S?this.parent.toggleSelected(this):this.parent.setSelected(this),y(this,m,!0))}getRect(a,S){const E=this.parentScale,[O,N]=this.pageDimensions,[K,lt]=this.pageTranslation,Q=a/E,q=S/E,ut=this.x*O,ft=this.y*N,z=this.width*O,$=this.height*N;switch(this.rotation){case 0:return[ut+Q+K,N-ft-q-$+lt,ut+Q+z+K,N-ft-q+lt];case 90:return[ut+q+K,N-ft+Q+lt,ut+q+$+K,N-ft+Q+z+lt];case 180:return[ut-Q-z+K,N-ft+q+lt,ut-Q+K,N-ft+q+$+lt];case 270:return[ut-q-$+K,N-ft-Q-z+lt,ut-q+K,N-ft-Q+lt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,S){const[E,O,N,K]=a,lt=N-E,Q=K-O;switch(this.rotation){case 0:return[E,S-K,lt,Q];case 90:return[E,S-O,Q,lt];case 180:return[N,S-O,lt,Q];case 270:return[N,S-K,Q,lt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){y(this,D,!0)}disableEditMode(){y(this,D,!1)}isInEditMode(){return h(this,D)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a;null===(a=this.div)||void 0===a||a.addEventListener("focusin",h(this,c))}serialize(){(0,r.unreachable)("An editor must be serializable")}static deserialize(a,S,E){const O=new this.prototype.constructor({parent:S,id:S.getNextId(),uiManager:E});O.rotation=a.rotation;const[N,K]=O.pageDimensions,[lt,Q,q,ut]=O.getRectInCurrentCoords(a.rect,K);return O.x=lt/N,O.y=Q/K,O.width=q/N,O.height=ut/K,O}remove(){this.div.removeEventListener("focusin",h(this,c)),this.div.removeEventListener("focusout",h(this,v)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var a;null===(a=this.div)||void 0===a||a.classList.add("selectedEditor")}unselect(){var a;null===(a=this.div)||void 0===a||a.classList.remove("selectedEditor")}updateParams(a,S){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return h(this,_)}set isEditing(a){y(this,_,a),a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=i,o(i,"_colorManager",new n.ColorManager),o(i,"_zIndex",1)},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=function m(ht,V,gt){for(const Tt of gt)V.addEventListener(Tt,ht[Tt].bind(ht))},e.opacityToHex=function _(ht){return Math.round(Math.min(255,Math.max(1,255*ht))).toString(16).padStart(2,"0")};var n=t(1),r=t(139);function o(ht,V,gt){return V=function g(ht){var V=function A(ht,V){if("object"!=typeof ht||null===ht)return ht;var gt=ht[Symbol.toPrimitive];if(void 0!==gt){var Tt=gt.call(ht,V||"default");if("object"!=typeof Tt)return Tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===V?String:Number)(ht)}(ht,"string");return"symbol"==typeof V?V:String(V)}(V),V in ht?Object.defineProperty(ht,V,{value:gt,enumerable:!0,configurable:!0,writable:!0}):ht[V]=gt,ht}function T(ht,V){w(ht,V),V.add(ht)}function u(ht,V,gt){if(!V.has(ht))throw new TypeError("attempted to get private field on non-instance");return gt}function y(ht,V,gt){w(ht,V),V.set(ht,gt)}function w(ht,V){if(V.has(ht))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(ht,V,gt){return function C(ht,V,gt){if(V.set)V.set.call(ht,gt);else{if(!V.writable)throw new TypeError("attempted to set read only private field");V.value=gt}}(ht,c(ht,V,"set"),gt),gt}function l(ht,V){return function v(ht,V){return V.get?V.get.call(ht):V.value}(ht,c(ht,V,"get"))}function c(ht,V,gt){if(!V.has(ht))throw new TypeError("attempted to "+gt+" private field on non-instance");return V.get(ht)}var D=new WeakMap;class P{constructor(){y(this,D,{writable:!0,value:0})}getId(){var V,gt;return`${n.AnnotationEditorPrefix}${h(this,D,(V=l(this,D),gt=V++,V)),gt}`}}var i=new WeakMap,s=new WeakMap,a=new WeakMap,S=new WeakMap;class E{constructor(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;y(this,i,{writable:!0,value:[]}),y(this,s,{writable:!0,value:!1}),y(this,a,{writable:!0,value:void 0}),y(this,S,{writable:!0,value:-1}),h(this,a,V)}add(V){let{cmd:gt,undo:Tt,mustExec:_t,type:Pt=NaN,overwriteIfSameType:Nt=!1,keepUndo:ct=!1}=V;if(_t&&gt(),l(this,s))return;const Y={cmd:gt,undo:Tt,type:Pt};if(-1===l(this,S))return l(this,i).length>0&&(l(this,i).length=0),h(this,S,0),void l(this,i).push(Y);if(Nt&&l(this,i)[l(this,S)].type===Pt)return ct&&(Y.undo=l(this,i)[l(this,S)].undo),void(l(this,i)[l(this,S)]=Y);const mt=l(this,S)+1;mt===l(this,a)?l(this,i).splice(0,1):(h(this,S,mt),mt<l(this,i).length&&l(this,i).splice(mt)),l(this,i).push(Y)}undo(){-1!==l(this,S)&&(h(this,s,!0),l(this,i)[l(this,S)].undo(),h(this,s,!1),h(this,S,l(this,S)-1))}redo(){l(this,S)<l(this,i).length-1&&(h(this,S,l(this,S)+1),h(this,s,!0),l(this,i)[l(this,S)].cmd(),h(this,s,!1))}hasSomethingToUndo(){return-1!==l(this,S)}hasSomethingToRedo(){return l(this,S)<l(this,i).length-1}destroy(){h(this,i,null)}}e.CommandManager=E;var O=new WeakSet;class N{constructor(V){T(this,O),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:gt}=n.FeatureTest.platform;for(const[Tt,_t]of V)for(const Pt of Tt){const Nt=Pt.startsWith("mac+");gt&&Nt?(this.callbacks.set(Pt.slice(4),_t),this.allKeys.add(Pt.split("+").at(-1))):!gt&&!Nt&&(this.callbacks.set(Pt,_t),this.allKeys.add(Pt.split("+").at(-1)))}}exec(V,gt){if(!this.allKeys.has(gt.key))return;const Tt=this.callbacks.get(u(this,O,K).call(this,gt));!Tt||(Tt.bind(V)(),gt.stopPropagation(),gt.preventDefault())}}function K(ht){ht.altKey&&this.buffer.push("alt"),ht.ctrlKey&&this.buffer.push("ctrl"),ht.metaKey&&this.buffer.push("meta"),ht.shiftKey&&this.buffer.push("shift"),this.buffer.push(ht.key);const V=this.buffer.join("+");return this.buffer.length=0,V}e.KeyboardManager=N;class lt{get _colors(){const V=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(V),(0,n.shadow)(this,"_colors",V)}convert(V){const gt=(0,r.getRGB)(V);if(!window.matchMedia("(forced-colors: active)").matches)return gt;for(const[Tt,_t]of this._colors)if(_t.every((Pt,Nt)=>Pt===gt[Nt]))return lt._colorsMapping.get(Tt);return gt}getHexCode(V){const gt=this._colors.get(V);return gt?n.Util.makeHexColor(...gt):V}}e.ColorManager=lt,o(lt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Q=new WeakMap,q=new WeakMap,ut=new WeakMap,ft=new WeakMap,z=new WeakMap,$=new WeakMap,G=new WeakMap,L=new WeakMap,R=new WeakMap,F=new WeakMap,p=new WeakMap,f=new WeakMap,x=new WeakMap,U=new WeakMap,B=new WeakMap,H=new WeakMap,X=new WeakMap,J=new WeakMap,st=new WeakMap,nt=new WeakMap,at=new WeakMap,ot=new WeakMap,yt=new WeakMap,rt=new WeakSet,d=new WeakSet,k=new WeakSet,M=new WeakSet,I=new WeakSet,W=new WeakSet,j=new WeakSet,pt=new WeakSet,it=new WeakSet,At=new WeakSet,St=new WeakSet;class vt{constructor(V,gt,Tt){T(this,St),T(this,At),T(this,it),T(this,pt),T(this,j),T(this,W),T(this,I),T(this,M),T(this,k),T(this,d),T(this,rt),y(this,Q,{writable:!0,value:null}),y(this,q,{writable:!0,value:new Map}),y(this,ut,{writable:!0,value:new Map}),y(this,ft,{writable:!0,value:null}),y(this,z,{writable:!0,value:new E}),y(this,$,{writable:!0,value:0}),y(this,G,{writable:!0,value:null}),y(this,L,{writable:!0,value:new Set}),y(this,R,{writable:!0,value:null}),y(this,F,{writable:!0,value:new P}),y(this,p,{writable:!0,value:!1}),y(this,f,{writable:!0,value:n.AnnotationEditorType.NONE}),y(this,x,{writable:!0,value:new Set}),y(this,U,{writable:!0,value:this.copy.bind(this)}),y(this,B,{writable:!0,value:this.cut.bind(this)}),y(this,H,{writable:!0,value:this.paste.bind(this)}),y(this,X,{writable:!0,value:this.keydown.bind(this)}),y(this,J,{writable:!0,value:this.onEditingAction.bind(this)}),y(this,st,{writable:!0,value:this.onPageChanging.bind(this)}),y(this,nt,{writable:!0,value:this.onScaleChanging.bind(this)}),y(this,at,{writable:!0,value:this.onRotationChanging.bind(this)}),y(this,ot,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),y(this,yt,{writable:!0,value:null}),h(this,yt,V),h(this,R,gt),l(this,R)._on("editingaction",l(this,J)),l(this,R)._on("pagechanging",l(this,st)),l(this,R)._on("scalechanging",l(this,nt)),l(this,R)._on("rotationchanging",l(this,at)),h(this,ft,Tt),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){u(this,d,wt).call(this),l(this,R)._off("editingaction",l(this,J)),l(this,R)._off("pagechanging",l(this,st)),l(this,R)._off("scalechanging",l(this,nt)),l(this,R)._off("rotationchanging",l(this,at));for(const V of l(this,ut).values())V.destroy();l(this,ut).clear(),l(this,q).clear(),l(this,L).clear(),h(this,Q,null),l(this,x).clear(),l(this,z).destroy()}onPageChanging(V){let{pageNumber:gt}=V;h(this,$,gt-1)}focusMainContainer(){l(this,yt).focus()}addShouldRescale(V){l(this,L).add(V)}removeShouldRescale(V){l(this,L).delete(V)}onScaleChanging(V){let{scale:gt}=V;this.commitOrRemove(),this.viewParameters.realScale=gt*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Tt of l(this,L))Tt.onScaleChanging()}onRotationChanging(V){let{pagesRotation:gt}=V;this.commitOrRemove(),this.viewParameters.rotation=gt}addToAnnotationStorage(V){!V.isEmpty()&&l(this,ft)&&!l(this,ft).has(V.id)&&l(this,ft).setValue(V.id,V)}copy(V){if(V.preventDefault(),l(this,Q)&&l(this,Q).commitOrRemove(),!this.hasSelection)return;const gt=[];for(const Tt of l(this,x))Tt.isEmpty()||gt.push(Tt.serialize());0!==gt.length&&V.clipboardData.setData("application/pdfjs",JSON.stringify(gt))}cut(V){this.copy(V),this.delete()}paste(V){V.preventDefault();let gt=V.clipboardData.getData("application/pdfjs");if(!gt)return;try{gt=JSON.parse(gt)}catch(_t){return void(0,n.warn)(`paste: "${_t.message}".`)}if(!Array.isArray(gt))return;this.unselectAll();const Tt=l(this,ut).get(l(this,$));try{const _t=[];for(const ct of gt){const Y=Tt.deserialize(ct);if(!Y)return;_t.push(Y)}this.addCommands({cmd:()=>{for(const ct of _t)u(this,it,Et).call(this,ct);u(this,St,dt).call(this,_t)},undo:()=>{for(const ct of _t)ct.remove()},mustExec:!0})}catch(_t){(0,n.warn)(`paste: "${_t.message}".`)}}keydown(V){var gt;null!==(gt=this.getActive())&&void 0!==gt&&gt.shouldGetKeyboardEvents()||vt._keyboardManager.exec(this,V)}onEditingAction(V){["undo","redo","delete","selectAll"].includes(V.name)&&this[V.name]()}setEditingState(V){V?(u(this,rt,bt).call(this),u(this,k,Ct).call(this),u(this,I,Ft).call(this,{isEditing:l(this,f)!==n.AnnotationEditorType.NONE,isEmpty:u(this,At,Mt).call(this),hasSomethingToUndo:l(this,z).hasSomethingToUndo(),hasSomethingToRedo:l(this,z).hasSomethingToRedo(),hasSelectedEditor:!1})):(u(this,d,wt).call(this),u(this,M,Rt).call(this),u(this,I,Ft).call(this,{isEditing:!1}))}registerEditorTypes(V){if(!l(this,G)){h(this,G,V);for(const gt of l(this,G))u(this,W,et).call(this,gt.defaultPropertiesToUpdate)}}getId(){return l(this,F).getId()}get currentLayer(){return l(this,ut).get(l(this,$))}get currentPageIndex(){return l(this,$)}addLayer(V){l(this,ut).set(V.pageIndex,V),l(this,p)?V.enable():V.disable()}removeLayer(V){l(this,ut).delete(V.pageIndex)}updateMode(V){if(h(this,f,V),V===n.AnnotationEditorType.NONE)this.setEditingState(!1),u(this,pt,Z).call(this);else{this.setEditingState(!0),u(this,j,tt).call(this);for(const gt of l(this,ut).values())gt.updateMode(V)}}updateToolbar(V){V!==l(this,f)&&l(this,R).dispatch("switchannotationeditormode",{source:this,mode:V})}updateParams(V,gt){if(l(this,G)){for(const Tt of l(this,x))Tt.updateParams(V,gt);for(const Tt of l(this,G))Tt.updateDefaultParams(V,gt)}}getEditors(V){const gt=[];for(const Tt of l(this,q).values())Tt.pageIndex===V&&gt.push(Tt);return gt}getEditor(V){return l(this,q).get(V)}addEditor(V){l(this,q).set(V.id,V)}removeEditor(V){var gt;l(this,q).delete(V.id),this.unselect(V),null===(gt=l(this,ft))||void 0===gt||gt.remove(V.id)}setActiveEditor(V){l(this,Q)!==V&&(h(this,Q,V),V&&u(this,W,et).call(this,V.propertiesToUpdate))}toggleSelected(V){if(l(this,x).has(V))return l(this,x).delete(V),V.unselect(),void u(this,I,Ft).call(this,{hasSelectedEditor:this.hasSelection});l(this,x).add(V),V.select(),u(this,W,et).call(this,V.propertiesToUpdate),u(this,I,Ft).call(this,{hasSelectedEditor:!0})}setSelected(V){for(const gt of l(this,x))gt!==V&&gt.unselect();l(this,x).clear(),l(this,x).add(V),V.select(),u(this,W,et).call(this,V.propertiesToUpdate),u(this,I,Ft).call(this,{hasSelectedEditor:!0})}isSelected(V){return l(this,x).has(V)}unselect(V){V.unselect(),l(this,x).delete(V),u(this,I,Ft).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==l(this,x).size}undo(){l(this,z).undo(),u(this,I,Ft).call(this,{hasSomethingToUndo:l(this,z).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:u(this,At,Mt).call(this)})}redo(){l(this,z).redo(),u(this,I,Ft).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,z).hasSomethingToRedo(),isEmpty:u(this,At,Mt).call(this)})}addCommands(V){l(this,z).add(V),u(this,I,Ft).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:u(this,At,Mt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const V=[...l(this,x)];this.addCommands({cmd:()=>{for(const _t of V)_t.remove()},undo:()=>{for(const _t of V)u(this,it,Et).call(this,_t)},mustExec:!0})}commitOrRemove(){var V;null===(V=l(this,Q))||void 0===V||V.commitOrRemove()}selectAll(){for(const V of l(this,x))V.commit();u(this,St,dt).call(this,l(this,q).values())}unselectAll(){if(l(this,Q))l(this,Q).commitOrRemove();else if(0!==l(this,x).size){for(const V of l(this,x))V.unselect();l(this,x).clear(),u(this,I,Ft).call(this,{hasSelectedEditor:!1})}}isActive(V){return l(this,Q)===V}getActive(){return l(this,Q)}getMode(){return l(this,f)}}function bt(){l(this,yt).addEventListener("keydown",l(this,X))}function wt(){l(this,yt).removeEventListener("keydown",l(this,X))}function Ct(){document.addEventListener("copy",l(this,U)),document.addEventListener("cut",l(this,B)),document.addEventListener("paste",l(this,H))}function Rt(){document.removeEventListener("copy",l(this,U)),document.removeEventListener("cut",l(this,B)),document.removeEventListener("paste",l(this,H))}function Ft(ht){Object.entries(ht).some(gt=>{let[Tt,_t]=gt;return l(this,ot)[Tt]!==_t})&&l(this,R).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,ot),ht)})}function et(ht){l(this,R).dispatch("annotationeditorparamschanged",{source:this,details:ht})}function tt(){if(!l(this,p)){h(this,p,!0);for(const ht of l(this,ut).values())ht.enable()}}function Z(){if(this.unselectAll(),l(this,p)){h(this,p,!1);for(const ht of l(this,ut).values())ht.disable()}}function Et(ht){const V=l(this,ut).get(ht.pageIndex);V?V.addOrRebuild(ht):this.addEditor(ht)}function Mt(){if(0===l(this,q).size)return!0;if(1===l(this,q).size)for(const ht of l(this,q).values())return ht.isEmpty();return!1}function dt(ht){l(this,x).clear();for(const V of ht)V.isEmpty()||(l(this,x).add(V),V.select());u(this,I,Ft).call(this,{hasSelectedEditor:!0})}e.AnnotationEditorUIManager=vt,o(vt,"_keyboardManager",new N([[["ctrl+a","mac+meta+a"],vt.prototype.selectAll],[["ctrl+z","mac+meta+z"],vt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],vt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],vt.prototype.delete],[["Escape","mac+Escape"],vt.prototype.unselectAll]]))},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=function E(z){console.log("Deprecated API usage: "+z)},e.getColorValues=function Q(z){const $=document.createElement("span");$.style.visibility="hidden",document.body.append($);for(const G of z.keys()){$.style.color=G;const L=window.getComputedStyle($).color;z.set(G,lt(L))}$.remove()},e.getCurrentTransform=function q(z){const{a:$,b:G,c:L,d:R,e:F,f:p}=z.getTransform();return[$,G,L,R,F,p]},e.getCurrentTransformInverse=function ut(z){const{a:$,b:G,c:L,d:R,e:F,f:p}=z.getTransform().invertSelf();return[$,G,L,R,F,p]},e.getFilenameFromUrl=function P(z){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||([z]=z.split(/[#?]/,1)),z.substring(z.lastIndexOf("/")+1)},e.getPdfFilenameFromUrl=function i(z){let $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof z)return $;if(_(z))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),$;const G=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,L=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,R=G.exec(z);let F=L.exec(R[1])||L.exec(R[2])||L.exec(R[3]);if(F&&(F=F[0],F.includes("%")))try{F=L.exec(decodeURIComponent(F))[0]}catch{}return F||$},e.getRGB=lt,e.getXfaPageViewport=function K(z,$){let{scale:G=1,rotation:L=0}=$;const{width:R,height:F}=z.attributes.style,p=[0,0,parseInt(R),parseInt(F)];return new v({viewBox:p,scale:G,rotation:L})},e.isDataScheme=_,e.isPdfFile=function D(z){return"string"==typeof z&&/\.pdf$/i.test(z)},e.isValidFetchUrl=a,e.loadScript=function S(z){let $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((G,L)=>{const R=document.createElement("script");R.src=z,R.onload=function(F){$&&R.remove(),G(F)},R.onerror=function(){L(new Error(`Cannot load script at: ${R.src}`))},(document.head||document.documentElement).append(R)})},e.setLayerDimensions=function ft(z,$){let G=arguments.length>2&&void 0!==arguments[2]&&arguments[2],L=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if($ instanceof v){const{pageWidth:R,pageHeight:F}=$.rawDims,{style:p}=z,f=`calc(var(--scale-factor) * ${R}px)`,x=`calc(var(--scale-factor) * ${F}px)`;G&&$.rotation%180!=0?(p.width=x,p.height=f):(p.width=f,p.height=x)}L&&z.setAttribute("data-main-rotation",$.rotation)};var n=t(140),r=t(1);function o(z,$,G){return $=function g(z){var $=function A(z,$){if("object"!=typeof z||null===z)return z;var G=z[Symbol.toPrimitive];if(void 0!==G){var L=G.call(z,$||"default");if("object"!=typeof L)return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===$?String:Number)(z)}(z,"string");return"symbol"==typeof $?$:String($)}($),$ in z?Object.defineProperty(z,$,{value:G,enumerable:!0,configurable:!0,writable:!0}):z[$]=G,z}e.AnnotationPrefix="pdfjs_internal_id_";class y{}async function h(z){let $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a(z,document.baseURI)){const G=await fetch(z);if(!G.ok)throw new Error(G.statusText);return $?new Uint8Array(await G.arrayBuffer()):(0,r.stringToBytes)(await G.text())}return new Promise((G,L)=>{const R=new XMLHttpRequest;R.open("GET",z,!0),$&&(R.responseType="arraybuffer"),R.onreadystatechange=()=>{if(R.readyState===XMLHttpRequest.DONE){if(200===R.status||0===R.status){let F;if($&&R.response?F=new Uint8Array(R.response):!$&&R.responseText&&(F=(0,r.stringToBytes)(R.responseText)),F)return void G(F)}L(new Error(R.statusText))}},R.send(null)})}e.PixelsPerInch=y,o(y,"CSS",96),o(y,"PDF",72),o(y,"PDF_TO_CSS_UNITS",y.CSS/y.PDF),e.DOMCanvasFactory=class w extends n.BaseCanvasFactory{constructor(){let{ownerDocument:$=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=$}_createCanvas($,G){const L=this._document.createElement("canvas");return L.width=$,L.height=G,L}},e.DOMCMapReaderFactory=class C extends n.BaseCMapReaderFactory{_fetchData($,G){return h($,this.isCompressed).then(L=>({cMapData:L,compressionType:G}))}},e.DOMStandardFontDataFactory=class l extends n.BaseStandardFontDataFactory{_fetchData($){return h($,!0)}},e.DOMSVGFactory=class c extends n.BaseSVGFactory{_createSVG($){return document.createElementNS("http://www.w3.org/2000/svg",$)}};class v{constructor($){let{viewBox:G,scale:L,rotation:R,offsetX:F=0,offsetY:p=0,dontFlip:f=!1}=$;this.viewBox=G,this.scale=L,this.rotation=R,this.offsetX=F,this.offsetY=p;const x=(G[2]+G[0])/2,U=(G[3]+G[1])/2;let B,H,X,J,st,nt,at,ot;switch(R%=360,R<0&&(R+=360),R){case 180:B=-1,H=0,X=0,J=1;break;case 90:B=0,H=1,X=1,J=0;break;case 270:B=0,H=-1,X=-1,J=0;break;case 0:B=1,H=0,X=0,J=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}f&&(X=-X,J=-J),0===B?(st=Math.abs(U-G[1])*L+F,nt=Math.abs(x-G[0])*L+p,at=(G[3]-G[1])*L,ot=(G[2]-G[0])*L):(st=Math.abs(x-G[0])*L+F,nt=Math.abs(U-G[1])*L+p,at=(G[2]-G[0])*L,ot=(G[3]-G[1])*L),this.transform=[B*L,H*L,X*L,J*L,st-B*L*x-X*L*U,nt-H*L*x-J*L*U],this.width=at,this.height=ot}get rawDims(){const{viewBox:$}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:$[2]-$[0],pageHeight:$[3]-$[1],pageX:$[0],pageY:$[1]})}clone(){let{scale:$=this.scale,rotation:G=this.rotation,offsetX:L=this.offsetX,offsetY:R=this.offsetY,dontFlip:F=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new v({viewBox:this.viewBox.slice(),scale:$,rotation:G,offsetX:L,offsetY:R,dontFlip:F})}convertToViewportPoint($,G){return r.Util.applyTransform([$,G],this.transform)}convertToViewportRectangle($){const G=r.Util.applyTransform([$[0],$[1]],this.transform),L=r.Util.applyTransform([$[2],$[3]],this.transform);return[G[0],G[1],L[0],L[1]]}convertToPdfPoint($,G){return r.Util.applyInverseTransform([$,G],this.transform)}}function _(z){const $=z.length;let G=0;for(;G<$&&""===z[G].trim();)G++;return"data:"===z.substring(G,G+5).toLowerCase()}function a(z,$){try{const{protocol:G}=$?new URL(z,$):new URL(z);return"http:"===G||"https:"===G}catch{return!1}}let O;function lt(z){if(z.startsWith("#")){const $=parseInt(z.slice(1),16);return[(16711680&$)>>16,(65280&$)>>8,255&$]}return z.startsWith("rgb(")?z.slice(4,-1).split(",").map($=>parseInt($)):z.startsWith("rgba(")?z.slice(5,-1).split(",").map($=>parseInt($)).slice(0,3):((0,r.warn)(`Not a valid color format: "${z}"`),[0,0,0])}e.PageViewport=v,e.RenderingCancelledException=class m extends r.BaseException{constructor($,G){let L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super($,"RenderingCancelledException"),this.type=G,this.extraDelay=L}},e.StatTimer=class s{constructor(){o(this,"started",Object.create(null)),o(this,"times",[])}time($){$ in this.started&&(0,r.warn)(`Timer is already running for ${$}`),this.started[$]=Date.now()}timeEnd($){$ in this.started||(0,r.warn)(`Timer has not been started for ${$}`),this.times.push({name:$,start:this.started[$],end:Date.now()}),delete this.started[$]}toString(){const $=[];let G=0;for(const{name:L}of this.times)G=Math.max(L.length,G);for(const{name:L,start:R,end:F}of this.times)$.push(`${L.padEnd(G)} ${F-R}ms\n`);return $.join("")}},e.PDFDateString=class N{static toDateObject($){if(!$||"string"!=typeof $)return null;O||(O=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const G=O.exec($);if(!G)return null;const L=parseInt(G[1],10);let R=parseInt(G[2],10);R=R>=1&&R<=12?R-1:0;let F=parseInt(G[3],10);F=F>=1&&F<=31?F:1;let p=parseInt(G[4],10);p=p>=0&&p<=23?p:0;let f=parseInt(G[5],10);f=f>=0&&f<=59?f:0;let x=parseInt(G[6],10);x=x>=0&&x<=59?x:0;const U=G[7]||"Z";let B=parseInt(G[8],10);B=B>=0&&B<=23?B:0;let H=parseInt(G[9],10)||0;return H=H>=0&&H<=59?H:0,"-"===U?(p+=B,f+=H):"+"===U&&(p-=B,f-=H),new Date(Date.UTC(L,R,F,p,f,x))}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=t(1);class r{constructor(){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,y){if(u<=0||y<=0)throw new Error("Invalid canvas size");const w=this._createCanvas(u,y);return{canvas:w,context:w.getContext("2d")}}reset(u,y,w){if(!u.canvas)throw new Error("Canvas is not specified");if(y<=0||w<=0)throw new Error("Invalid canvas size");u.canvas.width=y,u.canvas.height=w}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,y){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=r;class o{constructor(u){let{baseUrl:y=null,isCompressed:w=!1}=u;this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=w}async fetch(u){let{name:y}=u;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const w=this.baseUrl+y+(this.isCompressed?".bcmap":"");return this._fetchData(w,this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${w}`)})}_fetchData(u,y){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class g{constructor(u){let{baseUrl:y=null}=u;this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}async fetch(u){let{filename:y}=u;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const w=`${this.baseUrl}${y}`;return this._fetchData(w).catch(h=>{throw new Error(`Unable to load font data at: ${w}`)})}_fetchData(u){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=g;class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,y){let w=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(u<=0||y<=0)throw new Error("Invalid SVG dimensions");const h=this._createSVG("svg:svg");return h.setAttribute("version","1.1"),w||(h.setAttribute("width",`${u}px`),h.setAttribute("height",`${y}px`)),h.setAttribute("preserveAspectRatio","none"),h.setAttribute("viewBox",`0 0 ${u} ${y}`),h}createElement(u){if("string"!=typeof u)throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=A},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=t(1);const r=3285377520,o=4294901760,g=65535;e.MurmurHash3_64=class A{constructor(u){this.h1=u?4294967295&u:r,this.h2=u?4294967295&u:r}update(u){let y,w;if("string"==typeof u){y=new Uint8Array(2*u.length),w=0;for(let a=0,S=u.length;a<S;a++){const E=u.charCodeAt(a);E<=255?y[w++]=E:(y[w++]=E>>>8,y[w++]=255&E)}}else{if(!(0,n.isArrayBuffer)(u))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");y=u.slice(),w=y.byteLength}const h=w>>2,C=w-4*h,l=new Uint32Array(y.buffer,0,h);let c=0,v=0,m=this.h1,_=this.h2;const D=3432918353,P=461845907,i=D&g,s=P&g;for(let a=0;a<h;a++)1&a?(c=l[a],c=c*D&o|c*i&g,c=c<<15|c>>>17,c=c*P&o|c*s&g,m^=c,m=m<<13|m>>>19,m=5*m+3864292196):(v=l[a],v=v*D&o|v*i&g,v=v<<15|v>>>17,v=v*P&o|v*s&g,_^=v,_=_<<13|_>>>19,_=5*_+3864292196);switch(c=0,C){case 3:c^=y[4*h+2]<<16;case 2:c^=y[4*h+1]<<8;case 1:c^=y[4*h],c=c*D&o|c*i&g,c=c<<15|c>>>17,c=c*P&o|c*s&g,1&h?m^=c:_^=c}this.h1=m,this.h2=_}hexdigest(){let u=this.h1,y=this.h2;return u^=y>>>1,u=3981806797*u&o|36045*u&g,y=4283543511*y&o|(2950163797*(y<<16|u>>>16)&o)>>>16,u^=y>>>1,u=444984403*u&o|60499*u&g,y=3301882366*y&o|(3120437893*(y<<16|u>>>16)&o)>>>16,u^=y>>>1,(u>>>0).toString(16).padStart(8,"0")+(y>>>0).toString(16).padStart(8,"0")}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=t(1),r=t(3);e.FontLoader=class o{constructor(T){let{onUnsupportedFeature:u,ownerDocument:y=globalThis.document,styleElement:w=null}=T;this._onUnsupportedFeature=u,this._document=y,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const u=this.styleElement.sheet;u.insertRule(T,u.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(T){if(T.attached||T.missingFile)return;if(T.attached=!0,this.isFontLoadingAPISupported){const y=T.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(w){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${y.family}': '${w}'.`),T.disableFontFace=!0,w}}return}const u=T.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const w=this._queueLoadingCallback(y);this._prepareFontLoadEvent(T,w)})}}get isFontLoadingAPISupported(){var T;const u=!(null===(T=this._document)||void 0===T||!T.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",u)}get isSyncFontLoadingSupported(){let T=!1;return(r.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){const{loadingRequests:y}=this,w={done:!1,complete:function u(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;y.length>0&&y[0].done;){const h=y.shift();setTimeout(h.callback,0)}},callback:T};return y.push(w),w}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,u){function y(N,K){return N.charCodeAt(K)<<24|N.charCodeAt(K+1)<<16|N.charCodeAt(K+2)<<8|255&N.charCodeAt(K+3)}function w(N,K,lt,Q){return N.substring(0,K)+Q+N.substring(K+lt)}let h,C;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let v=0;const _=`lt${Date.now()}${this.loadTestFontId++}`;let D=this._loadTestFont;D=w(D,976,_.length,_);const s=1482184792;let a=y(D,16);for(h=0,C=_.length-3;h<C;h+=4)a=a-s+y(_,h)|0;h<_.length&&(a=a-s+y(_+"XXX",h)|0),D=w(D,16,4,(0,n.string32)(a));const S=`url(data:font/opentype;base64,${btoa(D)});`;this.insertRule(`@font-face {font-family:"${_}";src:${S}}`);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const N of[T.loadedName,_]){const K=this._document.createElement("span");K.textContent="Hi",K.style.fontFamily=N,O.append(K)}this._document.body.append(O),function m(N,K){if(++v>30)return(0,n.warn)("Load test font never loaded."),void K();c.font="30px "+N,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?K():setTimeout(m.bind(null,N,K))}(_,()=>{O.remove(),u.complete()})}},e.FontFaceObject=class g{constructor(T,u){let{isEvalSupported:y=!0,disableFontFace:w=!1,ignoreErrors:h=!1,onUnsupportedFeature:C,fontRegistry:l=null}=u;this.compiledGlyphs=Object.create(null);for(const c in T)this[c]=T[c];this.isEvalSupported=!1!==y,this.disableFontFace=!0===w,this.ignoreErrors=!0===h,this._onUnsupportedFeature=C,this.fontRegistry=l}createNativeFontFace(){var T;if(!this.data||this.disableFontFace)return null;let u;if(this.cssFontInfo){const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),u=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}else u=new FontFace(this.loadedName,this.data,{});return null===(T=this.fontRegistry)||void 0===T||T.registerFont(this),u}createFontFaceRule(){var T;if(!this.data||this.disableFontFace)return null;const u=(0,n.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(u)});`;let w;if(this.cssFontInfo){let h=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(h+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),w=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${h}src:${y}}`}else w=`@font-face {font-family:"${this.loadedName}";src:${y}}`;return null===(T=this.fontRegistry)||void 0===T||T.registerFont(this,y),w}getPathGenerator(T,u){if(void 0!==this.compiledGlyphs[u])return this.compiledGlyphs[u];let y;try{y=T.get(this.loadedName+"_path_"+u)}catch(w){if(!this.ignoreErrors)throw w;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[u]=function(h,C){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const h of y){const C=void 0!==h.args?h.args.join(","):"";w.push("c.",h.cmd,"(",C,");\n")}return this.compiledGlyphs[u]=new Function("c","size",w.join(""))}return this.compiledGlyphs[u]=function(w,h){for(const C of y)"scale"===C.cmd&&(C.args=[h,-h]),w[C.cmd].apply(w,C.args)}}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=t(1),r=t(139),o=t(144),g=t(145);function u(F,p,f){if(!p.has(F))throw new TypeError("attempted to get private field on non-instance");return f}const h=4096,v=16;class _{constructor(p){this.canvasFactory=p,this.cache=Object.create(null)}getCanvas(p,f,x){let U;return void 0!==this.cache[p]?(U=this.cache[p],this.canvasFactory.reset(U,f,x)):(U=this.canvasFactory.create(f,x),this.cache[p]=U),U}delete(p){delete this.cache[p]}clear(){for(const p in this.cache)this.canvasFactory.destroy(this.cache[p]),delete this.cache[p]}}function D(F,p,f,x,U,B,H,X,J,st){const[nt,at,ot,yt,rt,d]=(0,r.getCurrentTransform)(F);if(0===at&&0===ot){const W=Math.round(H*nt+rt),pt=Math.round(X*yt+d),At=Math.abs(Math.round((H+J)*nt+rt)-W)||1,vt=Math.abs(Math.round((X+st)*yt+d)-pt)||1;return F.setTransform(Math.sign(nt),0,0,Math.sign(yt),W,pt),F.drawImage(p,f,x,U,B,0,0,At,vt),F.setTransform(nt,at,ot,yt,rt,d),[At,vt]}if(0===nt&&0===yt){const W=Math.round(X*ot+rt),pt=Math.round(H*at+d),At=Math.abs(Math.round((X+st)*ot+rt)-W)||1,vt=Math.abs(Math.round((H+J)*at+d)-pt)||1;return F.setTransform(0,Math.sign(at),Math.sign(ot),0,W,pt),F.drawImage(p,f,x,U,B,0,0,vt,At),F.setTransform(nt,at,ot,yt,rt,d),[vt,At]}return F.drawImage(p,f,x,U,B,H,X,J,st),[Math.hypot(nt,at)*J,Math.hypot(ot,yt)*st]}class i{constructor(p,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,p,f])}clone(){const p=Object.create(this);return p.clipBox=this.clipBox.slice(),p}setCurrentPoint(p,f){this.x=p,this.y=f}updatePathMinMax(p,f,x){[f,x]=n.Util.applyTransform([f,x],p),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,x),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,x)}updateRectMinMax(p,f){const x=n.Util.applyTransform(f,p),U=n.Util.applyTransform(f.slice(2),p);this.minX=Math.min(this.minX,x[0],U[0]),this.minY=Math.min(this.minY,x[1],U[1]),this.maxX=Math.max(this.maxX,x[0],U[0]),this.maxY=Math.max(this.maxY,x[1],U[1])}updateScalingPathMinMax(p,f){n.Util.scaleMinMax(p,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(p,f,x,U,B,H,X,J,st,nt){const at=n.Util.bezierBoundingBox(f,x,U,B,H,X,J,st);if(nt)return nt[0]=Math.min(nt[0],at[0],at[2]),nt[1]=Math.max(nt[1],at[0],at[2]),nt[2]=Math.min(nt[2],at[1],at[3]),void(nt[3]=Math.max(nt[3],at[1],at[3]));this.updateRectMinMax(p,at)}getPathBoundingBox(){let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const x=[this.minX,this.minY,this.maxX,this.maxY];if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.PathType.FILL)===o.PathType.STROKE){f||(0,n.unreachable)("Stroke bounding box must include transform.");const U=n.Util.singularValueDecompose2dScale(f),B=U[0]*this.lineWidth/2,H=U[1]*this.lineWidth/2;x[0]-=B,x[1]-=H,x[2]+=B,x[3]+=H}return x}updateClipFromPath(){const p=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(p||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(p){this.clipBox=p,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.PathType.FILL,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null))}}function s(F,p){let f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&p instanceof ImageData)return void F.putImageData(p,0,0);const x=p.height,U=p.width,B=x%v,H=(x-B)/v,X=0===B?H:H+1,J=F.createImageData(U,v);let nt,st=0;const at=p.data,ot=J.data;let yt,rt,d,k,M,I,W,j;if(f)switch(f.length){case 1:M=f[0],I=f[0],W=f[0],j=f[0];break;case 4:M=f[0],I=f[1],W=f[2],j=f[3]}if(p.kind===n.ImageKind.GRAYSCALE_1BPP){const pt=at.byteLength,it=new Uint32Array(ot.buffer,0,ot.byteLength>>2),At=it.length,St=U+7>>3;let vt=4294967295,bt=n.FeatureTest.isLittleEndian?4278190080:255;for(j&&255===j[0]&&0===j[255]&&([vt,bt]=[bt,vt]),yt=0;yt<X;yt++){for(d=yt<H?v:B,nt=0,rt=0;rt<d;rt++){const wt=pt-st;let Ct=0;const Rt=wt>St?U:8*wt-7,Ft=-8&Rt;let et=0,tt=0;for(;Ct<Ft;Ct+=8)tt=at[st++],it[nt++]=128&tt?vt:bt,it[nt++]=64&tt?vt:bt,it[nt++]=32&tt?vt:bt,it[nt++]=16&tt?vt:bt,it[nt++]=8&tt?vt:bt,it[nt++]=4&tt?vt:bt,it[nt++]=2&tt?vt:bt,it[nt++]=1&tt?vt:bt;for(;Ct<Rt;Ct++)0===et&&(tt=at[st++],et=128),it[nt++]=tt&et?vt:bt,et>>=1}for(;nt<At;)it[nt++]=0;F.putImageData(J,0,yt*v)}}else if(p.kind===n.ImageKind.RGBA_32BPP){const pt=!!(M||I||W);for(rt=0,k=U*v*4,yt=0;yt<H;yt++){if(ot.set(at.subarray(st,st+k)),st+=k,pt)for(let it=0;it<k;it+=4)M&&(ot[it+0]=M[ot[it+0]]),I&&(ot[it+1]=I[ot[it+1]]),W&&(ot[it+2]=W[ot[it+2]]);F.putImageData(J,0,rt),rt+=v}if(yt<X){if(k=U*B*4,ot.set(at.subarray(st,st+k)),pt)for(let it=0;it<k;it+=4)M&&(ot[it+0]=M[ot[it+0]]),I&&(ot[it+1]=I[ot[it+1]]),W&&(ot[it+2]=W[ot[it+2]]);F.putImageData(J,0,rt)}}else{if(p.kind!==n.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${p.kind}`);{const pt=!!(M||I||W);for(d=v,k=U*d,yt=0;yt<X;yt++){for(yt>=H&&(d=B,k=U*d),nt=0,rt=k;rt--;)ot[nt++]=at[st++],ot[nt++]=at[st++],ot[nt++]=at[st++],ot[nt++]=255;if(pt)for(let it=0;it<nt;it+=4)M&&(ot[it+0]=M[ot[it+0]]),I&&(ot[it+1]=I[ot[it+1]]),W&&(ot[it+2]=W[ot[it+2]]);F.putImageData(J,0,yt*v)}}}}function a(F,p){if(p.bitmap)return void F.drawImage(p.bitmap,0,0);const f=p.height,x=p.width,U=f%v,B=(f-U)/v,H=0===U?B:B+1,X=F.createImageData(x,v);let J=0;const st=p.data,nt=X.data;for(let at=0;at<H;at++){const ot=at<B?v:U;({srcPos:J}=(0,g.applyMaskImageData)({src:st,srcPos:J,dest:nt,width:x,height:ot})),F.putImageData(X,0,at*v)}}function S(F,p){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const x of f)void 0!==F[x]&&(p[x]=F[x]);void 0!==F.setLineDash&&(p.setLineDash(F.getLineDash()),p.lineDashOffset=F.lineDashOffset)}function E(F,p){F.strokeStyle=F.fillStyle=p||"#000000",F.fillRule="nonzero",F.globalAlpha=1,F.lineWidth=1,F.lineCap="butt",F.lineJoin="miter",F.miterLimit=10,F.globalCompositeOperation="source-over",F.font="10px sans-serif",void 0!==F.setLineDash&&(F.setLineDash([]),F.lineDashOffset=0)}function O(F,p,f,x){const U=F.length;for(let B=3;B<U;B+=4){const H=F[B];if(0===H)F[B-3]=p,F[B-2]=f,F[B-1]=x;else if(H<255){const X=255-H;F[B-3]=F[B-3]*H+p*X>>8,F[B-2]=F[B-2]*H+f*X>>8,F[B-1]=F[B-1]*H+x*X>>8}}}function N(F,p,f){const x=F.length;for(let B=3;B<x;B+=4)p[B]=p[B]*(f?f[F[B]]:F[B])*.00392156862745098|0}function K(F,p,f){const x=F.length;for(let U=3;U<x;U+=4){const B=77*F[U-3]+152*F[U-2]+28*F[U-1];p[U]=f?p[U]*f[B>>8]>>8:p[U]*B>>16}}function q(F,p){const f=n.Util.singularValueDecompose2dScale(F);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const x=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==p?p:f[0]<=x||f[1]<=x}const ut=["butt","round","square"],ft=["miter","round","bevel"],z={},$={};var G=new WeakSet;class L{constructor(p,f,x,U,B,H,X){let{optionalContentConfig:J,markedContentStack:st=null}=B;(function A(F,p){(function T(F,p){if(p.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")})(F,p),p.add(F)})(this,G),this.ctx=p,this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=x,this.canvasFactory=U,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=st||[],this.optionalContentConfig=J,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=H,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==X?void 0:X.background)||null,this.foregroundColor=(null==X?void 0:X.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(p){let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof p?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):f}beginDrawing(p){let{transform:f,viewport:x,transparency:U=!1,background:B=null}=p;const H=this.ctx.canvas.width,X=this.ctx.canvas.height,J=B||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const st=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const nt=this.backgroundColor=this.ctx.fillStyle;let at=!0,ot=J;if(this.ctx.fillStyle=J,ot=this.ctx.fillStyle,at="string"==typeof ot&&/^#[0-9A-Fa-f]{6}$/.test(ot),"#000000"===st&&"#ffffff"===nt||st===nt||!at)this.foregroundColor=this.backgroundColor=null;else{const[yt,rt,d]=(0,r.getRGB)(ot),k=I=>(I/=255)<=.03928?I/12.92:((I+.055)/1.055)**2.4,M=Math.round(.2126*k(yt)+.7152*k(rt)+.0722*k(d));this.selectColor=(I,W,j)=>{const pt=.2126*k(I)+.7152*k(W)+.0722*k(j);return Math.round(pt)===M?nt:st}}}if(this.ctx.fillStyle=this.backgroundColor||J,this.ctx.fillRect(0,0,H,X),this.ctx.restore(),U){const st=this.cachedCanvases.getCanvas("transparent",H,X);this.compositeCtx=this.ctx,this.transparentCanvas=st.canvas,this.ctx=st.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),E(this.ctx,this.foregroundColor),f&&(this.ctx.transform(...f),this.outputScaleX=f[0],this.outputScaleY=f[0]),this.ctx.transform(...x.transform),this.viewportScale=x.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(p,f,x,U){const B=p.argsArray,H=p.fnArray;let X=f||0;const J=B.length;if(J===X)return X;const st=J-X>10&&"function"==typeof x,nt=st?Date.now()+15:0;let at=0;const ot=this.commonObjs,yt=this.objs;let rt;for(;;){if(void 0!==U&&X===U.nextBreakPoint)return U.breakIt(X,x),X;if(rt=H[X],rt!==n.OPS.dependency)this[rt].apply(this,B[X]);else for(const d of B[X]){const k=d.startsWith("g_")?ot:yt;if(!k.has(d))return k.get(d,x),X}if(X++,X===J)return X;if(st&&++at>10){if(Date.now()>nt)return x(),X;at=0}}}endDrawing(){u(this,G,R).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const p of this._cachedBitmapsMap.values()){for(const f of p.values())"undefined"!=typeof HTMLCanvasElement&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);p.clear()}this._cachedBitmapsMap.clear()}_scaleImage(p,f){const x=p.width,U=p.height;let nt,at,B=Math.max(Math.hypot(f[0],f[1]),1),H=Math.max(Math.hypot(f[2],f[3]),1),X=x,J=U,st="prescale1";for(;B>2&&X>1||H>2&&J>1;){let ot=X,yt=J;B>2&&X>1&&(ot=Math.ceil(X/2),B/=X/ot),H>2&&J>1&&(yt=Math.ceil(J/2),H/=J/yt),nt=this.cachedCanvases.getCanvas(st,ot,yt),at=nt.context,at.clearRect(0,0,ot,yt),at.drawImage(p,0,0,X,J,0,0,ot,yt),p=nt.canvas,X=ot,J=yt,st="prescale1"===st?"prescale2":"prescale1"}return{img:p,paintWidth:X,paintHeight:J}}_createMaskCanvas(p){const f=this.ctx,{width:x,height:U}=p,B=this.current.fillColor,H=this.current.patternFill,X=(0,r.getCurrentTransform)(f);let J,st,nt,at;if((p.bitmap||p.data)&&p.count>1){const At=p.bitmap||p.data.buffer;st=JSON.stringify(H?X:[X.slice(0,4),B]),J=this._cachedBitmapsMap.get(At),J||(J=new Map,this._cachedBitmapsMap.set(At,J));const St=J.get(st);if(St&&!H)return{canvas:St,offsetX:Math.round(Math.min(X[0],X[2])+X[4]),offsetY:Math.round(Math.min(X[1],X[3])+X[5])};nt=St}nt||(at=this.cachedCanvases.getCanvas("maskCanvas",x,U),a(at.context,p));let ot=n.Util.transform(X,[1/x,0,0,-1/U,0,0]);ot=n.Util.transform(ot,[1,0,0,1,0,-U]);const yt=n.Util.applyTransform([0,0],ot),rt=n.Util.applyTransform([x,U],ot),d=n.Util.normalizeRect([yt[0],yt[1],rt[0],rt[1]]),k=Math.round(d[2]-d[0])||1,M=Math.round(d[3]-d[1])||1,I=this.cachedCanvases.getCanvas("fillCanvas",k,M),W=I.context,j=Math.min(yt[0],rt[0]),pt=Math.min(yt[1],rt[1]);W.translate(-j,-pt),W.transform(...ot),nt||(nt=this._scaleImage(at.canvas,(0,r.getCurrentTransformInverse)(W)),nt=nt.img,J&&H&&J.set(st,nt)),W.imageSmoothingEnabled=q((0,r.getCurrentTransform)(W),p.interpolate),D(W,nt,0,0,nt.width,nt.height,0,0,x,U),W.globalCompositeOperation="source-in";const it=n.Util.transform((0,r.getCurrentTransformInverse)(W),[1,0,0,1,-j,-pt]);return W.fillStyle=H?B.getPattern(f,this,it,o.PathType.FILL):B,W.fillRect(0,0,x,U),J&&!H&&(this.cachedCanvases.delete("fillCanvas"),J.set(st,I.canvas)),{canvas:I.canvas,offsetX:Math.round(j),offsetY:Math.round(pt)}}setLineWidth(p){p!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=p,this.ctx.lineWidth=p}setLineCap(p){this.ctx.lineCap=ut[p]}setLineJoin(p){this.ctx.lineJoin=ft[p]}setMiterLimit(p){this.ctx.miterLimit=p}setDash(p,f){const x=this.ctx;void 0!==x.setLineDash&&(x.setLineDash(p),x.lineDashOffset=f)}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(const[f,x]of p)switch(f){case"LW":this.setLineWidth(x);break;case"LC":this.setLineCap(x);break;case"LJ":this.setLineJoin(x);break;case"ML":this.setMiterLimit(x);break;case"D":this.setDash(x[0],x[1]);break;case"RI":this.setRenderingIntent(x);break;case"FL":this.setFlatness(x);break;case"Font":this.setFont(x[0],x[1]);break;case"CA":this.current.strokeAlpha=x;break;case"ca":this.current.fillAlpha=x,this.ctx.globalAlpha=x;break;case"BM":this.ctx.globalCompositeOperation=x;break;case"SMask":this.current.activeSMask=x?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=x}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const p=this.inSMaskMode;this.current.activeSMask&&!p?this.beginSMaskMode():!this.current.activeSMask&&p&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const U=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=U.context;const B=this.ctx;B.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),S(this.suspendedCtx,B),function m(F,p){if(F._removeMirroring)throw new Error("Context is already forwarding operations.");F.__originalSave=F.save,F.__originalRestore=F.restore,F.__originalRotate=F.rotate,F.__originalScale=F.scale,F.__originalTranslate=F.translate,F.__originalTransform=F.transform,F.__originalSetTransform=F.setTransform,F.__originalResetTransform=F.resetTransform,F.__originalClip=F.clip,F.__originalMoveTo=F.moveTo,F.__originalLineTo=F.lineTo,F.__originalBezierCurveTo=F.bezierCurveTo,F.__originalRect=F.rect,F.__originalClosePath=F.closePath,F.__originalBeginPath=F.beginPath,F._removeMirroring=()=>{F.save=F.__originalSave,F.restore=F.__originalRestore,F.rotate=F.__originalRotate,F.scale=F.__originalScale,F.translate=F.__originalTranslate,F.transform=F.__originalTransform,F.setTransform=F.__originalSetTransform,F.resetTransform=F.__originalResetTransform,F.clip=F.__originalClip,F.moveTo=F.__originalMoveTo,F.lineTo=F.__originalLineTo,F.bezierCurveTo=F.__originalBezierCurveTo,F.rect=F.__originalRect,F.closePath=F.__originalClosePath,F.beginPath=F.__originalBeginPath,delete F._removeMirroring},F.save=function(){p.save(),this.__originalSave()},F.restore=function(){p.restore(),this.__originalRestore()},F.translate=function(x,U){p.translate(x,U),this.__originalTranslate(x,U)},F.scale=function(x,U){p.scale(x,U),this.__originalScale(x,U)},F.transform=function(x,U,B,H,X,J){p.transform(x,U,B,H,X,J),this.__originalTransform(x,U,B,H,X,J)},F.setTransform=function(x,U,B,H,X,J){p.setTransform(x,U,B,H,X,J),this.__originalSetTransform(x,U,B,H,X,J)},F.resetTransform=function(){p.resetTransform(),this.__originalResetTransform()},F.rotate=function(x){p.rotate(x),this.__originalRotate(x)},F.clip=function(x){p.clip(x),this.__originalClip(x)},F.moveTo=function(f,x){p.moveTo(f,x),this.__originalMoveTo(f,x)},F.lineTo=function(f,x){p.lineTo(f,x),this.__originalLineTo(f,x)},F.bezierCurveTo=function(f,x,U,B,H,X){p.bezierCurveTo(f,x,U,B,H,X),this.__originalBezierCurveTo(f,x,U,B,H,X)},F.rect=function(f,x,U,B){p.rect(f,x,U,B),this.__originalRect(f,x,U,B)},F.closePath=function(){p.closePath(),this.__originalClosePath()},F.beginPath=function(){p.beginPath(),this.__originalBeginPath()}}(B,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),S(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(p){this.current.activeSMask&&(p?(p[0]=Math.floor(p[0]),p[1]=Math.floor(p[1]),p[2]=Math.ceil(p[2]),p[3]=Math.ceil(p[3])):p=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function Q(F,p,f,x){const U=x[0],B=x[1],H=x[2]-U,X=x[3]-B;0===H||0===X||(function lt(F,p,f,x,U,B,H,X,J,st,nt){const at=!!B,ot=at?B[0]:0,yt=at?B[1]:0,rt=at?B[2]:0;let d;d="Luminosity"===U?K:N;const M=Math.min(x,Math.ceil(1048576/f));for(let I=0;I<x;I+=M){const W=Math.min(M,x-I),j=F.getImageData(X-st,I+(J-nt),f,W),pt=p.getImageData(X,I+J,f,W);at&&O(j.data,ot,yt,rt),d(j.data,pt.data,H),p.putImageData(pt,X,I+J)}}(p.context,f,H,X,p.subtype,p.backdrop,p.transferMap,U,B,p.offsetX,p.offsetY),F.save(),F.globalAlpha=1,F.globalCompositeOperation="source-over",F.setTransform(1,0,0,1,0,0),F.drawImage(f.canvas,0,0),F.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,p),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(S(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const p=this.current;this.stateStack.push(p),this.current=p.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),S(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(p,f,x,U,B,H){this.ctx.transform(p,f,x,U,B,H),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(p,f,x){const U=this.ctx,B=this.current;let J,st,H=B.x,X=B.y;const nt=(0,r.getCurrentTransform)(U),at=0===nt[0]&&0===nt[3]||0===nt[1]&&0===nt[2],ot=at?x.slice(0):null;for(let yt=0,rt=0,d=p.length;yt<d;yt++)switch(0|p[yt]){case n.OPS.rectangle:H=f[rt++],X=f[rt++];const k=f[rt++],M=f[rt++],I=H+k,W=X+M;U.moveTo(H,X),0===k||0===M?U.lineTo(I,W):(U.lineTo(I,X),U.lineTo(I,W),U.lineTo(H,W)),at||B.updateRectMinMax(nt,[H,X,I,W]),U.closePath();break;case n.OPS.moveTo:H=f[rt++],X=f[rt++],U.moveTo(H,X),at||B.updatePathMinMax(nt,H,X);break;case n.OPS.lineTo:H=f[rt++],X=f[rt++],U.lineTo(H,X),at||B.updatePathMinMax(nt,H,X);break;case n.OPS.curveTo:J=H,st=X,H=f[rt+4],X=f[rt+5],U.bezierCurveTo(f[rt],f[rt+1],f[rt+2],f[rt+3],H,X),B.updateCurvePathMinMax(nt,J,st,f[rt],f[rt+1],f[rt+2],f[rt+3],H,X,ot),rt+=6;break;case n.OPS.curveTo2:J=H,st=X,U.bezierCurveTo(H,X,f[rt],f[rt+1],f[rt+2],f[rt+3]),B.updateCurvePathMinMax(nt,J,st,H,X,f[rt],f[rt+1],f[rt+2],f[rt+3],ot),H=f[rt+2],X=f[rt+3],rt+=4;break;case n.OPS.curveTo3:J=H,st=X,H=f[rt+2],X=f[rt+3],U.bezierCurveTo(f[rt],f[rt+1],H,X,H,X),B.updateCurvePathMinMax(nt,J,st,f[rt],f[rt+1],H,X,H,X,ot),rt+=4;break;case n.OPS.closePath:U.closePath()}at&&B.updateScalingPathMinMax(nt,ot),B.setCurrentPoint(H,X)}closePath(){this.ctx.closePath()}stroke(){let p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const f=this.ctx,x=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof x&&null!=x&&x.getPattern?(f.save(),f.strokeStyle=x.getPattern(f,this,(0,r.getCurrentTransformInverse)(f),o.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),p&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const f=this.ctx,x=this.current.fillColor;let B=!1;this.current.patternFill&&(f.save(),f.fillStyle=x.getPattern(f,this,(0,r.getCurrentTransformInverse)(f),o.PathType.FILL),B=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==H&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),B&&f.restore(),p&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=z}eoClip(){this.pendingClip=$}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const p=this.pendingTextPaths,f=this.ctx;if(void 0!==p){f.save(),f.beginPath();for(const x of p)f.setTransform(...x.transform),f.translate(x.x,x.y),x.addToPath(f,x.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}else f.beginPath()}setCharSpacing(p){this.current.charSpacing=p}setWordSpacing(p){this.current.wordSpacing=p}setHScale(p){this.current.textHScale=p/100}setLeading(p){this.current.leading=-p}setFont(p,f){const x=this.commonObjs.get(p),U=this.current;if(!x)throw new Error(`Can't find font for ${p}`);if(U.fontMatrix=x.fontMatrix||n.FONT_IDENTITY_MATRIX,(0===U.fontMatrix[0]||0===U.fontMatrix[3])&&(0,n.warn)("Invalid font matrix for font "+p),f<0?(f=-f,U.fontDirection=-1):U.fontDirection=1,this.current.font=x,this.current.fontSize=f,x.isType3Font)return;let H="normal";x.black?H="900":x.bold&&(H="bold");const X=x.italic?"italic":"normal",J=`"${x.loadedName||"sans-serif"}", ${x.fallbackName}`;let st=f;f<16?st=16:f>100&&(st=100),this.current.fontSizeScale=f/st,this.ctx.font=`${X} ${H} ${st}px ${J}`}setTextRenderingMode(p){this.current.textRenderingMode=p}setTextRise(p){this.current.textRise=p}moveText(p,f){this.current.x=this.current.lineX+=p,this.current.y=this.current.lineY+=f}setLeadingMoveText(p,f){this.setLeading(-f),this.moveText(p,f)}setTextMatrix(p,f,x,U,B,H){this.current.textMatrix=[p,f,x,U,B,H],this.current.textMatrixScale=Math.hypot(p,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(p,f,x,U){const B=this.ctx,H=this.current,X=H.font,J=H.textRenderingMode,st=H.fontSize/H.fontSizeScale,nt=J&n.TextRenderingMode.FILL_STROKE_MASK,at=!!(J&n.TextRenderingMode.ADD_TO_PATH_FLAG),ot=H.patternFill&&!X.missingFile;let yt;(X.disableFontFace||at||ot)&&(yt=X.getPathGenerator(this.commonObjs,p)),X.disableFontFace||ot?(B.save(),B.translate(f,x),B.beginPath(),yt(B,st),U&&B.setTransform(...U),(nt===n.TextRenderingMode.FILL||nt===n.TextRenderingMode.FILL_STROKE)&&B.fill(),(nt===n.TextRenderingMode.STROKE||nt===n.TextRenderingMode.FILL_STROKE)&&B.stroke(),B.restore()):((nt===n.TextRenderingMode.FILL||nt===n.TextRenderingMode.FILL_STROKE)&&B.fillText(p,f,x),(nt===n.TextRenderingMode.STROKE||nt===n.TextRenderingMode.FILL_STROKE)&&B.strokeText(p,f,x)),at&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(B),x:f,y:x,fontSize:st,addToPath:yt})}get isFontSubpixelAAEnabled(){const{context:p}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);p.scale(1.5,1),p.fillText("I",0,10);const f=p.getImageData(0,0,10,10).data;let x=!1;for(let U=3;U<f.length;U+=4)if(f[U]>0&&f[U]<255){x=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",x)}showText(p){const f=this.current,x=f.font;if(x.isType3Font)return this.showType3Text(p);const U=f.fontSize;if(0===U)return;const B=this.ctx,H=f.fontSizeScale,X=f.charSpacing,J=f.wordSpacing,st=f.fontDirection,nt=f.textHScale*st,at=p.length,ot=x.vertical,yt=ot?1:-1,rt=x.defaultVMetrics,d=U*f.fontMatrix[0],k=f.textRenderingMode===n.TextRenderingMode.FILL&&!x.disableFontFace&&!f.patternFill;let M;if(B.save(),B.transform(...f.textMatrix),B.translate(f.x,f.y+f.textRise),B.scale(nt,st>0?-1:1),f.patternFill){B.save();const it=f.fillColor.getPattern(B,this,(0,r.getCurrentTransformInverse)(B),o.PathType.FILL);M=(0,r.getCurrentTransform)(B),B.restore(),B.fillStyle=it}let I=f.lineWidth;const W=f.textMatrixScale;if(0===W||0===I){const it=f.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(it===n.TextRenderingMode.STROKE||it===n.TextRenderingMode.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=W;if(1!==H&&(B.scale(H,H),I/=H),B.lineWidth=I,x.isInvalidPDFjsFont){const it=[];let At=0;for(const St of p)it.push(St.unicode),At+=St.width;return B.fillText(it.join(""),0,0),f.x+=At*d*nt,B.restore(),void this.compose()}let pt,j=0;for(pt=0;pt<at;++pt){const it=p[pt];if("number"==typeof it){j+=yt*it*U/1e3;continue}let At=!1;const St=(it.isSpace?J:0)+X,vt=it.fontChar,bt=it.accent;let wt,Ct,Ft,Rt=it.width;if(ot){const et=it.vmetric||rt,tt=-(it.vmetric?et[1]:.5*Rt)*d;Rt=et?-et[0]:Rt,wt=tt/H,Ct=(j+et[2]*d)/H}else wt=j/H,Ct=0;if(x.remeasure&&Rt>0){const et=1e3*B.measureText(vt).width/U*H;if(Rt<et&&this.isFontSubpixelAAEnabled){const tt=Rt/et;At=!0,B.save(),B.scale(tt,1),wt/=tt}else Rt!==et&&(wt+=(Rt-et)/2e3*U/H)}this.contentVisible&&(it.isInFont||x.missingFile)&&(k&&!bt?B.fillText(vt,wt,Ct):(this.paintChar(vt,wt,Ct,M),bt&&this.paintChar(bt.fontChar,wt+U*bt.offset.x/H,Ct-U*bt.offset.y/H,M))),Ft=ot?Rt*d-St*st:Rt*d+St*st,j+=Ft,At&&B.restore()}ot?f.y-=j:f.x+=j*nt,B.restore(),this.compose()}showType3Text(p){const f=this.ctx,x=this.current,U=x.font,B=x.fontSize,H=x.fontDirection,X=U.vertical?1:-1,J=x.charSpacing,st=x.wordSpacing,nt=x.textHScale*H,at=x.fontMatrix||n.FONT_IDENTITY_MATRIX,ot=p.length;let rt,d,k,M;if(x.textRenderingMode!==n.TextRenderingMode.INVISIBLE&&0!==B){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(...x.textMatrix),f.translate(x.x,x.y),f.scale(nt,H),rt=0;rt<ot;++rt){if(d=p[rt],"number"==typeof d){M=X*d*B/1e3,this.ctx.translate(M,0),x.x+=M*nt;continue}const I=(d.isSpace?st:0)+J,W=U.charProcOperatorList[d.operatorListId];W?(this.contentVisible&&(this.processingType3=d,this.save(),f.scale(B,B),f.transform(...at),this.executeOperatorList(W),this.restore()),k=n.Util.applyTransform([d.width,0],at)[0]*B+I,f.translate(k,0),x.x+=k*nt):(0,n.warn)(`Type3 character "${d.operatorListId}" is not available.`)}f.restore(),this.processingType3=null}}setCharWidth(p,f){}setCharWidthAndBounds(p,f,x,U,B,H){this.ctx.rect(x,U,B-x,H-U),this.ctx.clip(),this.endPath()}getColorN_Pattern(p){let f;if("TilingPattern"===p[0]){const x=p[1],U=this.baseTransform||(0,r.getCurrentTransform)(this.ctx);f=new o.TilingPattern(p,x,this.ctx,{createCanvasGraphics:H=>new L(H,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},U)}else f=this._getPattern(p[1],p[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(p,f,x){var U;const B=(null===(U=this.selectColor)||void 0===U?void 0:U.call(this,p,f,x))||n.Util.makeHexColor(p,f,x);this.ctx.strokeStyle=B,this.current.strokeColor=B}setFillRGBColor(p,f,x){var U;const B=(null===(U=this.selectColor)||void 0===U?void 0:U.call(this,p,f,x))||n.Util.makeHexColor(p,f,x);this.ctx.fillStyle=B,this.current.fillColor=B,this.current.patternFill=!1}_getPattern(p){let x,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(p)?x=this.cachedPatterns.get(p):(x=(0,o.getShadingPattern)(this.objs.get(p)),this.cachedPatterns.set(p,x)),f&&(x.matrix=f),x}shadingFill(p){if(!this.contentVisible)return;const f=this.ctx;this.save();const x=this._getPattern(p);f.fillStyle=x.getPattern(f,this,(0,r.getCurrentTransformInverse)(f),o.PathType.SHADING);const U=(0,r.getCurrentTransformInverse)(f);if(U){const B=f.canvas,H=B.width,X=B.height,J=n.Util.applyTransform([0,0],U),st=n.Util.applyTransform([0,X],U),nt=n.Util.applyTransform([H,0],U),at=n.Util.applyTransform([H,X],U),ot=Math.min(J[0],st[0],nt[0],at[0]),yt=Math.min(J[1],st[1],nt[1],at[1]),rt=Math.max(J[0],st[0],nt[0],at[0]),d=Math.max(J[1],st[1],nt[1],at[1]);this.ctx.fillRect(ot,yt,rt-ot,d-yt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(p,f){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(p)&&6===p.length&&this.transform(...p),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),f)&&(this.ctx.rect(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),f),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(p){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;p.isolated||(0,n.info)("TODO: Support non-isolated groups."),p.knockout&&(0,n.warn)("Knockout groups not supported.");const x=(0,r.getCurrentTransform)(f);if(p.matrix&&f.transform(...p.matrix),!p.bbox)throw new Error("Bounding box is required.");let U=n.Util.getAxialAlignedBoundingBox(p.bbox,(0,r.getCurrentTransform)(f));U=n.Util.intersect(U,[0,0,f.canvas.width,f.canvas.height])||[0,0,0,0];const H=Math.floor(U[0]),X=Math.floor(U[1]);let J=Math.max(Math.ceil(U[2])-H,1),st=Math.max(Math.ceil(U[3])-X,1),nt=1,at=1;J>h&&(nt=J/h,J=h),st>h&&(at=st/h,st=h),this.current.startNewPathAndClipBox([0,0,J,st]);let ot="groupAt"+this.groupLevel;p.smask&&(ot+="_smask_"+this.smaskCounter++%2);const yt=this.cachedCanvases.getCanvas(ot,J,st),rt=yt.context;rt.scale(1/nt,1/at),rt.translate(-H,-X),rt.transform(...x),p.smask?this.smaskStack.push({canvas:yt.canvas,context:rt,offsetX:H,offsetY:X,scaleX:nt,scaleY:at,subtype:p.smask.subtype,backdrop:p.smask.backdrop,transferMap:p.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(H,X),f.scale(nt,at),f.save()),S(f,rt),this.ctx=rt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(p){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,x=this.groupStack.pop();if(this.ctx=x,this.ctx.imageSmoothingEnabled=!1,p.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const U=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...U);const B=n.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],U);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(B)}}beginAnnotation(p,f,x,U,B){if(u(this,G,R).call(this),E(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(f)&&4===f.length){const H=f[2]-f[0],X=f[3]-f[1];if(B&&this.annotationCanvasMap){(x=x.slice())[4]-=f[0],x[5]-=f[1],(f=f.slice())[0]=f[1]=0,f[2]=H,f[3]=X;const[J,st]=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:nt}=this,at=Math.ceil(H*this.outputScaleX*nt),ot=Math.ceil(X*this.outputScaleY*nt);this.annotationCanvas=this.canvasFactory.create(at,ot);const{canvas:yt,context:rt}=this.annotationCanvas;this.annotationCanvasMap.set(p,yt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=rt,this.ctx.setTransform(J,0,0,-st,0,X*st),E(this.ctx,this.foregroundColor)}else E(this.ctx,this.foregroundColor),this.ctx.rect(f[0],f[1],H,X),this.ctx.clip(),this.endPath()}this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...x),this.transform(...U)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(p){if(!this.contentVisible)return;const f=p.count;(p=this.getObject(p.data,p)).count=f;const x=this.ctx,U=this.processingType3;if(U&&(void 0===U.compiled&&(U.compiled=function P(F){const{width:p,height:f}=F;if(p>1e3||f>1e3)return null;const U=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),B=p+1;let X,J,st,H=new Uint8Array(B*(f+1));const nt=p+7&-8;let at=new Uint8Array(nt*f),ot=0;for(const M of F.data){let I=128;for(;I>0;)at[ot++]=M&I?0:255,I>>=1}let yt=0;for(ot=0,0!==at[ot]&&(H[0]=1,++yt),J=1;J<p;J++)at[ot]!==at[ot+1]&&(H[J]=at[ot]?2:1,++yt),ot++;for(0!==at[ot]&&(H[J]=2,++yt),X=1;X<f;X++){ot=X*nt,st=X*B,at[ot-nt]!==at[ot]&&(H[st]=at[ot]?1:8,++yt);let M=(at[ot]?4:0)+(at[ot-nt]?8:0);for(J=1;J<p;J++)M=(M>>2)+(at[ot+1]?4:0)+(at[ot-nt+1]?8:0),U[M]&&(H[st+J]=U[M],++yt),ot++;if(at[ot-nt]!==at[ot]&&(H[st+J]=at[ot]?2:4,++yt),yt>1e3)return null}for(ot=nt*(f-1),st=X*B,0!==at[ot]&&(H[st]=8,++yt),J=1;J<p;J++)at[ot]!==at[ot+1]&&(H[st+J]=at[ot]?4:8,++yt),ot++;if(0!==at[ot]&&(H[st+J]=4,++yt),yt>1e3)return null;const rt=new Int32Array([0,B,-1,0,-B,0,0,0,1]),d=new Path2D;for(X=0;yt&&X<=f;X++){let M=X*B;const I=M+p;for(;M<I&&!H[M];)M++;if(M===I)continue;d.moveTo(M%B,X);const W=M;let j=H[M];do{const pt=rt[j];do{M+=pt}while(!H[M]);const it=H[M];5!==it&&10!==it?(j=it,H[M]=0):(j=it&51*j>>4,H[M]&=j>>2|j<<2),d.lineTo(M%B,M/B|0),H[M]||--yt}while(W!==M);--X}return at=null,H=null,function(M){M.save(),M.scale(1/p,-1/f),M.translate(0,-f),M.fill(d),M.beginPath(),M.restore()}}(p)),U.compiled))return void U.compiled(x);const B=this._createMaskCanvas(p),H=B.canvas;x.save(),x.setTransform(1,0,0,1,0,0),x.drawImage(H,B.offsetX,B.offsetY),x.restore(),this.compose()}paintImageMaskXObjectRepeat(p,f){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,B=arguments.length>4?arguments[4]:void 0,H=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;p=this.getObject(p.data,p);const X=this.ctx;X.save();const J=(0,r.getCurrentTransform)(X);X.transform(f,x,U,B,0,0);const st=this._createMaskCanvas(p);X.setTransform(1,0,0,1,st.offsetX-J[4],st.offsetY-J[5]);for(let nt=0,at=H.length;nt<at;nt+=2){const ot=n.Util.transform(J,[f,x,U,B,H[nt],H[nt+1]]),[yt,rt]=n.Util.applyTransform([0,0],ot);X.drawImage(st.canvas,yt,rt)}X.restore(),this.compose()}paintImageMaskXObjectGroup(p){if(!this.contentVisible)return;const f=this.ctx,x=this.current.fillColor,U=this.current.patternFill;for(const B of p){const{data:H,width:X,height:J,transform:st}=B,nt=this.cachedCanvases.getCanvas("maskCanvas",X,J),at=nt.context;at.save(),a(at,this.getObject(H,B)),at.globalCompositeOperation="source-in",at.fillStyle=U?x.getPattern(at,this,(0,r.getCurrentTransformInverse)(f),o.PathType.FILL):x,at.fillRect(0,0,X,J),at.restore(),f.save(),f.transform(...st),f.scale(1,-1),D(f,nt.canvas,0,0,X,J,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(p){if(!this.contentVisible)return;const f=this.getObject(p);f?this.paintInlineImageXObject(f):(0,n.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(p,f,x,U){if(!this.contentVisible)return;const B=this.getObject(p);if(!B)return void(0,n.warn)("Dependent image isn't ready yet");const H=B.width,X=B.height,J=[];for(let st=0,nt=U.length;st<nt;st+=2)J.push({transform:[f,0,0,x,U[st],U[st+1]],x:0,y:0,w:H,h:X});this.paintInlineImageXObjectGroup(B,J)}paintInlineImageXObject(p){if(!this.contentVisible)return;const f=p.width,x=p.height,U=this.ctx;let B;if(this.save(),U.scale(1/f,-1/x),"function"==typeof HTMLElement&&p instanceof HTMLElement||!p.data)B=p;else{const X=this.cachedCanvases.getCanvas("inlineImage",f,x);s(X.context,p,this.current.transferMaps),B=X.canvas}const H=this._scaleImage(B,(0,r.getCurrentTransformInverse)(U));U.imageSmoothingEnabled=q((0,r.getCurrentTransform)(U),p.interpolate),D(U,H.img,0,0,H.paintWidth,H.paintHeight,0,-x,f,x),this.compose(),this.restore()}paintInlineImageXObjectGroup(p,f){if(!this.contentVisible)return;const x=this.ctx,H=this.cachedCanvases.getCanvas("inlineImage",p.width,p.height);s(H.context,p,this.current.transferMaps);for(const J of f)x.save(),x.transform(...J.transform),x.scale(1,-1),D(x,H.canvas,J.x,J.y,J.w,J.h,0,-1,1,1),x.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(p){}markPointProps(p,f){}beginMarkedContent(p){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(p,f){this.markedContentStack.push("OC"===p?{visible:this.optionalContentConfig.isVisible(f)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(p){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(p);const x=this.ctx;this.pendingClip&&(f||(this.pendingClip===$?x.clip("evenodd"):x.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),x.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const p=(0,r.getCurrentTransform)(this.ctx);if(0===p[1]&&0===p[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(p[0]),Math.abs(p[3]));else{const f=Math.abs(p[0]*p[3]-p[2]*p[1]),x=Math.hypot(p[0],p[2]),U=Math.hypot(p[1],p[3]);this._cachedGetSinglePixelWidth=Math.max(x,U)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:p}=this.current,f=(0,r.getCurrentTransform)(this.ctx);let x,U;if(0===f[1]&&0===f[2]){const B=Math.abs(f[0]),H=Math.abs(f[3]);if(0===p)x=1/B,U=1/H;else{const X=B*p,J=H*p;x=X<1?1/X:1,U=J<1?1/J:1}}else{const B=Math.abs(f[0]*f[3]-f[2]*f[1]),H=Math.hypot(f[0],f[1]),X=Math.hypot(f[2],f[3]);if(0===p)x=X/B,U=H/B;else{const J=p*B;x=X>J?X/J:1,U=H>J?H/J:1}}this._cachedScaleForStroking=[x,U]}return this._cachedScaleForStroking}rescaleAndStroke(p){const{ctx:f}=this,{lineWidth:x}=this.current,[U,B]=this.getScaleForStroking();if(f.lineWidth=x||1,1===U&&1===B)return void f.stroke();let H,X,J;p&&(H=(0,r.getCurrentTransform)(f),X=f.getLineDash().slice(),J=f.lineDashOffset),f.scale(U,B);const st=Math.max(U,B);f.setLineDash(f.getLineDash().map(nt=>nt/st)),f.lineDashOffset/=st,f.stroke(),p&&(f.setTransform(...H),f.setLineDash(X),f.lineDashOffset=J)}isContentVisible(){for(let p=this.markedContentStack.length-1;p>=0;p--)if(!this.markedContentStack[p].visible)return!1;return!0}}function R(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}e.CanvasGraphics=L;for(const F in n.OPS)void 0!==L.prototype[F]&&(L.prototype[n.OPS[F]]=L.prototype[F])},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function C(v){switch(v[0]){case"RadialAxial":return new T(v);case"Mesh":return new w(v);case"Dummy":return new h}throw new Error(`Unknown IR type: ${v[0]}`)};var n=t(1),r=t(139);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function g(v,m){if(!m)return;const _=m[2]-m[0],D=m[3]-m[1],P=new Path2D;P.rect(m[0],m[1],_,D),v.clip(P)}e.PathType=o;class A{constructor(){this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class T extends A{constructor(m){super(),this._type=m[1],this._bbox=m[2],this._colorStops=m[3],this._p0=m[4],this._p1=m[5],this._r0=m[6],this._r1=m[7],this.matrix=null}_createGradient(m){let _;"axial"===this._type?_=m.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(_=m.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const D of this._colorStops)_.addColorStop(D[0],D[1]);return _}getPattern(m,_,D,P){let i;if(P===o.STROKE||P===o.FILL){const s=_.current.getClippedPathBoundingBox(P,(0,r.getCurrentTransform)(m))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,S=Math.ceil(s[3]-s[1])||1,E=_.cachedCanvases.getCanvas("pattern",a,S,!0),O=E.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-s[0],-s[1]),D=n.Util.transform(D,[1,0,0,1,s[0],s[1]]),O.transform(..._.baseTransform),this.matrix&&O.transform(...this.matrix),g(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),i=m.createPattern(E.canvas,"no-repeat");const N=new DOMMatrix(D);i.setTransform(N)}else g(m,this._bbox),i=this._createGradient(m);return i}}function u(v,m,_,D,P,i,s,a){const S=m.coords,E=m.colors,O=v.data,N=4*v.width;let K;S[_+1]>S[D+1]&&(K=_,_=D,D=K,K=i,i=s,s=K),S[D+1]>S[P+1]&&(K=D,D=P,P=K,K=s,s=a,a=K),S[_+1]>S[D+1]&&(K=_,_=D,D=K,K=i,i=s,s=K);const lt=(S[_]+m.offsetX)*m.scaleX,Q=(S[_+1]+m.offsetY)*m.scaleY,q=(S[D]+m.offsetX)*m.scaleX,ut=(S[D+1]+m.offsetY)*m.scaleY,ft=(S[P]+m.offsetX)*m.scaleX,z=(S[P+1]+m.offsetY)*m.scaleY;if(Q>=z)return;const $=E[i],G=E[i+1],L=E[i+2],R=E[s],F=E[s+1],p=E[s+2],f=E[a],x=E[a+1],U=E[a+2],B=Math.round(Q),H=Math.round(z);let X,J,st,nt,at,ot,yt,rt;for(let d=B;d<=H;d++){if(d<ut){let j;j=d<Q?0:(Q-d)/(Q-ut),X=lt-(lt-q)*j,J=$-($-R)*j,st=G-(G-F)*j,nt=L-(L-p)*j}else{let j;j=d>z?1:ut===z?0:(ut-d)/(ut-z),X=q-(q-ft)*j,J=R-(R-f)*j,st=F-(F-x)*j,nt=p-(p-U)*j}let k;k=d<Q?0:d>z?1:(Q-d)/(Q-z),at=lt-(lt-ft)*k,ot=$-($-f)*k,yt=G-(G-x)*k,rt=L-(L-U)*k;const M=Math.round(Math.min(X,at)),I=Math.round(Math.max(X,at));let W=N*d+4*M;for(let j=M;j<=I;j++)k=(X-j)/(X-at),k<0?k=0:k>1&&(k=1),O[W++]=J-(J-ot)*k|0,O[W++]=st-(st-yt)*k|0,O[W++]=nt-(nt-rt)*k|0,O[W++]=255}}function y(v,m,_){const D=m.coords,P=m.colors;let i,s;switch(m.type){case"lattice":const a=m.verticesPerRow,S=Math.floor(D.length/a)-1,E=a-1;for(i=0;i<S;i++){let O=i*a;for(let N=0;N<E;N++,O++)u(v,_,D[O],D[O+1],D[O+a],P[O],P[O+1],P[O+a]),u(v,_,D[O+a+1],D[O+1],D[O+a],P[O+a+1],P[O+1],P[O+a])}break;case"triangles":for(i=0,s=D.length;i<s;i+=3)u(v,_,D[i],D[i+1],D[i+2],P[i],P[i+1],P[i+2]);break;default:throw new Error("illegal figure")}}class w extends A{constructor(m){super(),this._coords=m[2],this._colors=m[3],this._figures=m[4],this._bounds=m[5],this._bbox=m[7],this._background=m[8],this.matrix=null}_createMeshCanvas(m,_,D){const a=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),E=Math.ceil(this._bounds[2])-a,O=Math.ceil(this._bounds[3])-S,N=Math.min(Math.ceil(Math.abs(E*m[0]*1.1)),3e3),K=Math.min(Math.ceil(Math.abs(O*m[1]*1.1)),3e3),lt=E/N,Q=O/K,q={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-S,scaleX:1/lt,scaleY:1/Q},z=D.getCanvas("mesh",N+4,K+4,!1),$=z.context,G=$.createImageData(N,K);if(_){const R=G.data;for(let F=0,p=R.length;F<p;F+=4)R[F]=_[0],R[F+1]=_[1],R[F+2]=_[2],R[F+3]=255}for(const R of this._figures)y(G,R,q);return $.putImageData(G,2,2),{canvas:z.canvas,offsetX:a-2*lt,offsetY:S-2*Q,scaleX:lt,scaleY:Q}}getPattern(m,_,D,P){let i;if(g(m,this._bbox),P===o.SHADING)i=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(m));else if(i=n.Util.singularValueDecompose2dScale(_.baseTransform),this.matrix){const a=n.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*a[0],i[1]*a[1]]}const s=this._createMeshCanvas(i,P===o.SHADING?null:this._background,_.cachedCanvases);return P!==o.SHADING&&(m.setTransform(..._.baseTransform),this.matrix&&m.transform(...this.matrix)),m.translate(s.offsetX,s.offsetY),m.scale(s.scaleX,s.scaleY),m.createPattern(s.canvas,"no-repeat")}}class h extends A{getPattern(){return"hotpink"}}class c{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(m,_,D,P,i){this.operatorList=m[2],this.matrix=m[3]||[1,0,0,1,0,0],this.bbox=m[4],this.xstep=m[5],this.ystep=m[6],this.paintType=m[7],this.tilingType=m[8],this.color=_,this.ctx=D,this.canvasGraphicsFactory=P,this.baseTransform=i}createPatternCanvas(m){const _=this.operatorList,D=this.bbox,P=this.xstep,i=this.ystep,s=this.paintType,S=this.color,E=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+this.tilingType);const O=D[0],N=D[1],K=D[2],lt=D[3],Q=n.Util.singularValueDecompose2dScale(this.matrix),q=n.Util.singularValueDecompose2dScale(this.baseTransform),ut=[Q[0]*q[0],Q[1]*q[1]],ft=this.getSizeAndScale(P,this.ctx.canvas.width,ut[0]),z=this.getSizeAndScale(i,this.ctx.canvas.height,ut[1]),$=m.cachedCanvases.getCanvas("pattern",ft.size,z.size,!0),G=$.context,L=E.createCanvasGraphics(G);L.groupLevel=m.groupLevel,this.setFillAndStrokeStyleToContext(L,s,S);let R=O,F=N,p=K,f=lt;return O<0&&(R=0,p+=Math.abs(O)),N<0&&(F=0,f+=Math.abs(N)),G.translate(-ft.scale*R,-z.scale*F),L.transform(ft.scale,0,0,z.scale,0,0),G.save(),this.clipBbox(L,R,F,p,f),L.baseTransform=(0,r.getCurrentTransform)(L.ctx),L.executeOperatorList(_),L.endDrawing(),{canvas:$.canvas,scaleX:ft.scale,scaleY:z.scale,offsetX:R,offsetY:F}}getSizeAndScale(m,_,D){m=Math.abs(m);const P=Math.max(c.MAX_PATTERN_SIZE,_);let i=Math.ceil(m*D);return i>=P?i=P:D=i/m,{scale:D,size:i}}clipBbox(m,_,D,P,i){m.ctx.rect(_,D,P-_,i-D),m.current.updateRectMinMax((0,r.getCurrentTransform)(m.ctx),[_,D,P,i]),m.clip(),m.endPath()}setFillAndStrokeStyleToContext(m,_,D){const P=m.ctx,i=m.current;switch(_){case 1:const s=this.ctx;P.fillStyle=s.fillStyle,P.strokeStyle=s.strokeStyle,i.fillColor=s.fillStyle,i.strokeColor=s.strokeStyle;break;case 2:const a=n.Util.makeHexColor(D[0],D[1],D[2]);P.fillStyle=a,P.strokeStyle=a,i.fillColor=a,i.strokeColor=a;break;default:throw new n.FormatError(`Unsupported paint type: ${_}`)}}getPattern(m,_,D,P){let i=D;P!==o.SHADING&&(i=n.Util.transform(i,_.baseTransform),this.matrix&&(i=n.Util.transform(i,this.matrix)));const s=this.createPatternCanvas(_);let a=new DOMMatrix(i);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const S=m.createPattern(s.canvas,"repeat");return S.setTransform(a),S}}e.TilingPattern=c},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=function r(o){let{src:g,srcPos:A=0,dest:T,destPos:u=0,width:y,height:w,inverseDecode:h=!1}=o;const C=n.FeatureTest.isLittleEndian?4278190080:255,[l,c]=h?[0,C]:[C,0],v=y>>3,m=7&y,_=g.length;T=new Uint32Array(T.buffer);for(let D=0;D<w;D++){for(const i=A+v;A<i;A++){const s=A<_?g[A]:255;T[u++]=128&s?c:l,T[u++]=64&s?c:l,T[u++]=32&s?c:l,T[u++]=16&s?c:l,T[u++]=8&s?c:l,T[u++]=4&s?c:l,T[u++]=2&s?c:l,T[u++]=1&s?c:l}if(0===m)continue;const P=A<_?g[A++]:255;for(let i=0;i<m;i++)T[u++]=P&1<<7-i?c:l}return{srcPos:A,destPos:u}};var n=t(1)},(b,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const t=Object.create(null);e.GlobalWorkerOptions=t,t.workerPort=null,t.workerSrc=""},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=t(1);function g(T){switch(T instanceof Error||"object"==typeof T&&null!==T||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new n.AbortException(T.message);case"MissingPDFException":return new n.MissingPDFException(T.message);case"PasswordException":return new n.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new n.UnknownErrorException(T.message,T.details);default:return new n.UnknownErrorException(T.message,T.toString())}}e.MessageHandler=class A{constructor(u,y,w){this.sourceName=u,this.targetName=y,this.comObj=w,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=h=>{const C=h.data;if(C.targetName!==this.sourceName)return;if(C.stream)return void this._processStreamMessage(C);if(C.callback){const c=C.callbackId,v=this.callbackCapabilities[c];if(!v)throw new Error(`Cannot resolve callback ${c}`);if(delete this.callbackCapabilities[c],1===C.callback)v.resolve(C.data);else{if(2!==C.callback)throw new Error("Unexpected callback case");v.reject(g(C.reason))}return}const l=this.actionHandler[C.action];if(!l)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const c=this.sourceName,v=C.sourceName;new Promise(function(m){m(l(C.data))}).then(function(m){w.postMessage({sourceName:c,targetName:v,callback:1,callbackId:C.callbackId,data:m})},function(m){w.postMessage({sourceName:c,targetName:v,callback:2,callbackId:C.callbackId,reason:g(m)})})}else C.streamId?this._createStreamSink(C):l(C.data)},w.addEventListener("message",this._onComObjOnMessage)}on(u,y){const w=this.actionHandler;if(w[u])throw new Error(`There is already an actionName called "${u}"`);w[u]=y}send(u,y,w){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:y},w)}sendWithPromise(u,y,w){const h=this.callbackId++,C=(0,n.createPromiseCapability)();this.callbackCapabilities[h]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:h,data:y},w)}catch(l){C.reject(l)}return C.promise}sendWithStream(u,y,w,h){const C=this.streamId++,l=this.sourceName,c=this.targetName,v=this.comObj;return new ReadableStream({start:m=>{const _=(0,n.createPromiseCapability)();return this.streamControllers[C]={controller:m,startCall:_,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:l,targetName:c,action:u,streamId:C,data:y,desiredSize:m.desiredSize},h),_.promise},pull:m=>{const _=(0,n.createPromiseCapability)();return this.streamControllers[C].pullCall=_,v.postMessage({sourceName:l,targetName:c,stream:6,streamId:C,desiredSize:m.desiredSize}),_.promise},cancel:m=>{(0,n.assert)(m instanceof Error,"cancel must have a valid reason");const _=(0,n.createPromiseCapability)();return this.streamControllers[C].cancelCall=_,this.streamControllers[C].isClosed=!0,v.postMessage({sourceName:l,targetName:c,stream:1,streamId:C,reason:g(m)}),_.promise}},w)}_createStreamSink(u){const y=u.streamId,w=this.sourceName,h=u.sourceName,C=this.comObj,l=this,c=this.actionHandler[u.action],v={enqueue(m){let D=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,P>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),C.postMessage({sourceName:w,targetName:h,stream:4,streamId:y,chunk:m},D)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:w,targetName:h,stream:3,streamId:y}),delete l.streamSinks[y])},error(m){(0,n.assert)(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:w,targetName:h,stream:5,streamId:y,reason:g(m)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[y]=v,new Promise(function(m){m(c(u.data,v))}).then(function(){C.postMessage({sourceName:w,targetName:h,stream:8,streamId:y,success:!0})},function(m){C.postMessage({sourceName:w,targetName:h,stream:8,streamId:y,reason:g(m)})})}_processStreamMessage(u){const y=u.streamId,w=this.sourceName,h=u.sourceName,C=this.comObj,l=this.streamControllers[y],c=this.streamSinks[y];switch(u.stream){case 8:u.success?l.startCall.resolve():l.startCall.reject(g(u.reason));break;case 7:u.success?l.pullCall.resolve():l.pullCall.reject(g(u.reason));break;case 6:if(!c){C.postMessage({sourceName:w,targetName:h,stream:7,streamId:y,success:!0});break}c.desiredSize<=0&&u.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=u.desiredSize,new Promise(function(v){v(c.onPull&&c.onPull())}).then(function(){C.postMessage({sourceName:w,targetName:h,stream:7,streamId:y,success:!0})},function(v){C.postMessage({sourceName:w,targetName:h,stream:7,streamId:y,reason:g(v)})});break;case 4:if((0,n.assert)(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(u.chunk);break;case 3:if((0,n.assert)(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this._deleteStreamController(l,y);break;case 5:(0,n.assert)(l,"error should have stream controller"),l.controller.error(g(u.reason)),this._deleteStreamController(l,y);break;case 2:u.success?l.cancelCall.resolve():l.cancelCall.reject(g(u.reason)),this._deleteStreamController(l,y);break;case 1:if(!c)break;new Promise(function(v){v(c.onCancel&&c.onCancel(g(u.reason)))}).then(function(){C.postMessage({sourceName:w,targetName:h,stream:2,streamId:y,success:!0})},function(v){C.postMessage({sourceName:w,targetName:h,stream:2,streamId:y,reason:g(v)})}),c.sinkCapability.reject(g(u.reason)),c.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,y){await Promise.allSettled([u.startCall&&u.startCall.promise,u.pullCall&&u.pullCall.promise,u.cancelCall&&u.cancelCall.promise]),delete this.streamControllers[y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=t(1);function r(l,c,v){(function o(l,c){if(c.has(l))throw new TypeError("Cannot initialize the same private elements twice on an object")})(l,c),c.set(l,v)}function g(l,c){return function A(l,c){return c.get?c.get.call(l):c.value}(l,u(l,c,"get"))}function T(l,c,v){return function y(l,c,v){if(c.set)c.set.call(l,v);else{if(!c.writable)throw new TypeError("attempted to set read only private field");c.value=v}}(l,u(l,c,"set"),v),v}function u(l,c,v){if(!c.has(l))throw new TypeError("attempted to "+v+" private field on non-instance");return c.get(l)}var w=new WeakMap,h=new WeakMap;e.Metadata=class C{constructor(c){let{parsedData:v,rawData:m}=c;r(this,w,{writable:!0,value:void 0}),r(this,h,{writable:!0,value:void 0}),T(this,w,v),T(this,h,m)}getRaw(){return g(this,h)}get(c){var v;return null!=(v=g(this,w).get(c))?v:null}getAll(){return(0,n.objectFromMap)(g(this,w))}has(c){return g(this,w).has(c)}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=t(1),r=t(141);function g(S,E,O){if(!E.has(S))throw new TypeError("attempted to get private field on non-instance");return O}function A(S,E,O){T(S,E),E.set(S,O)}function T(S,E){if(E.has(S))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(S,E,O){return function y(S,E,O){if(E.set)E.set.call(S,O);else{if(!E.writable)throw new TypeError("attempted to set read only private field");E.value=O}}(S,h(S,E,"set"),O),O}function w(S,E){return function C(S,E){return E.get?E.get.call(S):E.value}(S,h(S,E,"get"))}function h(S,E,O){if(!E.has(S))throw new TypeError("attempted to "+O+" private field on non-instance");return E.get(S)}const l=Symbol("INTERNAL");var c=new WeakMap;class v{constructor(E,O){A(this,c,{writable:!0,value:!0}),this.name=E,this.intent=O}get visible(){return w(this,c)}_setVisible(E,O){E!==l&&(0,n.unreachable)("Internal method `_setVisible` called."),u(this,c,O)}}var m=new WeakMap,_=new WeakMap,D=new WeakMap,P=new WeakMap,i=new WeakSet;function a(S){const E=S.length;if(E<2)return!0;const O=S[0];for(let N=1;N<E;N++){const K=S[N];let lt;if(Array.isArray(K))lt=g(this,i,a).call(this,K);else{if(!w(this,_).has(K))return(0,n.warn)(`Optional content group not found: ${K}`),!0;lt=w(this,_).get(K).visible}switch(O){case"And":if(!lt)return!1;break;case"Or":if(lt)return!0;break;case"Not":return!lt;default:return!0}}return"And"===O}e.OptionalContentConfig=class s{constructor(E){if(function o(S,E){T(S,E),E.add(S)}(this,i),A(this,m,{writable:!0,value:null}),A(this,_,{writable:!0,value:new Map}),A(this,D,{writable:!0,value:null}),A(this,P,{writable:!0,value:null}),this.name=null,this.creator=null,null!==E){this.name=E.name,this.creator=E.creator,u(this,P,E.order);for(const O of E.groups)w(this,_).set(O.id,new v(O.name,O.intent));if("OFF"===E.baseState)for(const O of w(this,_).values())O._setVisible(l,!1);for(const O of E.on)w(this,_).get(O)._setVisible(l,!0);for(const O of E.off)w(this,_).get(O)._setVisible(l,!1);u(this,D,this.getHash())}}isVisible(E){if(0===w(this,_).size)return!0;if(!E)return(0,n.warn)("Optional content group not defined."),!0;if("OCG"===E.type)return w(this,_).has(E.id)?w(this,_).get(E.id).visible:((0,n.warn)(`Optional content group not found: ${E.id}`),!0);if("OCMD"===E.type){if(E.expression)return g(this,i,a).call(this,E.expression);if(!E.policy||"AnyOn"===E.policy){for(const O of E.ids){if(!w(this,_).has(O))return(0,n.warn)(`Optional content group not found: ${O}`),!0;if(w(this,_).get(O).visible)return!0}return!1}if("AllOn"===E.policy){for(const O of E.ids){if(!w(this,_).has(O))return(0,n.warn)(`Optional content group not found: ${O}`),!0;if(!w(this,_).get(O).visible)return!1}return!0}if("AnyOff"===E.policy){for(const O of E.ids){if(!w(this,_).has(O))return(0,n.warn)(`Optional content group not found: ${O}`),!0;if(!w(this,_).get(O).visible)return!0}return!1}if("AllOff"===E.policy){for(const O of E.ids){if(!w(this,_).has(O))return(0,n.warn)(`Optional content group not found: ${O}`),!0;if(w(this,_).get(O).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,n.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];w(this,_).has(E)?(w(this,_).get(E)._setVisible(l,!!O),u(this,m,null)):(0,n.warn)(`Optional content group not found: ${E}`)}get hasInitialVisibility(){return this.getHash()===w(this,D)}getOrder(){return w(this,_).size?w(this,P)?w(this,P).slice():[...w(this,_).keys()]:null}getGroups(){return w(this,_).size>0?(0,n.objectFromMap)(w(this,_)):null}getGroup(E){return w(this,_).get(E)||null}getHash(){if(null!==w(this,m))return w(this,m);const E=new r.MurmurHash3_64;for(const[O,N]of w(this,_))E.update(`${O}:${N.visible}`);return u(this,m,E.hexdigest())}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=t(1),r=t(139);e.PDFDataTransportStream=class o{constructor(u,y){let{length:w,initialData:h,progressiveDone:C=!1,contentDispositionFilename:l=null,disableRange:c=!1,disableStream:v=!1}=u;if((0,n.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=C,this._contentDispositionFilename=l,(null==h?void 0:h.length)>0){const m=h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!v,this._isRangeSupported=!c,this._contentLength=w,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,_)=>{this._onReceiveData({begin:m,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((m,_)=>{this._onProgress({loaded:m,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){let{begin:y,chunk:w}=u;const h=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;if(void 0===y)this._fullRequestReader?this._fullRequestReader._enqueue(h):this._queuedChunks.push(h);else{const C=this._rangeReaders.some(function(l){return l._begin===y&&(l._enqueue(h),!0)});(0,n.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y,u;return null!=(y=null===(u=this._fullRequestReader)||void 0===u?void 0:u._loaded)?y:0}_onProgress(u){var y,w,h,C;void 0===u.total?null===(y=this._rangeReaders[0])||void 0===y||null===(w=y.onProgress)||void 0===w||w.call(y,{loaded:u.loaded}):null===(h=this._fullRequestReader)||void 0===h||null===(C=h.onProgress)||void 0===C||C.call(h,{loaded:u.loaded,total:u.total})}_onProgressiveDone(){var u;null===(u=this._fullRequestReader)||void 0===u||u.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const y=this._rangeReaders.indexOf(u);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new g(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,y){if(y<=this._progressiveDataLength)return null;const w=new A(this,u,y);return this._pdfDataRangeTransport.requestDataRange(u,y),this._rangeReaders.push(w),w}cancelAllRequests(u){var y;null===(y=this._fullRequestReader)||void 0===y||y.cancel(u);for(const w of this._rangeReaders.slice(0))w.cancel(u);this._pdfDataRangeTransport.abort()}};class g{constructor(u,y){let w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=u,this._done=w||!1,this._filename=(0,r.isPdfFile)(h)?h:null,this._queuedChunks=y||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class A{constructor(u,y,w){this._stream=u,this._begin=y,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(0===this._requests.length)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(b,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class t{static textContent(r){const o=[],g={items:o,styles:Object.create(null)};return function A(T){var u;if(!T)return;let y=null;const w=T.name;if("#text"===w)y=T.value;else{if(!t.shouldBuildText(w))return;null!=T&&null!==(u=T.attributes)&&void 0!==u&&u.textContent?y=T.attributes.textContent:T.value&&(y=T.value)}if(null!==y&&o.push({str:y}),T.children)for(const h of T.children)A(h)}(r),g}static shouldBuildText(r){return!("textarea"===r||"input"===r||"option"===r||"select"===r)}}e.XfaText=t},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=t(140);const r=function(T){return new Promise((u,y)=>{require("fs").readFile(T,(h,C)=>{!h&&C?u(new Uint8Array(C)):y(new Error(h))})})};e.NodeCanvasFactory=class o extends n.BaseCanvasFactory{_createCanvas(u,y){return require("canvas").createCanvas(u,y)}},e.NodeCMapReaderFactory=class g extends n.BaseCMapReaderFactory{_fetchData(u,y){return r(u).then(w=>({cMapData:w,compressionType:y}))}},e.NodeStandardFontDataFactory=class A extends n.BaseStandardFontDataFactory{_fetchData(u){return r(u)}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=t(1),r=t(154);const o=require("fs"),g=require("http"),A=require("https"),T=require("url"),u=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class w{constructor(P){this.source=P,this.url=function y(D){const P=T.parse(D);return"file:"===P.protocol||P.host?P:/^[a-z]:[/\\]/i.test(D)?T.parse(`file:///${D}`):(P.host||(P.protocol="file:"),P)}(P.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var i,P;return null!=(i=null===(P=this._fullRequestReader)||void 0===P?void 0:P._loaded)?i:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new m(this):new c(this),this._fullRequestReader}getRangeReader(P,i){if(i<=this._progressiveDataLength)return null;const s=this.isFsUrl?new _(this,P,i):new v(this,P,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(P){var i;null===(i=this._fullRequestReader)||void 0===i||i.cancel(P);for(const s of this._rangeRequestReaders.slice(0))s.cancel(P)}};class h{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=P.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return null===i?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=i.length,null===(P=this.onProgress)||void 0===P||P.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(i).buffer,done:!1})}cancel(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!P.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var P;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return null===i?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=i.length,null===(P=this.onProgress)||void 0===P||P.call(this,{loaded:this._loaded}),{value:new Uint8Array(i).buffer,done:!1})}cancel(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(D,P){return{protocol:D.protocol,auth:D.auth,host:D.hostname,port:D.port,path:D.path,method:"GET",headers:P}}class c extends h{constructor(P){super(P);const i=s=>{if(404===s.statusCode){const O=new n.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=O,void this._headersCapability.reject(O)}this._headersCapability.resolve(),this._setReadableStream(s);const a=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:S,suggestedLength:E}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=S,this._contentLength=E||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(a)};this._request=null,this._request="http:"===this._url.protocol?g.request(l(this._url,P.httpHeaders),i):A.request(l(this._url,P.httpHeaders),i),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class v extends C{constructor(P,i,s){super(P),this._httpHeaders={};for(const S in P.httpHeaders){const E=P.httpHeaders[S];void 0!==E&&(this._httpHeaders[S]=E)}this._httpHeaders.Range=`bytes=${i}-${s-1}`;const a=S=>{if(404!==S.statusCode)this._setReadableStream(S);else{const E=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E}};this._request=null,this._request="http:"===this._url.protocol?g.request(l(this._url,this._httpHeaders),a):A.request(l(this._url,this._httpHeaders),a),this._request.on("error",S=>{this._storedError=S}),this._request.end()}}class m extends h{constructor(P){super(P);let i=decodeURIComponent(this._url.path);u.test(this._url.href)&&(i=i.replace(/^\//,"")),o.lstat(i,(s,a)=>{if(s)return"ENOENT"===s.code&&(s=new n.MissingPDFException(`Missing PDF "${i}".`)),this._storedError=s,void this._headersCapability.reject(s);this._contentLength=a.size,this._setReadableStream(o.createReadStream(i)),this._headersCapability.resolve()})}}class _ extends C{constructor(P,i,s){super(P);let a=decodeURIComponent(this._url.path);u.test(this._url.href)&&(a=a.replace(/^\//,"")),this._setReadableStream(o.createReadStream(a,{start:i,end:s-1}))}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function T(y,w){return 404===y||0===y&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${y}) while retrieving PDF "${w}".`,y)},e.extractFilenameFromHeader=function A(y){const w=y("Content-Disposition");if(w){let h=(0,r.getFilenameFromContentDispositionHeader)(w);if(h.includes("%"))try{h=decodeURIComponent(h)}catch{}if((0,o.isPdfFile)(h))return h}return null},e.validateRangeRequestCapabilities=function g(y){let{getResponseHeader:w,isHttp:h,rangeChunkSize:C,disableRange:l}=y;const c={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(w("Content-Length"),10);return!Number.isInteger(v)||(c.suggestedLength=v,v<=2*C)||l||!h||"bytes"!==w("Accept-Ranges")||"identity"!==(w("Content-Encoding")||"identity")||(c.allowRangeRequests=!0),c},e.validateResponseStatus=function u(y){return 200===y||206===y};var n=t(1),r=t(155),o=t(139)},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function r(o){let g=!0,A=T("filename\\*","i").exec(o);if(A){A=A[1];let c=h(A);return c=unescape(c),c=C(c),c=l(c),y(c)}if(A=function w(c){const v=[];let m;const _=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(m=_.exec(c));){let[,P,i,s]=m;if(P=parseInt(P,10),P in v){if(0===P)break}else v[P]=[i,s]}const D=[];for(let P=0;P<v.length&&P in v;++P){let[i,s]=v[P];s=h(s),i&&(s=unescape(s),0===P&&(s=C(s))),D.push(s)}return D.join("")}(o),A)return y(l(A));if(A=T("filename","i").exec(o),A){A=A[1];let c=h(A);return c=l(c),y(c)}function T(c,v){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function u(c,v){if(c){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const m=new TextDecoder(c,{fatal:!0}),_=(0,n.stringToBytes)(v);v=m.decode(_),g=!1}catch{}}return v}function y(c){return g&&/[\x80-\xff]/.test(c)&&(c=u("utf-8",c),g&&(c=u("iso-8859-1",c))),c}function h(c){if(c.startsWith('"')){const v=c.slice(1).split('\\"');for(let m=0;m<v.length;++m){const _=v[m].indexOf('"');-1!==_&&(v[m]=v[m].slice(0,_),v.length=m+1),v[m]=v[m].replace(/\\(.)/g,"$1")}c=v.join('"')}return c}function C(c){const v=c.indexOf("'");return-1===v?c:u(c.slice(0,v),c.slice(v+1).replace(/^[^']*'/,""))}function l(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,m,_,D){if("q"===_||"Q"===_)return u(m,D=(D=D.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(P,i){return String.fromCharCode(parseInt(i,16))}));try{D=atob(D)}catch{}return u(m,D)})}return""};var n=t(1)},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=t(1),r=t(154);class T{constructor(C){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&l.httpHeaders||Object.create(null),this.withCredentials=l.withCredentials||!1,this.getXhr=l.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,l,c){const v={begin:C,end:l};for(const m in c)v[m]=c[m];return this.request(v)}requestFull(C){return this.request(C)}request(C){const l=this.getXhr(),c=this.currXhrId++,v=this.pendingRequests[c]={xhr:l};l.open("GET",this.url),l.withCredentials=this.withCredentials;for(const m in this.httpHeaders){const _=this.httpHeaders[m];void 0!==_&&l.setRequestHeader(m,_)}return this.isHttp&&"begin"in C&&"end"in C?(l.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),v.expectedStatus=206):v.expectedStatus=200,l.responseType="arraybuffer",C.onError&&(l.onerror=function(m){C.onError(l.status)}),l.onreadystatechange=this.onStateChange.bind(this,c),l.onprogress=this.onProgress.bind(this,c),v.onHeadersReceived=C.onHeadersReceived,v.onDone=C.onDone,v.onError=C.onError,v.onProgress=C.onProgress,l.send(null),c}onProgress(C,l){var c;const v=this.pendingRequests[C];!v||null===(c=v.onProgress)||void 0===c||c.call(v,l)}onStateChange(C,l){const c=this.pendingRequests[C];if(!c)return;const v=c.xhr;if(v.readyState>=2&&c.onHeadersReceived&&(c.onHeadersReceived(),delete c.onHeadersReceived),4!==v.readyState||!(C in this.pendingRequests))return;var m;if(delete this.pendingRequests[C],0===v.status&&this.isHttp)return void(null===(m=c.onError)||void 0===m||m.call(c,v.status));const _=v.status||200;var P;if((200!==_||206!==c.expectedStatus)&&_!==c.expectedStatus)return void(null===(P=c.onError)||void 0===P||P.call(c,v.status));const i=function A(h){const C=h.response;return"string"!=typeof C?C:(0,n.stringToBytes)(C).buffer}(v);if(206===_){const a=v.getResponseHeader("Content-Range"),S=/bytes (\d+)-(\d+)\/(\d+)/.exec(a);c.onDone({begin:parseInt(S[1],10),chunk:i})}else if(i)c.onDone({begin:0,chunk:i});else{var s;null===(s=c.onError)||void 0===s||s.call(c,v.status)}}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const l=this.pendingRequests[C].xhr;delete this.pendingRequests[C],l.abort()}}e.PDFNetworkStream=class u{constructor(C){this._source=C,this._manager=new T(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const l=this._rangeRequestReaders.indexOf(C);l>=0&&this._rangeRequestReaders.splice(l,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(C,l){const c=new w(this._manager,C,l);return c.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(c),c}cancelAllRequests(C){var l;null===(l=this._fullRequestReader)||void 0===l||l.cancel(C);for(const c of this._rangeRequestReaders.slice(0))c.cancel(C)}};class y{constructor(C,l){this._manager=C;const c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=l.url,this._fullRequestId=C.requestFull(c),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._contentLength=l.length,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,l=this._manager.getRequestXhr(C),c=_=>l.getResponseHeader(_),{allowRangeRequests:v,suggestedLength:m}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=m||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(c),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,r.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var l;null===(l=this.onProgress)||void 0===l||l.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=(0,n.createPromiseCapability)();return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(C,l,c){this._manager=C;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(l,c,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;null===(C=this.onClosed)||void 0===C||C.call(this,this)}_onDone(C){const l=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunk=l,this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,r.createResponseStatusError)(C,this._url);for(const l of this._requests)l.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var l;this.isStreamingSupported||null===(l=this.onProgress)||void 0===l||l.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const l=this._queuedChunk;return this._queuedChunk=null,{value:l,done:!1}}if(this._done)return{value:void 0,done:!0};const C=(0,n.createPromiseCapability)();return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=t(1),r=t(154);function o(w,h,C){return{method:"GET",headers:w,signal:C.signal,mode:"cors",credentials:h?"include":"same-origin",redirect:"follow"}}function g(w){const h=new Headers;for(const C in w){const l=w[C];void 0!==l&&h.append(C,l)}return h}function A(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,n.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}e.PDFFetchStream=class T{constructor(h){this.source=h,this.isHttp=/^https?:/i.test(h.url),this.httpHeaders=this.isHttp&&h.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C,h;return null!=(C=null===(h=this._fullRequestReader)||void 0===h?void 0:h._loaded)?C:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u(this),this._fullRequestReader}getRangeReader(h,C){if(C<=this._progressiveDataLength)return null;const l=new y(this,h,C);return this._rangeRequestReaders.push(l),l}cancelAllRequests(h){var C;null===(C=this._fullRequestReader)||void 0===C||C.cancel(h);for(const l of this._rangeRequestReaders.slice(0))l.cancel(h)}};class u{constructor(h){this._stream=h,this._reader=null,this._loaded=0,this._filename=null;const C=h.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=g(this._stream.httpHeaders);const l=C.url;fetch(l,o(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,r.validateResponseStatus)(c.status))throw(0,r.createResponseStatusError)(c.status,l);this._reader=c.body.getReader(),this._headersCapability.resolve();const v=D=>c.headers.get(D),{allowRangeRequests:m,suggestedLength:_}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=_||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(v),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var h;await this._headersCapability.promise;const{value:C,done:l}=await this._reader.read();return l?{value:C,done:l}:(this._loaded+=C.byteLength,null===(h=this.onProgress)||void 0===h||h.call(this,{loaded:this._loaded,total:this._contentLength}),{value:A(C),done:!1})}cancel(h){var C;null===(C=this._reader)||void 0===C||C.cancel(h),this._abortController.abort()}}class y{constructor(h,C,l){this._stream=h,this._reader=null,this._loaded=0;const c=h.source;this._withCredentials=c.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController,this._headers=g(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${l-1}`);const v=c.url;fetch(v,o(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,r.validateResponseStatus)(m.status))throw(0,r.createResponseStatusError)(m.status,v);this._readCapability.resolve(),this._reader=m.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var h;await this._readCapability.promise;const{value:C,done:l}=await this._reader.read();return l?{value:C,done:l}:(this._loaded+=C.byteLength,null===(h=this.onProgress)||void 0===h||h.call(this,{loaded:this._loaded}),{value:A(C),done:!1})}cancel(h){var C;null===(C=this._reader)||void 0===C||C.cancel(h),this._abortController.abort()}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=function c(m){!m.textContentSource&&(m.textContent||m.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),m.textContentSource=m.textContent||m.textContentStream);const _=new l(m);return _._render(),_},e.updateTextLayer=function v(m){let{container:_,viewport:D,textDivs:P,textDivProperties:i,isOffscreenCanvasSupported:s,mustRotate:a=!0,mustRescale:S=!0}=m;if(a&&(0,r.setLayerDimensions)(_,{rotation:D.rotation}),S){const E=u(0,s),N={prevFontSize:null,prevFontFamily:null,div:null,scale:D.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E};for(const K of P)N.properties=i.get(K),N.div=K,h(N)}};var n=t(1),r=t(139);const g=30,T=new Map;function u(m,_){let D;if(_&&n.FeatureTest.isOffscreenCanvasSupported)D=new OffscreenCanvas(m,m).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=m,D=P.getContext("2d",{alpha:!1})}return D}function w(m,_,D){const P=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==_.str,hasEOL:_.hasEOL,fontSize:0};m._textDivs.push(P);const s=n.Util.transform(m._transform,_.transform);let a=Math.atan2(s[1],s[0]);const S=D[_.fontName];S.vertical&&(a+=Math.PI/2);const E=Math.hypot(s[2],s[3]),O=E*function y(m,_){const D=T.get(m);if(D)return D;const P=u(g,_);P.font=`30px ${m}`;const i=P.measureText("");let s=i.fontBoundingBoxAscent,a=Math.abs(i.fontBoundingBoxDescent);if(s){const E=s/(s+a);return T.set(m,E),P.canvas.width=P.canvas.height=0,E}P.strokeStyle="red",P.clearRect(0,0,g,g),P.strokeText("g",0,0);let S=P.getImageData(0,0,g,g).data;a=0;for(let E=S.length-1-3;E>=0;E-=4)if(S[E]>0){a=Math.ceil(E/4/g);break}P.clearRect(0,0,g,g),P.strokeText("A",0,g),S=P.getImageData(0,0,g,g).data,s=0;for(let E=0,O=S.length;E<O;E+=4)if(S[E]>0){s=g-Math.floor(E/4/g);break}if(P.canvas.width=P.canvas.height=0,s){const E=s/(s+a);return T.set(m,E),E}return T.set(m,.8),.8}(S.fontFamily,m._isOffscreenCanvasSupported);let N,K;0===a?(N=s[4],K=s[5]-O):(N=s[4]+O*Math.sin(a),K=s[5]-O*Math.cos(a));const lt="calc(var(--scale-factor)*",Q=P.style;m._container===m._rootContainer?(Q.left=`${(100*N/m._pageWidth).toFixed(2)}%`,Q.top=`${(100*K/m._pageHeight).toFixed(2)}%`):(Q.left=`${lt}${N.toFixed(2)}px)`,Q.top=`${lt}${K.toFixed(2)}px)`),Q.fontSize=`${lt}${E.toFixed(2)}px)`,Q.fontFamily=S.fontFamily,i.fontSize=E,P.setAttribute("role","presentation"),P.textContent=_.str,P.dir=_.dir,m._fontInspectorEnabled&&(P.dataset.fontName=_.fontName),0!==a&&(i.angle=a*(180/Math.PI));let q=!1;if(_.str.length>1)q=!0;else if(" "!==_.str&&_.transform[0]!==_.transform[3]){const ut=Math.abs(_.transform[0]),ft=Math.abs(_.transform[3]);ut!==ft&&Math.max(ut,ft)/Math.min(ut,ft)>1.5&&(q=!0)}q&&(i.canvasWidth=S.vertical?_.height:_.width),m._textDivProperties.set(P,i),m._isReadableStream&&m._layoutText(P)}function h(m){const{div:_,scale:D,properties:P,ctx:i,prevFontSize:s,prevFontFamily:a}=m,{style:S}=_;let E="";if(0!==P.canvasWidth&&P.hasText){const{fontFamily:O}=S,{canvasWidth:N,fontSize:K}=P;(s!==K||a!==O)&&(i.font=`${K*D}px ${O}`,m.prevFontSize=K,m.prevFontFamily=O);const{width:lt}=i.measureText(_.textContent);lt>0&&(E=`scaleX(${N*D/lt})`)}0!==P.angle&&(E=`rotate(${P.angle}deg) ${E}`),E.length>0&&(S.transform=E)}class l{constructor(_){var D;let{textContentSource:P,container:i,viewport:s,textDivs:a,textDivProperties:S,textContentItemsStr:E,isOffscreenCanvasSupported:O}=_;this._textContentSource=P,this._isReadableStream=P instanceof ReadableStream,this._container=this._rootContainer=i,this._textDivs=a||[],this._textContentItemsStr=E||[],this._fontInspectorEnabled=!(null===(D=globalThis.FontInspector)||void 0===D||!D.enabled),this._reader=null,this._textDivProperties=S||new WeakMap,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:s.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:u(0,O)};const{pageWidth:N,pageHeight:K,pageX:lt,pageY:Q}=s.rawDims;this._transform=[1,0,0,-1,-lt,Q+K],this._pageWidth=N,this._pageHeight=K,(0,r.setLayerDimensions)(i,s),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(_,D){for(const P of _)if(void 0!==P.str)this._textContentItemsStr.push(P.str),w(this,P,D);else if("beginMarkedContentProps"===P.type||"beginMarkedContent"===P.type){const i=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==P.id&&this._container.setAttribute("id",`${P.id}`),i.append(this._container)}else"endMarkedContent"===P.type&&(this._container=this._container.parentNode)}_layoutText(_){const D=this._layoutTextParams.properties=this._textDivProperties.get(_);if(this._layoutTextParams.div=_,h(this._layoutTextParams),D.hasText&&this._container.append(_),D.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const _=(0,n.createPromiseCapability)();let D=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(i=>{let{value:s,done:a}=i;a?_.resolve():(Object.assign(D,s.styles),this._processItems(s.items,D),P())},_.reject)};this._reader=this._textContentSource.getReader(),P()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:P,styles:i}=this._textContentSource;this._processItems(P,i),_.resolve()}}_.promise.then(()=>{D=null,function C(m){if(m._canceled)return;const _=m._textDivs,D=m._capability;if(_.length>1e5)D.resolve();else{if(!m._isReadableStream)for(const i of _)m._layoutText(i);D.resolve()}}(this)},this._capability.reject)}}e.TextLayerRenderTask=l},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=t(1),r=t(138),o=t(160),g=t(161),A=t(139);function T(L,R){C(L,R),R.add(L)}function h(L,R,F){C(L,R),R.set(L,F)}function C(L,R){if(R.has(L))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(L,R,F){if(!R.has(L))throw new TypeError("attempted to get private field on non-instance");return F}function c(L,R){return function v(L,R){return R.get?R.get.call(L):R.value}(L,_(L,R,"get"))}function m(L,R,F){return function D(L,R,F){if(R.set)R.set.call(L,F);else{if(!R.writable)throw new TypeError("attempted to set read only private field");R.value=F}}(L,_(L,R,"set"),F),F}function _(L,R,F){if(!R.has(L))throw new TypeError("attempted to "+F+" private field on non-instance");return R.get(L)}var P=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,N=new WeakMap,K=new WeakSet,lt=new WeakSet,Q=new WeakSet,q=new WeakSet;class ut{constructor(R){T(this,q),T(this,Q),T(this,lt),T(this,K),h(this,P,{writable:!0,value:void 0}),h(this,i,{writable:!0,value:!1}),h(this,s,{writable:!0,value:this.pointerup.bind(this)}),h(this,a,{writable:!0,value:this.pointerdown.bind(this)}),h(this,S,{writable:!0,value:new Map}),h(this,E,{writable:!0,value:!1}),h(this,O,{writable:!0,value:!1}),h(this,N,{writable:!0,value:void 0}),ut._initialized||(ut._initialized=!0,o.FreeTextEditor.initialize(R.l10n),g.InkEditor.initialize(R.l10n)),R.uiManager.registerEditorTypes([o.FreeTextEditor,g.InkEditor]),m(this,N,R.uiManager),this.pageIndex=R.pageIndex,this.div=R.div,m(this,P,R.accessibilityManager),c(this,N).addLayer(this)}updateToolbar(R){c(this,N).updateToolbar(R)}updateMode(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c(this,N).getMode();l(this,q,G).call(this),R===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),c(this,N).unselectAll(),this.div.classList.toggle("freeTextEditing",R===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",R===n.AnnotationEditorType.INK)}addInkEditorIfNeeded(R){if(R||c(this,N).getMode()===n.AnnotationEditorType.INK){if(!R)for(const p of c(this,S).values())if(p.isEmpty())return void p.setInBackground();l(this,Q,$).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(R){c(this,N).setEditingState(R)}addCommands(R){c(this,N).addCommands(R)}enable(){this.div.style.pointerEvents="auto";for(const R of c(this,S).values())R.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const R of c(this,S).values())R.disableEditing()}setActiveEditor(R){c(this,N).getActive()!==R&&c(this,N).setActiveEditor(R)}enableClick(){this.div.addEventListener("pointerdown",c(this,a)),this.div.addEventListener("pointerup",c(this,s))}disableClick(){this.div.removeEventListener("pointerdown",c(this,a)),this.div.removeEventListener("pointerup",c(this,s))}attach(R){c(this,S).set(R.id,R)}detach(R){var F;c(this,S).delete(R.id),null===(F=c(this,P))||void 0===F||F.removePointerInTextLayer(R.contentDiv)}remove(R){c(this,N).removeEditor(R),this.detach(R),R.div.style.display="none",setTimeout(()=>{R.div.style.display="",R.div.remove(),R.isAttachedToDOM=!1,document.activeElement===document.body&&c(this,N).focusMainContainer()},0),c(this,O)||this.addInkEditorIfNeeded(!1)}add(R){if(l(this,K,ft).call(this,R),c(this,N).addEditor(R),this.attach(R),!R.isAttachedToDOM){const F=R.render();this.div.append(F),R.isAttachedToDOM=!0}this.moveEditorInDOM(R),R.onceAdded(),c(this,N).addToAnnotationStorage(R)}moveEditorInDOM(R){var F;null===(F=c(this,P))||void 0===F||F.moveElementInDOM(this.div,R.div,R.contentDiv,!0)}addOrRebuild(R){R.needsToBeRebuilt()?R.rebuild():this.add(R)}addANewEditor(R){this.addCommands({cmd:()=>{this.addOrRebuild(R)},undo:()=>{R.remove()},mustExec:!0})}addUndoableEditor(R){this.addCommands({cmd:()=>{this.addOrRebuild(R)},undo:()=>{R.remove()},mustExec:!1})}getNextId(){return c(this,N).getId()}deserialize(R){switch(R.annotationType){case n.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(R,this,c(this,N));case n.AnnotationEditorType.INK:return g.InkEditor.deserialize(R,this,c(this,N))}return null}setSelected(R){c(this,N).setSelected(R)}toggleSelected(R){c(this,N).toggleSelected(R)}isSelected(R){return c(this,N).isSelected(R)}unselect(R){c(this,N).unselect(R)}pointerup(R){const{isMac:F}=n.FeatureTest.platform;if(!(0!==R.button||R.ctrlKey&&F)&&R.target===this.div&&c(this,E)){if(m(this,E,!1),!c(this,i))return void m(this,i,!0);l(this,Q,$).call(this,R)}}pointerdown(R){const{isMac:F}=n.FeatureTest.platform;if(0!==R.button||R.ctrlKey&&F||R.target!==this.div)return;m(this,E,!0);const p=c(this,N).getActive();m(this,i,!p||p.isEmpty())}drop(R){const F=R.dataTransfer.getData("text/plain"),p=c(this,N).getEditor(F);if(!p)return;R.preventDefault(),R.dataTransfer.dropEffect="move",l(this,K,ft).call(this,p);const f=this.div.getBoundingClientRect();p.translate(R.clientX-f.x-p.startX,R.clientY-f.y-p.startY),this.moveEditorInDOM(p),p.div.focus()}dragover(R){R.preventDefault()}destroy(){var R;(null===(R=c(this,N).getActive())||void 0===R?void 0:R.parent)===this&&c(this,N).setActiveEditor(null);for(const p of c(this,S).values()){var F;null===(F=c(this,P))||void 0===F||F.removePointerInTextLayer(p.contentDiv),p.setParent(null),p.isAttachedToDOM=!1,p.div.remove()}this.div=null,c(this,S).clear(),c(this,N).removeLayer(this)}render(R){let{viewport:F}=R;this.viewport=F,(0,A.setLayerDimensions)(this.div,F),(0,r.bindEvents)(this,this.div,["dragover","drop"]);for(const p of c(this,N).getEditors(this.pageIndex))this.add(p);this.updateMode()}update(R){let{viewport:F}=R;c(this,N).commitOrRemove(),this.viewport=F,(0,A.setLayerDimensions)(this.div,{rotation:F.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:R,pageHeight:F}=this.viewport.rawDims;return[R,F]}}function ft(L){var R;L.parent!==this&&(this.attach(L),null===(R=L.parent)||void 0===R||R.detach(L),L.setParent(this),L.div&&L.isAttachedToDOM&&(L.div.remove(),this.div.append(L.div)))}function z(L){switch(c(this,N).getMode()){case n.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(L);case n.AnnotationEditorType.INK:return new g.InkEditor(L)}return null}function $(L){const R=this.getNextId(),F=l(this,lt,z).call(this,{parent:this,id:R,x:L.offsetX,y:L.offsetY,uiManager:c(this,N)});return F&&this.add(F),F}function G(){m(this,O,!0);for(const L of c(this,S).values())L.isEmpty()&&L.remove();m(this,O,!1)}e.AnnotationEditorLayer=ut,function u(L,R,F){R=function y(L){var R=function w(L,R){if("object"!=typeof L||null===L)return L;var F=L[Symbol.toPrimitive];if(void 0!==F){var p=F.call(L,R||"default");if("object"!=typeof p)return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(L)}(L,"string");return"symbol"==typeof R?R:String(R)}(R),R in L?Object.defineProperty(L,R,{value:F,enumerable:!0,configurable:!0,writable:!0}):L[R]=F}(ut,"_initialized",!1)},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=t(1),r=t(138),o=t(137);function g(G,L){w(G,L),L.add(G)}function A(G,L,R){return L=function T(G){var L=function u(G,L){if("object"!=typeof G||null===G)return G;var R=G[Symbol.toPrimitive];if(void 0!==R){var F=R.call(G,L||"default");if("object"!=typeof F)return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===L?String:Number)(G)}(G,"string");return"symbol"==typeof L?L:String(L)}(L),L in G?Object.defineProperty(G,L,{value:R,enumerable:!0,configurable:!0,writable:!0}):G[L]=R,G}function y(G,L,R){w(G,L),L.set(G,R)}function w(G,L){if(L.has(G))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(G,L){return function C(G,L){return L.get?L.get.call(G):L.value}(G,v(G,L,"get"))}function l(G,L,R){if(!L.has(G))throw new TypeError("attempted to get private field on non-instance");return R}function c(G,L,R){return function m(G,L,R){if(L.set)L.set.call(G,R);else{if(!L.writable)throw new TypeError("attempted to set read only private field");L.value=R}}(G,v(G,L,"set"),R),R}function v(G,L,R){if(!L.has(G))throw new TypeError("attempted to "+R+" private field on non-instance");return L.get(G)}var _=new WeakMap,D=new WeakMap,P=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,N=new WeakSet,K=new WeakSet,lt=new WeakSet,Q=new WeakSet;class q extends o.AnnotationEditor{constructor(L){super({...L,name:"freeTextEditor"}),g(this,Q),g(this,lt),g(this,K),g(this,N),y(this,_,{writable:!0,value:this.editorDivBlur.bind(this)}),y(this,D,{writable:!0,value:this.editorDivFocus.bind(this)}),y(this,P,{writable:!0,value:this.editorDivInput.bind(this)}),y(this,i,{writable:!0,value:this.editorDivKeydown.bind(this)}),y(this,s,{writable:!0,value:void 0}),y(this,a,{writable:!0,value:""}),y(this,S,{writable:!0,value:`${this.id}-editor`}),y(this,E,{writable:!0,value:!1}),y(this,O,{writable:!0,value:void 0}),c(this,s,L.color||q._defaultColor||o.AnnotationEditor._defaultLineColor),c(this,O,L.fontSize||q._defaultFontSize)}static initialize(L){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(F=>[F,L.get(F)]));const R=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(R.getPropertyValue("--freetext-padding"))}static updateDefaultParams(L,R){switch(L){case n.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=R;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=R}}updateParams(L,R){switch(L){case n.AnnotationEditorParamsType.FREETEXT_SIZE:l(this,N,ut).call(this,R);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:l(this,K,ft).call(this,R)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,h(this,O)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,h(this,s)]]}getInitialTranslation(){const L=this.parentScale;return[-q._internalPadding*L,-(q._internalPadding+h(this,O))*L]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",h(this,i)),this.editorDiv.addEventListener("focus",h(this,D)),this.editorDiv.addEventListener("blur",h(this,_)),this.editorDiv.addEventListener("input",h(this,P)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,S)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",h(this,i)),this.editorDiv.removeEventListener("focus",h(this,D)),this.editorDiv.removeEventListener("blur",h(this,_)),this.editorDiv.removeEventListener("input",h(this,P)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(L){super.focusin(L),L.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){!this.isInEditMode()||(super.commit(),h(this,E)||(c(this,E,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),c(this,a,l(this,lt,z).call(this).trimEnd()),l(this,Q,$).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(L){this.enableEditMode(),this.editorDiv.focus()}keydown(L){L.target===this.div&&"Enter"===L.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(L){q._keyboardManager.exec(this,L)}editorDivFocus(L){this.isEditing=!0}editorDivBlur(L){this.isEditing=!1}editorDivInput(L){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let L,R;this.width&&(L=this.x,R=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,S)),this.enableEditing(),q._l10nPromise.get("editor_free_text2_aria_label").then(p=>{var f;return null===(f=this.editorDiv)||void 0===f?void 0:f.setAttribute("aria-label",p)}),q._l10nPromise.get("free_text2_default_content").then(p=>{var f;return null===(f=this.editorDiv)||void 0===f?void 0:f.setAttribute("default-content",p)}),this.editorDiv.contentEditable=!0;const{style:F}=this.editorDiv;if(F.fontSize=`calc(${h(this,O)}px * var(--scale-factor))`,F.color=h(this,s),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[p,f]=this.parentDimensions;this.setAt(L*p,R*f,this.width*p,this.height*f);for(const x of h(this,a).split("\n")){const U=document.createElement("div");U.append(x?document.createTextNode(x):document.createElement("br")),this.editorDiv.append(U)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(L,R,F){const p=super.deserialize(L,R,F);return c(p,O,L.fontSize),c(p,s,n.Util.makeHexColor(...L.color)),c(p,a,L.value),p}serialize(){if(this.isEmpty())return null;const L=q._internalPadding*this.parentScale,R=this.getRect(L,L),F=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,s));return{annotationType:n.AnnotationEditorType.FREETEXT,color:F,fontSize:h(this,O),value:h(this,a),pageIndex:this.pageIndex,rect:R,rotation:this.rotation}}}function ut(G){const L=F=>{this.editorDiv.style.fontSize=`calc(${F}px * var(--scale-factor))`,this.translate(0,-(F-h(this,O))*this.parentScale),c(this,O,F),l(this,Q,$).call(this)},R=h(this,O);this.addCommands({cmd:()=>{L(G)},undo:()=>{L(R)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function ft(G){const L=h(this,s);this.addCommands({cmd:()=>{c(this,s,this.editorDiv.style.color=G)},undo:()=>{c(this,s,this.editorDiv.style.color=L)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function z(){const G=this.editorDiv.getElementsByTagName("div");if(0===G.length)return this.editorDiv.innerText;const L=[];for(const R of G)L.push(R.innerText.replace(/\r\n?|\n/,""));return L.join("\n")}function $(){const[G,L]=this.parentDimensions;let R;if(this.isAttachedToDOM)R=this.div.getBoundingClientRect();else{const{currentLayer:F,div:p}=this,f=p.style.display;p.style.display="hidden",F.div.append(this.div),R=p.getBoundingClientRect(),p.remove(),p.style.display=f}this.width=R.width/G,this.height=R.height/L}e.FreeTextEditor=q,A(q,"_freeTextDefaultContent",""),A(q,"_l10nPromise",void 0),A(q,"_internalPadding",0),A(q,"_defaultColor",null),A(q,"_defaultFontSize",10),A(q,"_keyboardManager",new r.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],q.prototype.commitOrRemove]])),A(q,"_type","freetext")},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return o.fitCurve}});var n=t(1),r=t(137),o=t(162),g=t(138);function A(ct,Y){h(ct,Y),Y.add(ct)}function T(ct,Y,mt){return Y=function u(ct){var Y=function y(ct,Y){if("object"!=typeof ct||null===ct)return ct;var mt=ct[Symbol.toPrimitive];if(void 0!==mt){var kt=mt.call(ct,Y||"default");if("object"!=typeof kt)return kt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===Y?String:Number)(ct)}(ct,"string");return"symbol"==typeof Y?Y:String(Y)}(Y),Y in ct?Object.defineProperty(ct,Y,{value:mt,enumerable:!0,configurable:!0,writable:!0}):ct[Y]=mt,ct}function w(ct,Y,mt){h(ct,Y),Y.set(ct,mt)}function h(ct,Y){if(Y.has(ct))throw new TypeError("Cannot initialize the same private elements twice on an object")}function C(ct,Y,mt){return function l(ct,Y){if(ct!==Y)throw new TypeError("Private static access of wrong provenance")}(ct,Y),mt}function c(ct,Y,mt){return function v(ct,Y,mt){if(Y.set)Y.set.call(ct,mt);else{if(!Y.writable)throw new TypeError("attempted to set read only private field");Y.value=mt}}(ct,_(ct,Y,"set"),mt),mt}function m(ct,Y){return function D(ct,Y){return Y.get?Y.get.call(ct):Y.value}(ct,_(ct,Y,"get"))}function _(ct,Y,mt){if(!Y.has(ct))throw new TypeError("attempted to "+mt+" private field on non-instance");return Y.get(ct)}function P(ct,Y,mt){if(!Y.has(ct))throw new TypeError("attempted to get private field on non-instance");return mt}const i=16;var a=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,N=new WeakMap,K=new WeakMap,lt=new WeakMap,Q=new WeakMap,q=new WeakMap,ut=new WeakMap,ft=new WeakMap,z=new WeakMap,$=new WeakMap,G=new WeakMap,L=new WeakSet,R=new WeakSet,F=new WeakSet,p=new WeakSet,f=new WeakSet,x=new WeakSet,U=new WeakSet,B=new WeakSet,H=new WeakSet,X=new WeakSet,J=new WeakSet,st=new WeakSet,nt=new WeakSet,at=new WeakSet,ot=new WeakSet,yt=new WeakSet,rt=new WeakSet,d=new WeakSet,k=new WeakSet,M=new WeakSet,I=new WeakSet,W=new WeakSet;class j extends r.AnnotationEditor{constructor(Y){super({...Y,name:"inkEditor"}),A(this,W),A(this,I),A(this,M),A(this,k),A(this,d),A(this,rt),A(this,yt),A(this,ot),A(this,at),A(this,nt),A(this,st),A(this,J),A(this,X),A(this,H),A(this,B),A(this,U),A(this,x),A(this,f),A(this,p),A(this,F),A(this,R),A(this,L),w(this,a,{writable:!0,value:0}),w(this,S,{writable:!0,value:0}),w(this,E,{writable:!0,value:0}),w(this,O,{writable:!0,value:this.canvasPointermove.bind(this)}),w(this,N,{writable:!0,value:this.canvasPointerleave.bind(this)}),w(this,K,{writable:!0,value:this.canvasPointerup.bind(this)}),w(this,lt,{writable:!0,value:this.canvasPointerdown.bind(this)}),w(this,Q,{writable:!0,value:!1}),w(this,q,{writable:!0,value:!1}),w(this,ut,{writable:!0,value:null}),w(this,ft,{writable:!0,value:null}),w(this,z,{writable:!0,value:0}),w(this,$,{writable:!0,value:0}),w(this,G,{writable:!0,value:null}),this.color=Y.color||null,this.thickness=Y.thickness||null,this.opacity=Y.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Y){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(mt=>[mt,Y.get(mt)]))}static updateDefaultParams(Y,mt){switch(Y){case n.AnnotationEditorParamsType.INK_THICKNESS:j._defaultThickness=mt;break;case n.AnnotationEditorParamsType.INK_COLOR:j._defaultColor=mt;break;case n.AnnotationEditorParamsType.INK_OPACITY:j._defaultOpacity=mt/100}}updateParams(Y,mt){switch(Y){case n.AnnotationEditorParamsType.INK_THICKNESS:P(this,L,pt).call(this,mt);break;case n.AnnotationEditorParamsType.INK_COLOR:P(this,R,it).call(this,mt);break;case n.AnnotationEditorParamsType.INK_OPACITY:P(this,F,At).call(this,mt)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,j._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,j._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*j._defaultOpacity)]]}get propertiesToUpdate(){var Y;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||j._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||j._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!=(Y=this.opacity)?Y:j._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(P(this,J,et).call(this),P(this,st,tt).call(this)),this.isAttachedToDOM||(this.parent.add(this),P(this,nt,Z).call(this)),P(this,I,Pt).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,m(this,ft).disconnect(),c(this,ft,null),super.remove())}setParent(Y){!this.parent&&Y?this._uiManager.removeShouldRescale(this):this.parent&&null===Y&&this._uiManager.addShouldRescale(this),super.setParent(Y)}onScaleChanging(){const[Y,mt]=this.parentDimensions;this.setDimensions(this.width*Y,this.height*mt)}enableEditMode(){m(this,Q)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",m(this,lt)),this.canvas.addEventListener("pointerup",m(this,K)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",m(this,lt)),this.canvas.removeEventListener("pointerup",m(this,K)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){m(this,Q)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),c(this,Q,!0),this.div.classList.add("disabled"),P(this,I,Pt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(Y){super.focusin(Y),this.enableEditMode()}canvasPointerdown(Y){0!==Y.button||!this.isInEditMode()||m(this,Q)||(this.setInForeground(),"mouse"!==Y.type&&this.div.focus(),Y.stopPropagation(),this.canvas.addEventListener("pointerleave",m(this,N)),this.canvas.addEventListener("pointermove",m(this,O)),P(this,x,bt).call(this,Y.offsetX,Y.offsetY))}canvasPointermove(Y){Y.stopPropagation(),P(this,U,wt).call(this,Y.offsetX,Y.offsetY)}canvasPointerup(Y){0===Y.button&&this.isInEditMode()&&0!==this.currentPath.length&&(Y.stopPropagation(),P(this,X,Ft).call(this,Y),this.setInBackground())}canvasPointerleave(Y){P(this,X,Ft).call(this,Y),this.setInBackground()}render(){if(this.div)return this.div;let Y,mt;this.width&&(Y=this.x,mt=this.y),super.render(),j._l10nPromise.get("editor_ink2_aria_label").then(It=>{var Dt;return null===(Dt=this.div)||void 0===Dt?void 0:Dt.setAttribute("aria-label",It)});const[kt,xt,Lt,Ot]=P(this,p,St).call(this);if(this.setAt(kt,xt,0,0),this.setDims(Lt,Ot),P(this,J,et).call(this),this.width){const[It,Dt]=this.parentDimensions;this.setAt(Y*It,mt*Dt,this.width*It,this.height*Dt),c(this,q,!0),P(this,nt,Z).call(this),this.setDims(this.width*It,this.height*Dt),P(this,H,Rt).call(this),P(this,W,Nt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return P(this,st,tt).call(this),this.div}setDimensions(Y,mt){const kt=Math.round(Y),xt=Math.round(mt);if(m(this,z)===kt&&m(this,$)===xt)return;c(this,z,kt),c(this,$,xt),this.canvas.style.visibility="hidden",m(this,a)&&Math.abs(m(this,a)-Y/mt)>.01&&(mt=Math.ceil(Y/m(this,a)),this.setDims(Y,mt));const[Lt,Ot]=this.parentDimensions;this.width=Y/Lt,this.height=mt/Ot,m(this,Q)&&P(this,at,Et).call(this,Y,mt),P(this,nt,Z).call(this),P(this,H,Rt).call(this),this.canvas.style.visibility="visible"}static deserialize(Y,mt,kt){const xt=super.deserialize(Y,mt,kt);xt.thickness=Y.thickness,xt.color=n.Util.makeHexColor(...Y.color),xt.opacity=Y.opacity;const[Lt,Ot]=xt.pageDimensions,It=xt.width*Lt,Dt=xt.height*Ot,Ut=xt.parentScale,Gt=Y.thickness/2;c(xt,a,It/Dt),c(xt,Q,!0),c(xt,z,Math.round(It)),c(xt,$,Math.round(Dt));for(const{bezier:Bt}of Y.paths){const Ht=[];xt.paths.push(Ht);let Vt=Ut*(Bt[0]-Gt),zt=Ut*(Dt-Bt[1]-Gt);for(let $t=2,jt=Bt.length;$t<jt;$t+=6){const Yt=Ut*(Bt[$t+4]-Gt),qt=Ut*(Dt-Bt[$t+5]-Gt);Ht.push([[Vt,zt],[Ut*(Bt[$t]-Gt),Ut*(Dt-Bt[$t+1]-Gt)],[Ut*(Bt[$t+2]-Gt),Ut*(Dt-Bt[$t+3]-Gt)],[Yt,qt]]),Vt=Yt,zt=qt}const Xt=C(this,j,dt).call(this,Ht);xt.bezierPath2D.push(Xt)}const Wt=P(xt,k,Tt).call(xt);return c(xt,E,Math.max(i,Wt[2]-Wt[0])),c(xt,S,Math.max(i,Wt[3]-Wt[1])),P(xt,at,Et).call(xt,It,Dt),xt}serialize(){if(this.isEmpty())return null;const Y=this.getRect(0,0),mt=this.rotation%180==0?Y[3]-Y[1]:Y[2]-Y[0],kt=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:kt,thickness:this.thickness,opacity:this.opacity,paths:P(this,yt,ht).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,mt),pageIndex:this.pageIndex,rect:Y,rotation:this.rotation}}}function pt(ct){const Y=this.thickness;this.addCommands({cmd:()=>{this.thickness=ct,P(this,I,Pt).call(this)},undo:()=>{this.thickness=Y,P(this,I,Pt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function it(ct){const Y=this.color;this.addCommands({cmd:()=>{this.color=ct,P(this,H,Rt).call(this)},undo:()=>{this.color=Y,P(this,H,Rt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function At(ct){ct/=100;const Y=this.opacity;this.addCommands({cmd:()=>{this.opacity=ct,P(this,H,Rt).call(this)},undo:()=>{this.opacity=Y,P(this,H,Rt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function St(){const{parentRotation:ct,parentDimensions:[Y,mt]}=this;switch(ct){case 90:return[0,mt,mt,Y];case 180:return[Y,mt,Y,mt];case 270:return[Y,0,mt,Y];default:return[0,0,Y,mt]}}function vt(){const{ctx:ct,color:Y,opacity:mt,thickness:kt,parentScale:xt,scaleFactor:Lt}=this;ct.lineWidth=kt*xt/Lt,ct.lineCap="round",ct.lineJoin="round",ct.miterLimit=10,ct.strokeStyle=`${Y}${(0,g.opacityToHex)(mt)}`}function bt(ct,Y){this.isEditing=!0,m(this,q)||(c(this,q,!0),P(this,nt,Z).call(this),this.thickness||(this.thickness=j._defaultThickness),this.color||(this.color=j._defaultColor||r.AnnotationEditor._defaultLineColor),null!=this.opacity||(this.opacity=j._defaultOpacity)),this.currentPath.push([ct,Y]),c(this,ut,null),P(this,f,vt).call(this),this.ctx.beginPath(),this.ctx.moveTo(ct,Y),c(this,G,()=>{!m(this,G)||(m(this,ut)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):P(this,H,Rt).call(this),this.ctx.lineTo(...m(this,ut)),c(this,ut,null),this.ctx.stroke()),window.requestAnimationFrame(m(this,G)))}),window.requestAnimationFrame(m(this,G))}function wt(ct,Y){const[mt,kt]=this.currentPath.at(-1);ct===mt&&Y===kt||(this.currentPath.push([ct,Y]),c(this,ut,[ct,Y]))}function Ct(ct,Y){this.ctx.closePath(),c(this,G,null),ct=Math.min(Math.max(ct,0),this.canvas.width),Y=Math.min(Math.max(Y,0),this.canvas.height);const[mt,kt]=this.currentPath.at(-1);let xt;if((ct!==mt||Y!==kt)&&this.currentPath.push([ct,Y]),1!==this.currentPath.length)xt=(0,o.fitCurve)(this.currentPath,30,null);else{const Dt=[ct,Y];xt=[[Dt,Dt.slice(),Dt.slice(),Dt]]}const Lt=C(j,j,dt).call(j,xt);this.currentPath.length=0,this.addCommands({cmd:()=>{this.paths.push(xt),this.bezierPath2D.push(Lt),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(P(this,J,et).call(this),P(this,st,tt).call(this)),P(this,I,Pt).call(this))},mustExec:!0})}function Rt(){if(this.isEmpty())return void P(this,ot,Mt).call(this);P(this,f,vt).call(this);const{canvas:ct,ctx:Y}=this;Y.setTransform(1,0,0,1,0,0),Y.clearRect(0,0,ct.width,ct.height),P(this,ot,Mt).call(this);for(const mt of this.bezierPath2D)Y.stroke(mt)}function Ft(ct){P(this,B,Ct).call(this,ct.offsetX,ct.offsetY),this.canvas.removeEventListener("pointerleave",m(this,N)),this.canvas.removeEventListener("pointermove",m(this,O)),this.addToAnnotationStorage()}function et(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",j._l10nPromise.get("editor_ink_canvas_aria_label").then(ct=>{var Y;return null===(Y=this.canvas)||void 0===Y?void 0:Y.setAttribute("aria-label",ct)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function tt(){let ct=null;c(this,ft,new ResizeObserver(Y=>{const mt=Y[0].contentRect;mt.width&&mt.height&&(null!==ct&&clearTimeout(ct),ct=setTimeout(()=>{this.fixDims(),ct=null},100),this.setDimensions(mt.width,mt.height))})),m(this,ft).observe(this.div)}function Z(){if(!m(this,q))return;const[ct,Y]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ct),this.canvas.height=Math.ceil(this.height*Y),P(this,ot,Mt).call(this)}function Et(ct,Y){const mt=P(this,M,_t).call(this),kt=(ct-mt)/m(this,E),xt=(Y-mt)/m(this,S);this.scaleFactor=Math.min(kt,xt)}function Mt(){const ct=P(this,M,_t).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ct,this.translationY*this.scaleFactor+ct)}function dt(ct){const Y=new Path2D;for(let mt=0,kt=ct.length;mt<kt;mt++){const[xt,Lt,Ot,It]=ct[mt];0===mt&&Y.moveTo(...xt),Y.bezierCurveTo(Lt[0],Lt[1],Ot[0],Ot[1],It[0],It[1])}return Y}function ht(ct,Y,mt,kt){const Lt=[],Ot=this.thickness/2;let It,Dt;for(const Ut of this.paths){It=[],Dt=[];for(let Gt=0,Wt=Ut.length;Gt<Wt;Gt++){const[Bt,Ht,Vt,zt]=Ut[Gt],Xt=ct*(Bt[0]+Y)+Ot,$t=kt-ct*(Bt[1]+mt)-Ot,jt=ct*(Ht[0]+Y)+Ot,Kt=kt-ct*(Ht[1]+mt)-Ot,Jt=ct*(Vt[0]+Y)+Ot,Qt=kt-ct*(Vt[1]+mt)-Ot,Zt=ct*(zt[0]+Y)+Ot,Yt=kt-ct*(zt[1]+mt)-Ot;0===Gt&&(It.push(Xt,$t),Dt.push(Xt,$t)),It.push(jt,Kt,Jt,Qt,Zt,Yt),P(this,rt,V).call(this,Xt,$t,jt,Kt,Jt,Qt,Zt,Yt,4,Dt)}Lt.push({bezier:It,points:Dt})}return Lt}function V(ct,Y,mt,kt,xt,Lt,Ot,It,Dt,Ut){if(P(this,d,gt).call(this,ct,Y,mt,kt,xt,Lt,Ot,It))Ut.push(Ot,It);else{for(let Gt=1;Gt<Dt-1;Gt++){const Wt=Gt/Dt,Bt=1-Wt;let Ht=Wt*ct+Bt*mt,Vt=Wt*Y+Bt*kt,zt=Wt*mt+Bt*xt,Xt=Wt*kt+Bt*Lt;Ht=Wt*Ht+Bt*zt,Vt=Wt*Vt+Bt*Xt,zt=Wt*zt+Bt*(Wt*xt+Bt*Ot),Xt=Wt*Xt+Bt*(Wt*Lt+Bt*It),Ht=Wt*Ht+Bt*zt,Vt=Wt*Vt+Bt*Xt,Ut.push(Ht,Vt)}Ut.push(Ot,It)}}function gt(ct,Y,mt,kt,xt,Lt,Ot,It){const Gt=(3*kt-2*Y-It)**2,Bt=(3*Lt-Y-2*It)**2;return Math.max((3*mt-2*ct-Ot)**2,(3*xt-ct-2*Ot)**2)+Math.max(Gt,Bt)<=10}function Tt(){let ct=1/0,Y=-1/0,mt=1/0,kt=-1/0;for(const xt of this.paths)for(const[Lt,Ot,It,Dt]of xt){const Ut=n.Util.bezierBoundingBox(...Lt,...Ot,...It,...Dt);ct=Math.min(ct,Ut[0]),mt=Math.min(mt,Ut[1]),Y=Math.max(Y,Ut[2]),kt=Math.max(kt,Ut[3])}return[ct,mt,Y,kt]}function _t(){return m(this,Q)?Math.ceil(this.thickness*this.parentScale):0}function Pt(){let ct=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!m(this,Q))return void P(this,H,Rt).call(this);const Y=P(this,k,Tt).call(this),mt=P(this,M,_t).call(this);c(this,E,Math.max(i,Y[2]-Y[0])),c(this,S,Math.max(i,Y[3]-Y[1]));const kt=Math.ceil(mt+m(this,E)*this.scaleFactor),xt=Math.ceil(mt+m(this,S)*this.scaleFactor),[Lt,Ot]=this.parentDimensions;this.width=kt/Lt,this.height=xt/Ot,c(this,a,kt/xt),P(this,W,Nt).call(this);const It=this.translationX,Dt=this.translationY;this.translationX=-Y[0],this.translationY=-Y[1],P(this,nt,Z).call(this),P(this,H,Rt).call(this),c(this,z,kt),c(this,$,xt),this.setDims(kt,xt);const Ut=ct?mt/this.scaleFactor/2:0;this.translate(It-this.translationX-Ut,Dt-this.translationY-Ut)}function Nt(){const{style:ct}=this.div;m(this,a)>=1?(ct.minHeight="16px",ct.minWidth=`${Math.round(m(this,a)*i)}px`):(ct.minWidth="16px",ct.minHeight=`${Math.round(i/m(this,a))}px`)}e.InkEditor=j,T(j,"_defaultColor",null),T(j,"_defaultOpacity",1),T(j,"_defaultThickness",1),T(j,"_l10nPromise",void 0),T(j,"_type","ink")},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const n=t(163);e.fitCurve=n},b=>{"use strict";function t(l,c,v,m,_){var P,i,s,a,S,E,O,N,K,lt,Q,q,ut;if(2===l.length)return q=h.vectorLen(h.subtract(l[0],l[1]))/3,[P=[l[0],h.addArrays(l[0],h.mulItems(c,q)),h.addArrays(l[1],h.mulItems(v,q)),l[1]]];if(i=function A(l){var v,m,_,c=[];return l.forEach((D,P)=>{v=P?m+h.vectorLen(h.subtract(D,_)):0,c.push(v),m=v,_=D}),c=c.map(D=>D/m)}(l),[P,a,E]=n(l,i,i,c,v,_),0===a||a<m)return[P];if(a<m*m)for(s=i,S=a,O=E,ut=0;ut<20;ut++){if(s=o(P,l,s),[P,a,E]=n(l,i,s,c,v,_),a<m)return[P];if(E===O){let ft=a/S;if(ft>.9999&&ft<1.0001)break}S=a,O=E}return Q=[],(N=h.subtract(l[E-1],l[E+1])).every(ft=>0===ft)&&(N=h.subtract(l[E-1],l[E]),[N[0],N[1]]=[-N[1],N[0]]),K=h.normalize(N),lt=h.mulItems(K,-1),(Q=Q.concat(t(l.slice(0,E+1),c,K,m,_))).concat(t(l.slice(E),lt,v,m,_))}function n(l,c,v,m,_,D){var P,i,s;return P=function r(l,c,v,m){var _,D,P,i,s,a,O,N,K,lt,Q,q,ut,ft,z,$=l[0],G=l[l.length-1];for(_=[$,null,null,G],D=h.zeros_Xx2x2(c.length),Q=0,q=c.length;Q<q;Q++)(P=D[Q])[0]=h.mulItems(v,3*(ft=c[Q])*((z=1-ft)*z)),P[1]=h.mulItems(m,3*z*(ft*ft));for(i=[[0,0],[0,0]],s=[0,0],Q=0,q=l.length;Q<q;Q++)ft=c[Q],i[0][0]+=h.dot((P=D[Q])[0],P[0]),i[0][1]+=h.dot(P[0],P[1]),i[1][0]+=h.dot(P[0],P[1]),i[1][1]+=h.dot(P[1],P[1]),ut=h.subtract(l[Q],C.q([$,$,G,G],ft)),s[0]+=h.dot(P[0],ut),s[1]+=h.dot(P[1],ut);return O=0==(a=i[0][0]*i[1][1]-i[1][0]*i[0][1])?0:(s[0]*i[1][1]-s[1]*i[0][1])/a,N=0===a?0:(i[0][0]*s[1]-i[1][0]*s[0])/a,O<(K=1e-6*(lt=h.vectorLen(h.subtract($,G))))||N<K?(_[1]=h.addArrays($,h.mulItems(v,lt/3)),_[2]=h.addArrays(G,h.mulItems(m,lt/3))):(_[1]=h.addArrays($,h.mulItems(v,O)),_[2]=h.addArrays(G,h.mulItems(m,N))),_}(l,v,m,_),[i,s]=function T(l,c,v){var m,_,D,P,i,s,a,S;_=0,D=Math.floor(l.length/2);const E=u(c,10);for(i=0,s=l.length;i<s;i++)a=l[i],S=y(0,v[i],E,10),(m=(P=h.subtract(C.q(c,S),a))[0]*P[0]+P[1]*P[1])>_&&(_=m,D=i);return[_,D]}(l,P,c),D&&D({bez:P,points:l,params:c,maxErr:i,maxPoint:s}),[P,i,s]}function o(l,c,v){return v.map((m,_)=>function g(l,c,v){var m=h.subtract(C.q(l,v),c),_=C.qprime(l,v),D=h.mulMatrix(m,_),P=h.sum(h.squareItems(_))+2*h.mulMatrix(m,C.qprimeprime(l,v));return 0===P?v:v-D/P}(l,c[_],m))}var u=function(l,c){for(var v,m=[0],_=l[0],D=0,P=1;P<=c;P++)v=C.q(l,P/c),D+=h.vectorLen(h.subtract(v,_)),m.push(D),_=v;return m.map(i=>i/D)};function y(l,c,v,m){if(c<0)return 0;if(c>1)return 1;for(var D,i,s,a=1;a<=m;a++)if(c<=v[a]){s=(c-(D=v[a-1]))/(v[a]-D)*(a/m-(i=(a-1)/m))+i;break}return s}function w(l,c){return h.normalize(h.subtract(l,c))}class h{static zeros_Xx2x2(c){for(var v=[];c--;)v.push([0,0]);return v}static mulItems(c,v){return c.map(m=>m*v)}static mulMatrix(c,v){return c.reduce((m,_,D)=>m+_*v[D],0)}static subtract(c,v){return c.map((m,_)=>m-v[_])}static addArrays(c,v){return c.map((m,_)=>m+v[_])}static addItems(c,v){return c.map(m=>m+v)}static sum(c){return c.reduce((v,m)=>v+m)}static dot(c,v){return h.mulMatrix(c,v)}static vectorLen(c){return Math.hypot(...c)}static divItems(c,v){return c.map(m=>m/v)}static squareItems(c){return c.map(v=>v*v)}static normalize(c){return this.divItems(c,this.vectorLen(c))}}class C{static q(c,v){var m=1-v,_=h.mulItems(c[0],m*m*m),D=h.mulItems(c[1],3*m*m*v),P=h.mulItems(c[2],3*m*v*v),i=h.mulItems(c[3],v*v*v);return h.addArrays(h.addArrays(_,D),h.addArrays(P,i))}static qprime(c,v){var m=1-v,_=h.mulItems(h.subtract(c[1],c[0]),3*m*m),D=h.mulItems(h.subtract(c[2],c[1]),6*m*v),P=h.mulItems(h.subtract(c[3],c[2]),3*v*v);return h.addArrays(h.addArrays(_,D),P)}static qprimeprime(c,v){return h.addArrays(h.mulItems(h.addArrays(h.subtract(c[2],h.mulItems(c[1],2)),c[0]),6*(1-v)),h.mulItems(h.addArrays(h.subtract(c[3],h.mulItems(c[2],2)),c[1]),6*v))}}b.exports=function e(l,c,v){if(!Array.isArray(l))throw new TypeError("First argument should be an array");if(l.forEach(P=>{if(!Array.isArray(P)||P.some(i=>"number"!=typeof i)||P.length!==l[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(l=l.filter((P,i)=>0===i||!P.every((s,a)=>s===l[i-1][a]))).length<2)return[];const m=l.length,_=w(l[1],l[0]),D=w(l[m-2],l[m-1]);return t(l,_,D,c,v)},b.exports.fitCubic=t,b.exports.createTangent=w},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=t(1),r=t(139),o=t(136),g=t(165),A=t(166);function T(rt,d,k){return function u(rt,d){if(rt!==d)throw new TypeError("Private static access of wrong provenance")}(rt,d),k}function C(rt,d){(function l(rt,d){if(d.has(rt))throw new TypeError("Cannot initialize the same private elements twice on an object")})(rt,d),d.add(rt)}function c(rt,d,k){if(!d.has(rt))throw new TypeError("attempted to get private field on non-instance");return k}const v=1e3,_=new WeakSet;function D(rt){return{width:rt[2]-rt[0],height:rt[3]-rt[1]}}class P{static create(d){switch(d.data.annotationType){case n.AnnotationType.LINK:return new S(d);case n.AnnotationType.TEXT:return new N(d);case n.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new lt(d);case"Btn":return d.data.radioButton?new q(d):d.data.checkBox?new Q(d):new ut(d);case"Ch":return new ft(d)}return new K(d);case n.AnnotationType.POPUP:return new z(d);case n.AnnotationType.FREETEXT:return new G(d);case n.AnnotationType.LINE:return new L(d);case n.AnnotationType.SQUARE:return new R(d);case n.AnnotationType.CIRCLE:return new F(d);case n.AnnotationType.POLYLINE:return new p(d);case n.AnnotationType.CARET:return new x(d);case n.AnnotationType.INK:return new U(d);case n.AnnotationType.POLYGON:return new f(d);case n.AnnotationType.HIGHLIGHT:return new B(d);case n.AnnotationType.UNDERLINE:return new H(d);case n.AnnotationType.SQUIGGLY:return new X(d);case n.AnnotationType.STRIKEOUT:return new J(d);case n.AnnotationType.STAMP:return new st(d);case n.AnnotationType.FILEATTACHMENT:return new nt(d);default:return new i(d)}}}class i{constructor(d){let{isRenderable:k=!1,ignoreBorder:M=!1,createQuadrilaterals:I=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=k,this.data=d.data,this.layer=d.layer,this.page=d.page,this.viewport=d.viewport,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,k&&(this.container=this._createContainer(M)),I&&(this.quadrilaterals=this._createQuadrilaterals(M))}_createContainer(){let d=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{data:k,page:M,viewport:I}=this,W=document.createElement("section");W.setAttribute("data-annotation-id",k.id);const{pageWidth:j,pageHeight:pt,pageX:it,pageY:At}=I.rawDims,{width:St,height:vt}=D(k.rect),bt=n.Util.normalizeRect([k.rect[0],M.view[3]-k.rect[1]+M.view[1],k.rect[2],M.view[3]-k.rect[3]+M.view[1]]);if(!d&&k.borderStyle.width>0){W.style.borderWidth=`${k.borderStyle.width}px`;const Ct=k.borderStyle.horizontalCornerRadius,Rt=k.borderStyle.verticalCornerRadius;switch(Ct>0||Rt>0?W.style.borderRadius=`calc(${Ct}px * var(--scale-factor)) / calc(${Rt}px * var(--scale-factor))`:this instanceof q&&(W.style.borderRadius=`calc(${St}px * var(--scale-factor)) / calc(${vt}px * var(--scale-factor))`),k.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:W.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:W.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:W.style.borderBottomStyle="solid"}const Ft=k.borderColor||null;Ft?W.style.borderColor=n.Util.makeHexColor(0|Ft[0],0|Ft[1],0|Ft[2]):W.style.borderWidth=0}W.style.left=100*(bt[0]-it)/j+"%",W.style.top=100*(bt[1]-At)/pt+"%";const{rotation:wt}=k;return k.hasOwnCanvas||0===wt?(W.style.width=100*St/j+"%",W.style.height=100*vt/pt+"%"):this.setRotation(wt,W),W}setRotation(d){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;const{pageWidth:M,pageHeight:I}=this.viewport.rawDims,{width:W,height:j}=D(this.data.rect);let pt,it;d%180==0?(pt=100*W/M,it=100*j/I):(pt=100*j/M,it=100*W/I),k.style.width=`${pt}%`,k.style.height=`${it}%`,k.setAttribute("data-main-rotation",(360-d)%360)}get _commonActions(){const d=(k,M,I)=>{const W=I.detail[k];I.target.style[M]=g.ColorConverters[`${W[0]}_HTML`](W.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:k=>{const M=k.detail.display%2==1;this.container.style.visibility=M?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M,print:0===k.detail.display||3===k.detail.display})},print:k=>{this.annotationStorage.setValue(this.data.id,{print:k.detail.print})},hidden:k=>{this.container.style.visibility=k.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:k.detail.hidden})},focus:k=>{setTimeout(()=>k.target.focus({preventScroll:!1}),0)},userName:k=>{k.target.title=k.detail.userName},readonly:k=>{k.detail.readonly?k.target.setAttribute("readonly",""):k.target.removeAttribute("readonly")},required:k=>{this._setRequired(k.target,k.detail.required)},bgColor:k=>{d("bgColor","backgroundColor",k)},fillColor:k=>{d("fillColor","backgroundColor",k)},fgColor:k=>{d("fgColor","color",k)},textColor:k=>{d("textColor","color",k)},borderColor:k=>{d("borderColor","borderColor",k)},strokeColor:k=>{d("strokeColor","borderColor",k)},rotation:k=>{const M=k.detail.rotation;this.setRotation(M),this.annotationStorage.setValue(this.data.id,{rotation:M})}})}_dispatchEventFromSandbox(d,k){const M=this._commonActions;for(const I of Object.keys(k.detail)){const W=d[I]||M[I];null==W||W(k)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const k=this.annotationStorage.getRawValue(this.data.id);if(!k)return;const M=this._commonActions;for(const[I,W]of Object.entries(k)){const j=M[I];j&&(j({detail:{[I]:W},target:d}),delete k[I])}}_createQuadrilaterals(){let d=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;const k=[],M=this.data.rect;for(const I of this.data.quadPoints)this.data.rect=[I[2].x,I[2].y,I[1].x,I[1].y],k.push(this._createContainer(d));return this.data.rect=M,k}_createPopup(d,k){let M=this.container;this.quadrilaterals&&(d=d||this.quadrilaterals,M=this.quadrilaterals[0]),d||((d=document.createElement("div")).className="popupTriggerArea",M.append(d));const W=new $({container:M,trigger:d,color:k.color,titleObj:k.titleObj,modificationDate:k.modificationDate,contentsObj:k.contentsObj,richText:k.richText,hideWrapper:!0}).render();W.style.left="100%",M.append(W)}_renderQuadrilaterals(d){for(const k of this.quadrilaterals)k.className=d;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const M=[];if(this._fieldObjects){const I=this._fieldObjects[d];if(I)for(const{page:W,id:j,exportValues:pt}of I){if(-1===W||j===k)continue;const it="string"==typeof pt?pt:null,At=document.querySelector(`[data-element-id="${j}"]`);!At||_.has(At)?M.push({id:j,exportValue:it,domElement:At}):(0,n.warn)(`_getElementsByName - element not allowed: ${j}`)}return M}for(const I of document.getElementsByName(d)){const{exportValue:W}=I,j=I.getAttribute("data-element-id");j!==k&&(!_.has(I)||M.push({id:j,exportValue:W,domElement:I}))}return M}}var s=new WeakSet,a=new WeakSet;class S extends i{constructor(d){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(d,{isRenderable:!0,ignoreBorder:!(null==k||!k.ignoreBorder),createQuadrilaterals:!0}),C(this,a),C(this,s),this.isTooltipOnly=d.data.isTooltipOnly}render(){const{data:d,linkService:k}=this,M=document.createElement("a");M.setAttribute("data-element-id",d.id);let I=!1;return d.url?(k.addLinkAttributes(M,d.url,d.newWindow),I=!0):d.action?(this._bindNamedAction(M,d.action),I=!0):d.attachment?(this._bindAttachment(M,d.attachment),I=!0):d.setOCGState?(c(this,a,O).call(this,M,d.setOCGState),I=!0):d.dest?(this._bindLink(M,d.dest),I=!0):(d.actions&&(d.actions.Action||d.actions["Mouse Up"]||d.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(M,d),I=!0),d.resetForm?(this._bindResetFormAction(M,d.resetForm),I=!0):this.isTooltipOnly&&!I&&(this._bindLink(M,""),I=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((W,j)=>{const pt=0===j?M:M.cloneNode();return W.append(pt),W}):(this.container.className="linkAnnotation",I&&this.container.append(M),this.container)}_bindLink(d,k){d.href=this.linkService.getDestinationHash(k),d.onclick=()=>(k&&this.linkService.goToDestination(k),!1),(k||""===k)&&c(this,s,E).call(this)}_bindNamedAction(d,k){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeNamedAction(k),!1),c(this,s,E).call(this)}_bindAttachment(d,k){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>{var M;return null===(M=this.downloadManager)||void 0===M||M.openOrDownloadData(this.container,k.content,k.filename),!1},c(this,s,E).call(this)}_bindJSAction(d,k){d.href=this.linkService.getAnchorUrl("");const M=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const I of Object.keys(k.actions)){const W=M.get(I);!W||(d[W]=()=>{var j;return null===(j=this.linkService.eventBus)||void 0===j||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k.id,name:I}}),!1})}d.onclick||(d.onclick=()=>!1),c(this,s,E).call(this)}_bindResetFormAction(d,k){const M=d.onclick;if(M||(d.href=this.linkService.getAnchorUrl("")),c(this,s,E).call(this),!this._fieldObjects)return(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(M||(d.onclick=()=>!1));d.onclick=()=>{null==M||M();const{fields:I,refs:W,include:j}=k,pt=[];if(0!==I.length||0!==W.length){const vt=new Set(W);for(const bt of I){const wt=this._fieldObjects[bt]||[];for(const{id:Ct}of wt)vt.add(Ct)}for(const bt of Object.values(this._fieldObjects))for(const wt of bt)vt.has(wt.id)===j&&pt.push(wt)}else for(const vt of Object.values(this._fieldObjects))pt.push(...vt);const it=this.annotationStorage,At=[];for(const vt of pt){const{id:bt}=vt;switch(At.push(bt),vt.type){case"text":case"combobox":case"listbox":it.setValue(bt,{value:vt.defaultValue||""});break;case"checkbox":case"radiobutton":it.setValue(bt,{value:vt.defaultValue===vt.exportValues});break;default:continue}const wt=document.querySelector(`[data-element-id="${bt}"]`);wt&&(_.has(wt)?wt.dispatchEvent(new Event("resetform")):(0,n.warn)(`_bindResetFormAction - element not allowed: ${bt}`))}var St;return this.enableScripting&&(null===(St=this.linkService.eventBus)||void 0===St||St.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:At,name:"ResetForm"}})),!1}}}function E(){this.container.setAttribute("data-internal-link","")}function O(rt,d){rt.href=this.linkService.getAnchorUrl(""),rt.onclick=()=>(this.linkService.executeSetOCGState(d),!1),c(this,s,E).call(this)}class N extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str)})}render(){this.container.className="textAnnotation";const d=document.createElement("img");return d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(d,this.data),this.container.append(d),this.container}}class K extends i{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(d){const{isWin:k,isMac:M}=n.FeatureTest.platform;return k&&d.ctrlKey||M&&d.metaKey}_setEventListener(d,k,M,I){k.includes("mouse")?d.addEventListener(k,W=>{var j;null===(j=this.linkService.eventBus)||void 0===j||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:M,value:I(W),shift:W.shiftKey,modifier:this._getKeyModifier(W)}})}):d.addEventListener(k,W=>{var j;null===(j=this.linkService.eventBus)||void 0===j||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:M,value:I(W)}})})}_setEventListeners(d,k,M){for(const[W,j]of k){var I;("Action"===j||null!==(I=this.data.actions)&&void 0!==I&&I[j])&&this._setEventListener(d,W,j,M)}}_setBackgroundColor(d){const k=this.data.backgroundColor||null;d.style.backgroundColor=null===k?"transparent":n.Util.makeHexColor(k[0],k[1],k[2])}_setTextStyle(d){const{fontColor:M}=this.data.defaultAppearanceData,I=this.data.defaultAppearanceData.fontSize||9,W=d.style;let j;const it=At=>Math.round(10*At)/10;if(this.data.multiLine){const At=Math.abs(this.data.rect[3]-this.data.rect[1]-2),St=Math.round(At/(n.LINE_FACTOR*I))||1;j=Math.min(I,it(At/St/n.LINE_FACTOR))}else{const At=Math.abs(this.data.rect[3]-this.data.rect[1]-2);j=Math.min(I,it(At/n.LINE_FACTOR))}W.fontSize=`calc(${j}px * var(--scale-factor))`,W.color=n.Util.makeHexColor(M[0],M[1],M[2]),null!==this.data.textAlignment&&(W.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(d,k){k?d.setAttribute("required",!0):d.removeAttribute("required"),d.setAttribute("aria-required",k)}}class lt extends K{constructor(d){super(d,{isRenderable:d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue})}setPropertyOnSiblings(d,k,M,I){const W=this.annotationStorage;for(const j of this._getElementsByName(d.name,d.id))j.domElement&&(j.domElement[k]=M),W.setValue(j.id,{[I]:M})}render(){const d=this.annotationStorage,k=this.data.id;this.container.className="textWidgetAnnotation";let M=null;if(this.renderForms){const W=d.getValue(k,{value:this.data.fieldValue});let j=W.formattedValue||W.value||"";const pt=d.getValue(k,{charLimit:this.data.maxLen}).charLimit;pt&&j.length>pt&&(j=j.slice(0,pt));const it={userValue:j,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(M=document.createElement("textarea"),M.textContent=j,this.data.doNotScroll&&(M.style.overflowY="hidden")):(M=document.createElement("input"),M.type="text",M.setAttribute("value",j),this.data.doNotScroll&&(M.style.overflowX="hidden")),_.add(M),M.setAttribute("data-element-id",k),M.disabled=this.data.readOnly,M.name=this.data.fieldName,M.tabIndex=v,this._setRequired(M,this.data.required),pt&&(M.maxLength=pt),M.addEventListener("input",St=>{d.setValue(k,{value:St.target.value}),this.setPropertyOnSiblings(M,"value",St.target.value,"value")}),M.addEventListener("resetform",St=>{var bt;const vt=null!=(bt=this.data.defaultFieldValue)?bt:"";M.value=it.userValue=vt,it.formattedValue=null});let At=St=>{const{formattedValue:vt}=it;null!=vt&&(St.target.value=vt),St.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var I;M.addEventListener("focus",vt=>{const{target:bt}=vt;it.userValue&&(bt.value=it.userValue),it.lastCommittedValue=bt.value,it.commitKey=1}),M.addEventListener("updatefromsandbox",vt=>{this._dispatchEventFromSandbox({value(wt){var Ct;it.userValue=null!=(Ct=wt.detail.value)?Ct:"",d.setValue(k,{value:it.userValue.toString()}),wt.target.value=it.userValue},formattedValue(wt){const{formattedValue:Ct}=wt.detail;it.formattedValue=Ct,null!=Ct&&wt.target!==document.activeElement&&(wt.target.value=Ct),d.setValue(k,{formattedValue:Ct})},selRange(wt){wt.target.setSelectionRange(...wt.detail.selRange)},charLimit:wt=>{var Ct;const{charLimit:Rt}=wt.detail,{target:Ft}=wt;if(0===Rt)return void Ft.removeAttribute("maxLength");Ft.setAttribute("maxLength",Rt);let et=it.userValue;!et||et.length<=Rt||(et=et.slice(0,Rt),Ft.value=it.userValue=et,d.setValue(k,{value:et}),null===(Ct=this.linkService.eventBus)||void 0===Ct||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:et,willCommit:!0,commitKey:1,selStart:Ft.selectionStart,selEnd:Ft.selectionEnd}}))}},vt)}),M.addEventListener("keydown",vt=>{var bt;it.commitKey=1;let wt=-1;if("Escape"===vt.key?wt=0:"Enter"!==vt.key||this.data.multiLine?"Tab"===vt.key&&(it.commitKey=3):wt=2,-1===wt)return;const{value:Ct}=vt.target;it.lastCommittedValue!==Ct&&(it.lastCommittedValue=Ct,it.userValue=Ct,null===(bt=this.linkService.eventBus)||void 0===bt||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Ct,willCommit:!0,commitKey:wt,selStart:vt.target.selectionStart,selEnd:vt.target.selectionEnd}}))});const St=At;At=null,M.addEventListener("blur",vt=>{if(!vt.relatedTarget)return;const{value:bt}=vt.target;var wt;it.userValue=bt,it.lastCommittedValue!==bt&&(null===(wt=this.linkService.eventBus)||void 0===wt||wt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:bt,willCommit:!0,commitKey:it.commitKey,selStart:vt.target.selectionStart,selEnd:vt.target.selectionEnd}})),St(vt)}),null!==(I=this.data.actions)&&void 0!==I&&I.Keystroke&&M.addEventListener("beforeinput",vt=>{var bt;it.lastCommittedValue=null;const{data:wt,target:Ct}=vt,{value:Rt,selectionStart:Ft,selectionEnd:et}=Ct;let tt=Ft,Z=et;switch(vt.inputType){case"deleteWordBackward":{const Et=Rt.substring(0,Ft).match(/\w*[^\w]*$/);Et&&(tt-=Et[0].length);break}case"deleteWordForward":{const Et=Rt.substring(Ft).match(/^[^\w]*\w*/);Et&&(Z+=Et[0].length);break}case"deleteContentBackward":Ft===et&&(tt-=1);break;case"deleteContentForward":Ft===et&&(Z+=1)}vt.preventDefault(),null===(bt=this.linkService.eventBus)||void 0===bt||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:Rt,change:wt||"",willCommit:!1,selStart:tt,selEnd:Z}})}),this._setEventListeners(M,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],vt=>vt.target.value)}if(At&&M.addEventListener("blur",At),this.data.comb){const vt=(this.data.rect[2]-this.data.rect[0])/pt;M.classList.add("comb"),M.style.letterSpacing=`calc(${vt}px * var(--scale-factor) - 1ch)`}}else M=document.createElement("div"),M.textContent=this.data.fieldValue,M.style.verticalAlign="middle",M.style.display="table-cell";return this._setTextStyle(M),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class Q extends K{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,k=this.data,M=k.id;let I=d.getValue(M,{value:k.exportValue===k.fieldValue}).value;"string"==typeof I&&(I="Off"!==I,d.setValue(M,{value:I})),this.container.className="buttonWidgetAnnotation checkBox";const W=document.createElement("input");return _.add(W),W.setAttribute("data-element-id",M),W.disabled=k.readOnly,this._setRequired(W,this.data.required),W.type="checkbox",W.name=k.fieldName,I&&W.setAttribute("checked",!0),W.setAttribute("exportValue",k.exportValue),W.tabIndex=v,W.addEventListener("change",j=>{const{name:pt,checked:it}=j.target;for(const At of this._getElementsByName(pt,M)){const St=it&&At.exportValue===k.exportValue;At.domElement&&(At.domElement.checked=St),d.setValue(At.id,{value:St})}d.setValue(M,{value:it})}),W.addEventListener("resetform",j=>{j.target.checked=(k.defaultFieldValue||"Off")===k.exportValue}),this.enableScripting&&this.hasJSActions&&(W.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value(it){it.target.checked="Off"!==it.detail.value,d.setValue(M,{value:it.target.checked})}},j)}),this._setEventListeners(W,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class q extends K{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const d=this.annotationStorage,k=this.data,M=k.id;let I=d.getValue(M,{value:k.fieldValue===k.buttonValue}).value;"string"==typeof I&&(I=I!==k.buttonValue,d.setValue(M,{value:I}));const W=document.createElement("input");if(_.add(W),W.setAttribute("data-element-id",M),W.disabled=k.readOnly,this._setRequired(W,this.data.required),W.type="radio",W.name=k.fieldName,I&&W.setAttribute("checked",!0),W.tabIndex=v,W.addEventListener("change",j=>{const{name:pt,checked:it}=j.target;for(const At of this._getElementsByName(pt,M))d.setValue(At.id,{value:!1});d.setValue(M,{value:it})}),W.addEventListener("resetform",j=>{const pt=k.defaultFieldValue;j.target.checked=null!=pt&&pt===k.buttonValue}),this.enableScripting&&this.hasJSActions){const j=k.buttonValue;W.addEventListener("updatefromsandbox",pt=>{this._dispatchEventFromSandbox({value:At=>{const St=j===At.detail.value;for(const vt of this._getElementsByName(At.target.name)){const bt=St&&vt.id===M;vt.domElement&&(vt.domElement.checked=bt),d.setValue(vt.id,{value:bt})}}},pt)}),this._setEventListeners(W,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pt=>pt.target.checked)}return this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class ut extends S{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();d.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(d.title=this.data.alternativeText);const k=d.lastChild;return this.enableScripting&&this.hasJSActions&&k&&(this._setDefaultPropertiesFromJS(k),k.addEventListener("updatefromsandbox",M=>{this._dispatchEventFromSandbox({},M)})),d}}class ft extends K{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const d=this.annotationStorage,k=this.data.id,M=d.getValue(k,{value:this.data.fieldValue}),I=document.createElement("select");_.add(I),I.setAttribute("data-element-id",k),I.disabled=this.data.readOnly,this._setRequired(I,this.data.required),I.name=this.data.fieldName,I.tabIndex=v;let W=this.data.combo&&this.data.options.length>0;this.data.combo||(I.size=this.data.options.length,this.data.multiSelect&&(I.multiple=!0)),I.addEventListener("resetform",St=>{const vt=this.data.defaultFieldValue;for(const bt of I.options)bt.selected=bt.value===vt});for(const St of this.data.options){const vt=document.createElement("option");vt.textContent=St.displayValue,vt.value=St.exportValue,M.value.includes(St.exportValue)&&(vt.setAttribute("selected",!0),W=!1),I.append(vt)}let j=null;if(W){const St=document.createElement("option");St.value=" ",St.setAttribute("hidden",!0),St.setAttribute("selected",!0),I.prepend(St),j=()=>{St.remove(),I.removeEventListener("input",j),j=null},I.addEventListener("input",j)}const pt=St=>{const vt=St?"value":"textContent",{options:bt,multiple:wt}=I;return wt?Array.prototype.filter.call(bt,Ct=>Ct.selected).map(Ct=>Ct[vt]):-1===bt.selectedIndex?null:bt[bt.selectedIndex][vt]};let it=pt(!1);const At=St=>Array.prototype.map.call(St.target.options,bt=>({displayValue:bt.textContent,exportValue:bt.value}));return this.enableScripting&&this.hasJSActions?(I.addEventListener("updatefromsandbox",St=>{this._dispatchEventFromSandbox({value(bt){var wt;null===(wt=j)||void 0===wt||wt();const Ct=bt.detail.value,Rt=new Set(Array.isArray(Ct)?Ct:[Ct]);for(const Ft of I.options)Ft.selected=Rt.has(Ft.value);d.setValue(k,{value:pt(!0)}),it=pt(!1)},multipleSelection(bt){I.multiple=!0},remove(bt){const wt=I.options,Ct=bt.detail.remove;wt[Ct].selected=!1,I.remove(Ct),wt.length>0&&-1===Array.prototype.findIndex.call(wt,Ft=>Ft.selected)&&(wt[0].selected=!0),d.setValue(k,{value:pt(!0),items:At(bt)}),it=pt(!1)},clear(bt){for(;0!==I.length;)I.remove(0);d.setValue(k,{value:null,items:[]}),it=pt(!1)},insert(bt){const{index:wt,displayValue:Ct,exportValue:Rt}=bt.detail.insert,Ft=I.children[wt],et=document.createElement("option");et.textContent=Ct,et.value=Rt,Ft?Ft.before(et):I.append(et),d.setValue(k,{value:pt(!0),items:At(bt)}),it=pt(!1)},items(bt){const{items:wt}=bt.detail;for(;0!==I.length;)I.remove(0);for(const Ct of wt){const{displayValue:Rt,exportValue:Ft}=Ct,et=document.createElement("option");et.textContent=Rt,et.value=Ft,I.append(et)}I.options.length>0&&(I.options[0].selected=!0),d.setValue(k,{value:pt(!0),items:At(bt)}),it=pt(!1)},indices(bt){const wt=new Set(bt.detail.indices);for(const Ct of bt.target.options)Ct.selected=wt.has(Ct.index);d.setValue(k,{value:pt(!0)}),it=pt(!1)},editable(bt){bt.target.disabled=!bt.detail.editable}},St)}),I.addEventListener("input",St=>{var vt;const bt=pt(!0);d.setValue(k,{value:bt}),St.preventDefault(),null===(vt=this.linkService.eventBus)||void 0===vt||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:k,name:"Keystroke",value:it,changeEx:bt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(I,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],St=>St.target.checked)):I.addEventListener("input",function(St){d.setValue(k,{value:pt(!0)})}),this.data.combo&&this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class z extends i{constructor(d){var k,M,I;const{data:W}=d;super(d,{isRenderable:!z.IGNORE_TYPES.has(W.parentType)&&!!(null!==(k=W.titleObj)&&void 0!==k&&k.str||null!==(M=W.contentsObj)&&void 0!==M&&M.str||null!==(I=W.richText)&&void 0!==I&&I.str)})}render(){this.container.className="popupAnnotation";const d=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===d.length)return this.container;const k=new $({container:this.container,trigger:Array.from(d),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),M=this.page,I=n.Util.normalizeRect([this.data.parentRect[0],M.view[3]-this.data.parentRect[1]+M.view[1],this.data.parentRect[2],M.view[3]-this.data.parentRect[3]+M.view[1]]),W=I[0]+this.data.parentRect[2]-this.data.parentRect[0],j=I[1],{pageWidth:pt,pageHeight:it,pageX:At,pageY:St}=this.viewport.rawDims;return this.container.style.left=100*(W-At)/pt+"%",this.container.style.top=100*(j-St)/it+"%",this.container.append(k.render()),this.container}}!function y(rt,d,k){d=function w(rt){var d=function h(rt,d){if("object"!=typeof rt||null===rt)return rt;var k=rt[Symbol.toPrimitive];if(void 0!==k){var M=k.call(rt,d||"default");if("object"!=typeof M)return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(rt)}(rt,"string");return"symbol"==typeof d?d:String(d)}(d),d in rt?Object.defineProperty(rt,d,{value:k,enumerable:!0,configurable:!0,writable:!0}):rt[d]=k}(z,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class ${constructor(d){this.container=d.container,this.trigger=d.trigger,this.color=d.color,this.titleObj=d.titleObj,this.modificationDate=d.modificationDate,this.contentsObj=d.contentsObj,this.richText=d.richText,this.hideWrapper=d.hideWrapper||!1,this.pinned=!1}render(){var d,k;const I=document.createElement("div");I.className="popupWrapper",this.hideElement=this.hideWrapper?I:this.container,this.hideElement.hidden=!0;const W=document.createElement("div");W.className="popup";const j=this.color;j&&(W.style.backgroundColor=n.Util.makeHexColor(0|.7*(255-j[0])+j[0],0|.7*(255-j[1])+j[1],0|.7*(255-j[2])+j[2]));const pt=document.createElement("h1");pt.dir=this.titleObj.dir,pt.textContent=this.titleObj.str,W.append(pt);const it=r.PDFDateString.toDateObject(this.modificationDate);if(it){const At=document.createElement("span");At.className="popupDate",At.textContent="{{date}}, {{time}}",At.dataset.l10nId="annotation_date_string",At.dataset.l10nArgs=JSON.stringify({date:it.toLocaleDateString(),time:it.toLocaleTimeString()}),W.append(At)}if(null===(d=this.richText)||void 0===d||!d.str||null!==(k=this.contentsObj)&&void 0!==k&&k.str&&this.contentsObj.str!==this.richText.str){const At=this._formatContents(this.contentsObj);W.append(At)}else A.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:W}),W.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const At of this.trigger)At.addEventListener("click",this._toggle.bind(this)),At.addEventListener("mouseover",this._show.bind(this,!1)),At.addEventListener("mouseout",this._hide.bind(this,!1));return W.addEventListener("click",this._hide.bind(this,!0)),I.append(W),I}_formatContents(d){let{str:k,dir:M}=d;const I=document.createElement("p");I.className="popupContent",I.dir=M;const W=k.split(/(?:\r\n?|\n)/);for(let j=0,pt=W.length;j<pt;++j)I.append(document.createTextNode(W[j])),j<pt-1&&I.append(document.createElement("br"));return I}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class G extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0}),this.textContent=d.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const d=document.createElement("div");d.className="annotationTextContent",d.setAttribute("role","comment");for(const k of this.textContent){const M=document.createElement("span");M.textContent=k,d.append(M)}this.container.append(d)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class L extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const d=this.data,{width:k,height:M}=D(d.rect),I=this.svgFactory.create(k,M,!0),W=this.svgFactory.createElement("svg:line");return W.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),W.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),W.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),W.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),W.setAttribute("stroke-width",d.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),I.append(W),this.container.append(I),this._createPopup(W,d),this.container}}class R extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const d=this.data,{width:k,height:M}=D(d.rect),I=this.svgFactory.create(k,M,!0),W=d.borderStyle.width,j=this.svgFactory.createElement("svg:rect");return j.setAttribute("x",W/2),j.setAttribute("y",W/2),j.setAttribute("width",k-W),j.setAttribute("height",M-W),j.setAttribute("stroke-width",W||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),I.append(j),this.container.append(I),this._createPopup(j,d),this.container}}class F extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const d=this.data,{width:k,height:M}=D(d.rect),I=this.svgFactory.create(k,M,!0),W=d.borderStyle.width,j=this.svgFactory.createElement("svg:ellipse");return j.setAttribute("cx",k/2),j.setAttribute("cy",M/2),j.setAttribute("rx",k/2-W/2),j.setAttribute("ry",M/2-W/2),j.setAttribute("stroke-width",W||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),I.append(j),this.container.append(I),this._createPopup(j,d),this.container}}class p extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:k,height:M}=D(d.rect),I=this.svgFactory.create(k,M,!0);let W=[];for(const pt of d.vertices)W.push(pt.x-d.rect[0]+","+(d.rect[3]-pt.y));W=W.join(" ");const j=this.svgFactory.createElement(this.svgElementName);return j.setAttribute("points",W),j.setAttribute("stroke-width",d.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),I.append(j),this.container.append(I),this._createPopup(j,d),this.container}}class f extends p{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class U extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const d=this.data,{width:k,height:M}=D(d.rect),I=this.svgFactory.create(k,M,!0);for(const W of d.inkLists){let j=[];for(const it of W)j.push(`${it.x-d.rect[0]},${d.rect[3]-it.y}`);j=j.join(" ");const pt=this.svgFactory.createElement(this.svgElementName);pt.setAttribute("points",j),pt.setAttribute("stroke-width",d.borderStyle.width||1),pt.setAttribute("stroke","transparent"),pt.setAttribute("fill","transparent"),this._createPopup(pt,d),I.append(pt)}return this.container.append(I),this.container}}class B extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class H extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class J extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class st extends i{constructor(d){var k,M,I;super(d,{isRenderable:!!(d.data.hasPopup||null!==(k=d.data.titleObj)&&void 0!==k&&k.str||null!==(M=d.data.contentsObj)&&void 0!==M&&M.str||null!==(I=d.data.richText)&&void 0!==I&&I.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class nt extends i{constructor(d){var k;super(d,{isRenderable:!0});const{filename:M,content:I}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(M,!0),this.content=I,null===(k=this.linkService.eventBus)||void 0===k||k.dispatch("fileattachmentannotation",{source:this,filename:M,content:I})}render(){var d,k;let M;return this.container.className="fileAttachmentAnnotation",this.data.hasAppearance?M=document.createElement("div"):(M=document.createElement("img"),M.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),M.className="popupTriggerArea",M.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(d=this.data.titleObj)&&void 0!==d&&d.str||null!==(k=this.data.contentsObj)&&void 0!==k&&k.str||this.data.richText)&&this._createPopup(M,this.data),this.container.append(M),this.container}_download(){var d;null===(d=this.downloadManager)||void 0===d||d.openOrDownloadData(this.container,this.content,this.filename)}}class at{static render(d){const{annotations:k,div:M,viewport:I,accessibilityManager:W}=d;(0,r.setLayerDimensions)(M,I);const j={data:null,layer:M,page:d.page,viewport:I,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:!1!==d.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:d.annotationStorage||new o.AnnotationStorage,enableScripting:!0===d.enableScripting,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects};let pt=0;for(const it of k){if(it.annotationType!==n.AnnotationType.POPUP){const{width:vt,height:bt}=D(it.rect);if(vt<=0||bt<=0)continue}j.data=it;const At=P.create(j);if(!At.isRenderable)continue;const St=At.render();if(it.hidden&&(St.style.visibility="hidden"),Array.isArray(St))for(const vt of St)vt.style.zIndex=pt++,T(at,at,ot).call(at,vt,it.id,M,W);else St.style.zIndex=pt++,At instanceof z?M.prepend(St):T(at,at,ot).call(at,St,it.id,M,W)}T(this,at,yt).call(this,M,d.annotationCanvasMap)}static update(d){const{annotationCanvasMap:k,div:M,viewport:I}=d;(0,r.setLayerDimensions)(M,{rotation:I.rotation}),T(this,at,yt).call(this,M,k),M.hidden=!1}}function ot(rt,d,k,M){const I=rt.firstChild||rt;I.id=`${r.AnnotationPrefix}${d}`,k.append(rt),null==M||M.moveElementInDOM(k,rt,I,!1)}function yt(rt,d){if(d){for(const[k,M]of d){const I=rt.querySelector(`[data-annotation-id="${k}"]`);if(!I)continue;const{firstChild:W}=I;W?"CANVAS"===W.nodeName?W.replaceWith(M):W.before(M):I.append(M)}d.clear()}}e.AnnotationLayer=at},(b,e)=>{"use strict";function t(r){return Math.floor(255*Math.max(0,Math.min(1,r))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class n{static CMYK_G(o){let[g,A,T,u]=o;return["G",1-Math.min(1,.3*g+.59*T+.11*A+u)]}static G_CMYK(o){let[g]=o;return["CMYK",0,0,0,1-g]}static G_RGB(o){let[g]=o;return["RGB",g,g,g]}static G_HTML(o){let[g]=o;const A=t(g);return`#${A}${A}${A}`}static RGB_G(o){let[g,A,T]=o;return["G",.3*g+.59*A+.11*T]}static RGB_HTML(o){let[g,A,T]=o;return`#${t(g)}${t(A)}${t(T)}`}static T_HTML(){return"#00000000"}static CMYK_RGB(o){let[g,A,T,u]=o;return["RGB",1-Math.min(1,g+u),1-Math.min(1,T+u),1-Math.min(1,A+u)]}static CMYK_HTML(o){const g=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(g)}static RGB_CMYK(o){let[g,A,T]=o;const u=1-g,y=1-A,w=1-T;return["CMYK",u,y,w,Math.min(u,y,w)]}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=t(151);e.XfaLayer=class r{static setupStorage(g,A,T,u,y){const w=u.getValue(A,{value:null});switch(T.name){case"textarea":if(null!==w.value&&(g.textContent=w.value),"print"===y)break;g.addEventListener("input",h=>{u.setValue(A,{value:h.target.value})});break;case"input":if("radio"===T.attributes.type||"checkbox"===T.attributes.type){if(w.value===T.attributes.xfaOn?g.setAttribute("checked",!0):w.value===T.attributes.xfaOff&&g.removeAttribute("checked"),"print"===y)break;g.addEventListener("change",h=>{u.setValue(A,{value:h.target.getAttribute(h.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==w.value&&g.setAttribute("value",w.value),"print"===y)break;g.addEventListener("input",h=>{u.setValue(A,{value:h.target.value})})}break;case"select":if(null!==w.value)for(const h of T.children)h.attributes.value===w.value&&(h.attributes.selected=!0);g.addEventListener("input",h=>{const C=h.target.options;u.setValue(A,{value:-1===C.selectedIndex?"":C[C.selectedIndex].value})})}}static setAttributes(g){let{html:A,element:T,storage:u=null,intent:y,linkService:w}=g;const{attributes:h}=T,C=A instanceof HTMLAnchorElement;"radio"===h.type&&(h.name=`${h.name}-${y}`);for(const[l,c]of Object.entries(h))if(null!=c)switch(l){case"class":c.length&&A.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":A.setAttribute("data-element-id",c);break;case"style":Object.assign(A.style,c);break;case"textContent":A.textContent=c;break;default:(!C||"href"!==l&&"newWindow"!==l)&&A.setAttribute(l,c)}C&&w.addLinkAttributes(A,h.href,h.newWindow),u&&h.dataId&&this.setupStorage(A,h.dataId,T,u)}static render(g){const A=g.annotationStorage,T=g.linkService,u=g.xfaHtml,y=g.intent||"display",w=document.createElement(u.name);u.attributes&&this.setAttributes({html:w,element:u,intent:y,linkService:T});const h=[[u,-1,w]],C=g.div;if(C.append(w),g.viewport){const v=`matrix(${g.viewport.transform.join(",")})`;C.style.transform=v}"richText"!==y&&C.setAttribute("class","xfaLayer xfaFont");const l=[];for(;h.length>0;){var c;const[v,m,_]=h.at(-1);if(m+1===v.children.length){h.pop();continue}const D=v.children[++h.at(-1)[1]];if(null===D)continue;const{name:P}=D;if("#text"===P){const s=document.createTextNode(D.value);l.push(s),_.append(s);continue}let i;if(i=null!=D&&null!==(c=D.attributes)&&void 0!==c&&c.xmlns?document.createElementNS(D.attributes.xmlns,P):document.createElement(P),_.append(i),D.attributes&&this.setAttributes({html:i,element:D,storage:A,intent:y,linkService:T}),D.children&&D.children.length>0)h.push([D,-1,i]);else if(D.value){const s=document.createTextNode(D.value);n.XfaText.shouldBuildText(P)&&l.push(s),i.append(s)}}for(const v of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:l}}static update(g){const A=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=A,g.div.hidden=!1}}},(b,e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=t(139),r=t(1),o=t(3);let g=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=g;{let c=function(i){let s=[];const a=[];for(const S of i)"save"!==S.fn?"restore"===S.fn?s=a.pop():s.push(S):(s.push({fnId:92,fn:"group",items:[]}),a.push(s),s=s.at(-1).items);return s},v=function(i){if(Number.isInteger(i))return i.toString();const s=i.toFixed(10);let a=s.length-1;if("0"!==s[a])return s;do{a--}while("0"===s[a]);return s.substring(0,"."===s[a]?a:a+1)},m=function(i){if(0===i[4]&&0===i[5]){if(0===i[1]&&0===i[2])return 1===i[0]&&1===i[3]?"":`scale(${v(i[0])} ${v(i[3])})`;if(i[0]===i[3]&&i[1]===-i[2]){const s=180*Math.acos(i[0])/Math.PI;return`rotate(${v(s)})`}}else if(1===i[0]&&0===i[1]&&0===i[2]&&1===i[3])return`translate(${v(i[4])} ${v(i[5])})`;return`matrix(${v(i[0])} ${v(i[1])} ${v(i[2])} ${v(i[3])} ${v(i[4])} ${v(i[5])})`};const A={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",y=["butt","round","square"],w=["miter","round","bevel"],h=function(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!a)return URL.createObjectURL(new Blob([i],{type:s}));const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E=`data:${s};base64,`;for(let O=0,N=i.length;O<N;O+=3){const K=255&i[O],lt=255&i[O+1],Q=255&i[O+2];E+=S[K>>2]+S[(3&K)<<4|lt>>4]+S[O+1<N?(15&lt)<<2|Q>>6:64]+S[O+2<N?63&Q:64]}return E},C=function(){const i=new Uint8Array([137,80,78,71,13,10,26,10]),a=new Int32Array(256);for(let Q=0;Q<256;Q++){let q=Q;for(let ut=0;ut<8;ut++)q=1&q?3988292384^q>>1&2147483647:q>>1&2147483647;a[Q]=q}function E(Q,q,ut,ft){let z=ft;const $=q.length;ut[z]=$>>24&255,ut[z+1]=$>>16&255,ut[z+2]=$>>8&255,ut[z+3]=255&$,z+=4,ut[z]=255&Q.charCodeAt(0),ut[z+1]=255&Q.charCodeAt(1),ut[z+2]=255&Q.charCodeAt(2),ut[z+3]=255&Q.charCodeAt(3),z+=4,ut.set(q,z),z+=q.length;const G=function S(Q,q,ut){let ft=-1;for(let z=q;z<ut;z++)ft=ft>>>8^a[255&(ft^Q[z])];return-1^ft}(ut,ft+4,z);ut[z]=G>>24&255,ut[z+1]=G>>16&255,ut[z+2]=G>>8&255,ut[z+3]=255&G}function K(Q){let q=Q.length;const ut=65535,ft=Math.ceil(q/ut),z=new Uint8Array(2+q+5*ft+4);let $=0;z[$++]=120,z[$++]=156;let G=0;for(;q>ut;)z[$++]=0,z[$++]=255,z[$++]=255,z[$++]=0,z[$++]=0,z.set(Q.subarray(G,G+ut),$),$+=ut,G+=ut,q-=ut;z[$++]=1,z[$++]=255&q,z[$++]=q>>8&255,z[$++]=255&~q,z[$++]=(65535&~q)>>8&255,z.set(Q.subarray(G),$),$+=Q.length-G;const L=function O(Q,q,ut){let ft=1,z=0;for(let $=q;$<ut;++$)ft=(ft+(255&Q[$]))%65521,z=(z+ft)%65521;return z<<16|ft}(Q,0,Q.length);return z[$++]=L>>24&255,z[$++]=L>>16&255,z[$++]=L>>8&255,z[$++]=255&L,z}return function(q,ut,ft){return function lt(Q,q,ut,ft){const z=Q.width,$=Q.height;let G,L,R;const F=Q.data;switch(q){case r.ImageKind.GRAYSCALE_1BPP:L=0,G=1,R=z+7>>3;break;case r.ImageKind.RGB_24BPP:L=2,G=8,R=3*z;break;case r.ImageKind.RGBA_32BPP:L=6,G=8,R=4*z;break;default:throw new Error("invalid format")}const p=new Uint8Array((1+R)*$);let f=0,x=0;for(let st=0;st<$;++st)p[f++]=0,p.set(F.subarray(x,x+R),f),x+=R,f+=R;if(q===r.ImageKind.GRAYSCALE_1BPP&&ft){f=0;for(let st=0;st<$;st++){f++;for(let nt=0;nt<R;nt++)p[f++]^=255}}const U=new Uint8Array([z>>24&255,z>>16&255,z>>8&255,255&z,$>>24&255,$>>16&255,$>>8&255,255&$,G,L,0,0,0]),B=function N(Q){if(!o.isNodeJS)return K(Q);try{let q;q=parseInt(process.versions.node)>=8?Q:Buffer.from(Q);const ut=require("zlib").deflateSync(q,{level:9});return ut instanceof Uint8Array?ut:new Uint8Array(ut)}catch(q){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+q)}return K(Q)}(p),X=new Uint8Array(i.length+36+U.length+B.length);let J=0;return X.set(i,J),J+=i.length,E("IHDR",U,X,J),J+=12+U.length,E("IDATA",B,X,J),J+=12+B.length,E("IEND",new Uint8Array(0),X,J),h(X,"image/png",ut)}(q,void 0===q.kind?r.ImageKind.GRAYSCALE_1BPP:q.kind,ut,ft)}}();class l{constructor(){this.fontSizeScale=1,this.fontWeight=A.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=A.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,a){this.x=s,this.y=a}}let _=0,D=0,P=0;e.SVGGraphics=g=class{constructor(i,s){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new l,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[];for(const S in r.OPS)this._operatorIdMapping[r.OPS[S]]=S}getObject(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof i?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):s}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const s=i.fnArray,a=i.argsArray;for(let S=0,E=s.length;S<E;S++)if(s[S]===r.OPS.dependency)for(const O of a[S]){const N=O.startsWith("g_")?this.commonObjs:this.objs,K=new Promise(lt=>{N.get(O,lt)});this.current.dependencies.push(K)}return Promise.all(this.current.dependencies)}transform(i,s,a,S,E,O){this.transformMatrix=r.Util.transform(this.transformMatrix,[i,s,a,S,E,O]),this.tgrp=null}getSVG(i,s){this.viewport=s;const a=this._initialize(s);return this.loadDependencies(i).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),a))}convertOpList(i){const s=this._operatorIdMapping,a=i.argsArray,S=i.fnArray,E=[];for(let O=0,N=S.length;O<N;O++){const K=S[O];E.push({fnId:K,fn:s[K],args:a[O]})}return c(E)}executeOpTree(i){for(const s of i){const a=s.fn,E=s.args;switch(0|s.fnId){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(E);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case r.OPS.setFont:this.setFont(E);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(E[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(E[0],E[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case r.OPS.setHScale:this.setHScale(E[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case r.OPS.setTextRise:this.setTextRise(E[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case r.OPS.setLineWidth:this.setLineWidth(E[0]);break;case r.OPS.setLineJoin:this.setLineJoin(E[0]);break;case r.OPS.setLineCap:this.setLineCap(E[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case r.OPS.setFillColorN:this.setFillColorN(E);break;case r.OPS.shadingFill:this.shadingFill(E[0]);break;case r.OPS.setDash:this.setDash(E[0],E[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case r.OPS.setFlatness:this.setFlatness(E[0]);break;case r.OPS.setGState:this.setGState(E[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case r.OPS.constructPath:this.constructPath(E[0],E[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,r.warn)(`Unimplemented operator ${a}`)}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,s,a,S,E,O){const N=this.current;N.textMatrix=N.lineMatrix=[i,s,a,S,E,O],N.textMatrixScale=Math.hypot(i,s),N.x=N.lineX=0,N.y=N.lineY=0,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${v(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",v(-N.y)),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtElement.append(N.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=r.IDENTITY_MATRIX,i.lineMatrix=r.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,s){const a=this.current;a.x=a.lineX+=i,a.y=a.lineY+=s,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${v(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",v(-a.y))}showText(i){const s=this.current,a=s.font,S=s.fontSize;if(0===S)return;const E=s.fontSizeScale,O=s.charSpacing,N=s.wordSpacing,K=s.fontDirection,lt=s.textHScale*K,Q=a.vertical,q=Q?1:-1,ut=a.defaultVMetrics,ft=S*s.fontMatrix[0];let z=0;for(const L of i){if(null===L){z+=K*N;continue}if("number"==typeof L){z+=q*L*S/1e3;continue}const R=(L.isSpace?N:0)+O,F=L.fontChar;let p,f,U,x=L.width;if(Q){let B;const H=L.vmetric||ut;B=L.vmetric?H[1]:.5*x,B=-B*ft,x=H?-H[0]:x,p=B/E,f=(z+H[2]*ft)/E}else p=z/E,f=0;(L.isInFont||a.missingFile)&&(s.xcoords.push(s.x+p),Q&&s.ycoords.push(-s.y+f),s.tspan.textContent+=F),U=Q?x*ft-R*K:x*ft+R*K,z+=U}s.tspan.setAttributeNS(null,"x",s.xcoords.map(v).join(" ")),s.tspan.setAttributeNS(null,"y",Q?s.ycoords.map(v).join(" "):v(-s.y)),Q?s.y-=z:s.x+=z*lt,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${v(s.fontSize)}px`),s.fontStyle!==A.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==A.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const $=s.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;$===r.TextRenderingMode.FILL||$===r.TextRenderingMode.FILL_STROKE?(s.fillColor!==A.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.tspan.setAttributeNS(null,"fill",s.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),($===r.TextRenderingMode.STROKE||$===r.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(s.tspan,1/(s.textMatrixScale||1));let G=s.textMatrix;0!==s.textRise&&(G=G.slice(),G[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${m(G)} scale(${v(lt)}, -1)`),s.txtElement.setAttributeNS(T,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(i,s){this.setLeading(-s),this.moveText(i,s)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=h(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${s}); }\n`}setFont(i){const s=this.current,a=this.commonObjs.get(i[0]);let S=i[1];s.font=a,this.embedFonts&&!a.missingFile&&!this.embeddedFonts[a.loadedName]&&(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),s.fontMatrix=a.fontMatrix||r.FONT_IDENTITY_MATRIX;let E="normal";a.black?E="900":a.bold&&(E="bold");const O=a.italic?"italic":"normal";S<0?(S=-S,s.fontDirection=-1):s.fontDirection=1,s.fontSize=S,s.fontFamily=a.loadedName,s.fontWeight=E,s.fontStyle=O,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",v(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var i;const s=this.current;s.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(i=s.txtElement)&&void 0!==i&&i.hasChildNodes()&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=y[i]}setLineJoin(i){this.current.lineJoin=w[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,s,a){this.current.strokeColor=r.Util.makeHexColor(i,s,a)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,s,a){this.current.fillColor=r.Util.makeHexColor(i,s,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const s=this.viewport.width,a=this.viewport.height,S=r.Util.inverseTransform(this.transformMatrix),E=r.Util.applyTransform([0,0],S),O=r.Util.applyTransform([0,a],S),N=r.Util.applyTransform([s,0],S),K=r.Util.applyTransform([s,a],S),lt=Math.min(E[0],O[0],N[0],K[0]),Q=Math.min(E[1],O[1],N[1],K[1]),q=Math.max(E[0],O[0],N[0],K[0]),ut=Math.max(E[1],O[1],N[1],K[1]),ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x",lt),ft.setAttributeNS(null,"y",Q),ft.setAttributeNS(null,"width",q-lt),ft.setAttributeNS(null,"height",ut-Q),ft.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&ft.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ft)}_makeColorN_Pattern(i){return"TilingPattern"===i[0]?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const s=i[1],a=i[2],S=i[3]||r.IDENTITY_MATRIX,[E,O,N,K]=i[4],lt=i[5],Q=i[6],q=i[7],ut="shading"+P++,[ft,z,$,G]=r.Util.normalizeRect([...r.Util.applyTransform([E,O],S),...r.Util.applyTransform([N,K],S)]),[L,R]=r.Util.singularValueDecompose2dScale(S),F=lt*L,p=Q*R,f=this.svgFactory.createElement("svg:pattern");f.setAttributeNS(null,"id",ut),f.setAttributeNS(null,"patternUnits","userSpaceOnUse"),f.setAttributeNS(null,"width",F),f.setAttributeNS(null,"height",p),f.setAttributeNS(null,"x",`${ft}`),f.setAttributeNS(null,"y",`${z}`);const x=this.svg,U=this.transformMatrix,B=this.current.fillColor,H=this.current.strokeColor,X=this.svgFactory.create($-ft,G-z);if(this.svg=X,this.transformMatrix=S,2===q){const J=r.Util.makeHexColor(...s);this.current.fillColor=J,this.current.strokeColor=J}return this.executeOpTree(this.convertOpList(a)),this.svg=x,this.transformMatrix=U,this.current.fillColor=B,this.current.strokeColor=H,f.append(X.childNodes[0]),this.defs.append(f),`url(#${ut})`}_makeShadingPattern(i){switch("string"==typeof i&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const s="shading"+P++,a=i[3];let S;switch(i[1]){case"axial":const E=i[4],O=i[5];S=this.svgFactory.createElement("svg:linearGradient"),S.setAttributeNS(null,"id",s),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"x1",E[0]),S.setAttributeNS(null,"y1",E[1]),S.setAttributeNS(null,"x2",O[0]),S.setAttributeNS(null,"y2",O[1]);break;case"radial":const N=i[4],K=i[5],lt=i[6],Q=i[7];S=this.svgFactory.createElement("svg:radialGradient"),S.setAttributeNS(null,"id",s),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"cx",K[0]),S.setAttributeNS(null,"cy",K[1]),S.setAttributeNS(null,"r",Q),S.setAttributeNS(null,"fx",N[0]),S.setAttributeNS(null,"fy",N[1]),S.setAttributeNS(null,"fr",lt);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const E of a){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",E[0]),O.setAttributeNS(null,"stop-color",E[1]),S.append(O)}return this.defs.append(S),`url(#${s})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,s){this.current.dashArray=i,this.current.dashPhase=s}constructPath(i,s){const a=this.current;let S=a.x,E=a.y,O=[],N=0;for(const K of i)switch(0|K){case r.OPS.rectangle:S=s[N++],E=s[N++];const q=S+s[N++],ut=E+s[N++];O.push("M",v(S),v(E),"L",v(q),v(E),"L",v(q),v(ut),"L",v(S),v(ut),"Z");break;case r.OPS.moveTo:S=s[N++],E=s[N++],O.push("M",v(S),v(E));break;case r.OPS.lineTo:S=s[N++],E=s[N++],O.push("L",v(S),v(E));break;case r.OPS.curveTo:S=s[N+4],E=s[N+5],O.push("C",v(s[N]),v(s[N+1]),v(s[N+2]),v(s[N+3]),v(S),v(E)),N+=6;break;case r.OPS.curveTo2:O.push("C",v(S),v(E),v(s[N]),v(s[N+1]),v(s[N+2]),v(s[N+3])),S=s[N+2],E=s[N+3],N+=4;break;case r.OPS.curveTo3:S=s[N+2],E=s[N+3],O.push("C",v(s[N]),v(s[N+1]),v(S),v(E),v(S),v(E)),N+=4;break;case r.OPS.closePath:O.push("Z")}O=O.join(" "),a.path&&i.length>0&&i[0]!==r.OPS.rectangle&&i[0]!==r.OPS.moveTo?O=a.path.getAttributeNS(null,"d")+O:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(a.path)),a.path.setAttributeNS(null,"d",O),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(S,E)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element)return void(this.pendingClip=null);const s="clippath"+_++,a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",s),a.setAttributeNS(null,"transform",m(this.transformMatrix));const S=i.element.cloneNode(!0);if(S.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,a.append(S),this.defs.append(a),i.activeClipUrl){i.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;a.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const s=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",s)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[s,a]of i)switch(s){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,r.warn)(`Unimplemented graphic state operator ${s}`)}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=this.current;let S=a.dashArray;1!==s&&S.length>0&&(S=S.map(function(E){return s*E})),i.setAttributeNS(null,"stroke",a.strokeColor),i.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",v(a.miterLimit)),i.setAttributeNS(null,"stroke-linecap",a.lineCap),i.setAttributeNS(null,"stroke-linejoin",a.lineJoin),i.setAttributeNS(null,"stroke-width",v(s*a.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",S.map(v).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",v(s*a.dashPhase)+"px")}eoFill(){var i;null===(i=this.current.element)||void 0===i||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;null===(i=this.current.element)||void 0===i||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const s=this.getObject(i);s?this.paintInlineImageXObject(s):(0,r.warn)(`Dependent image with object ID ${i} is not ready yet`)}paintInlineImageXObject(i,s){const a=i.width,S=i.height,E=C(i,this.forceDataSchema,!!s),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",v(a)),O.setAttributeNS(null,"height",v(S)),this.current.element=O,this.clip("nonzero");const N=this.svgFactory.createElement("svg:image");N.setAttributeNS(u,"xlink:href",E),N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y",v(-S)),N.setAttributeNS(null,"width",v(a)+"px"),N.setAttributeNS(null,"height",v(S)+"px"),N.setAttributeNS(null,"transform",`scale(${v(1/a)} ${v(-1/S)})`),s?s.append(N):this._ensureTransformGroup().append(N)}paintImageMaskXObject(i){const s=this.getObject(i.data,i);if(s.bitmap)return void(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const a=this.current,S=s.width,E=s.height,O=a.fillColor;a.maskId="mask"+D++;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",a.maskId);const K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x","0"),K.setAttributeNS(null,"y","0"),K.setAttributeNS(null,"width",v(S)),K.setAttributeNS(null,"height",v(E)),K.setAttributeNS(null,"fill",O),K.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.append(N),this._ensureTransformGroup().append(K),this.paintInlineImageXObject(s,N)}paintFormXObjectBegin(i,s){if(Array.isArray(i)&&6===i.length&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),s){const a=s[2]-s[0],S=s[3]-s[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",s[0]),E.setAttributeNS(null,"y",s[1]),E.setAttributeNS(null,"width",v(a)),E.setAttributeNS(null,"height",v(S)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const s=this.svgFactory.create(i.width,i.height),a=this.svgFactory.createElement("svg:defs");s.append(a),this.defs=a;const S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",m(i.transform)),s.append(S),this.svg=S,s}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",m(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(b){var e=__webpack_module_cache__[b];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[b]={exports:{}};return __webpack_modules__[b](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{"use strict";var b=__webpack_exports__;Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(b,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(b,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(b,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(b,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return g.AnnotationEditorUIManager}}),Object.defineProperty(b,"AnnotationLayer",{enumerable:!0,get:function(){return A.AnnotationLayer}}),Object.defineProperty(b,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(b,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(b,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(b,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(b,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(b,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(b,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(b,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(b,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(b,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(b,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(b,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(b,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(b,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(b,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(b,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(b,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(b,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(b,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(b,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(b,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(b,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(b,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(b,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(b,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(b,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(b,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(b,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(b,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(b,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(b,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(b,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(b,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(b,"version",{enumerable:!0,get:function(){return t.version}});var e=__w_pdfjs_require__(1),t=__w_pdfjs_require__(135),n=__w_pdfjs_require__(139),r=__w_pdfjs_require__(158),o=__w_pdfjs_require__(159),g=__w_pdfjs_require__(138),A=__w_pdfjs_require__(164),T=__w_pdfjs_require__(146),u=__w_pdfjs_require__(167),y=__w_pdfjs_require__(166)})(),__webpack_exports__})());