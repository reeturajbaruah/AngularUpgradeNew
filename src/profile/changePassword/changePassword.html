<page-centered-container hasAlternateBackgroundColor="true">
    <div fxLayout="column">
        <div fxFlexOffset="21px">

            <form #ChangePasswordForm="ngForm"
                  validation-focus novalidate
                  fxLayout="column start"
                  method="post">

                <!-- This is double wrapped in 2 divs to apply the fxFlexOffset to replicate "padding-top: 21px" -->
                <card-container>

                    <!--Title-->
                    <header>
                        <h2>{{cmsContent.Title}}</h2>
                        <mat-divider class="u-spacing__divider--marginTopBottom"></mat-divider>
                    </header>

                    <!--Description/Subtitle-->
                    <section *ngIf="cmsContent.ShortDescription">
                        <article [innerHtml]="cmsContent.ShortDescription"></article>
                    </section>

                    <section>
                        <!--currentPassword INPUT BOX-->
                        <div fxLayout="column"
                             class="u-spacing__fieldToField--marginTop"
                             ngClass="spanPosition"
                             [error-check]="currentPasswordInput">
                            <mat-label for="currentPassword">CURRENT PASSWORD (REQUIRED)</mat-label>
                            <input type="text"
                                   id="currentPasswordTxtBox"
                                   [(ngModel)]="addMissingInformation.currentPassword"
                                   #currentPasswordInput="ngModel"
                                   name="currentPassword"
                                   tabindex="1"
                                   [type]="isShowCurrentPassword ? 'text' : 'password'"
                                   [ngClass]="isShowCurrentPassword ? 'pwd-hide' : 'pwd-show'"
                                   required />

                            <show-hide-input-button [(showField)]="isShowCurrentPassword"></show-hide-input-button>
                            
                            <error-messages [errors]="currentPasswordInput.errors" [activeBeforeSubmit]="currentPasswordInput.touched">
                                <error-message rule="required">Please enter your password</error-message>
                            </error-messages>
                        </div>

                        <!-- NEW PASSWORD INPUT BOX -->
                        <div fxLayout="column"
                             class="u-spacing__fieldToField--marginTop"
                             [error-check]="newPasswordInput">
                            <mat-label for="newPassword">NEW PASSWORD</mat-label>
                            <input type="text"
                                   id="newPasswordTxtBox"
                                   [(ngModel)]="addMissingInformation.password"
                                   #newPasswordInput="ngModel"
                                   name="newPassword"
                                   tabindex="2"
                                   [type]="isShowNewPassword ? 'text' : 'password'"
                                   [notEqualTo]="addMissingInformation.currentPassword"
                                   pattern="[A-Za-z0-9._!@#$^*&();?{}`~<>,+-]+$"
                                   minlength="12"
                                   maxlength="50"
                                   [ngClass]="isShowNewPassword ? 'pwd-hide' : 'pwd-show'"
                                   required />

                            <show-hide-input-button [(showField)]="isShowNewPassword"></show-hide-input-button>
                            <span class="password-rules">{{pwCmsData.PasswordDesc}}</span>

                            <error-messages [errors]="newPasswordInput.errors" [activeBeforeSubmit]="newPasswordInput.touched">
                                <error-message rule="required">Please enter a password</error-message>
                                <error-message rule="minlength">{{pwCmsData.MinPassword}}</error-message>
                                <error-message rule="maxlength">{{pwCmsData.MaxPassword}}</error-message>
                                <error-message rule="pattern">{{pwCmsData.InvalidCharacter}}</error-message>
                                <error-message rule="notEqualTo">New password must be different from current password.</error-message>
                            </error-messages>
                        </div>

                    </section>
                </card-container>

                <!--Submit Button-->
                <div class="u-spacing__buttonToField--marginTop">
                    <action-buttons (main)="saveInformation(ChangePasswordForm)"
                                    (alt)="cancel()">
                        <span action-main
                              tabindex="3">SAVE</span>
                        <span action-alt
                              tabindex="4">Cancel</span>
                    </action-buttons>
                </div>

            </form>
        </div>
    </div>
</page-centered-container>
