<page-centered-container>
    <form #ConfirmForm="ngForm" validation-focus name="violationsForm" fxLayout="column" class="u-spacing--widthFill">

        <card-container>
            <header>
                <h2>{{ cmsData?.EMAIL_TITLE || '' }}</h2>
                <mat-divider class="u-spacing__divider--marginTopBottom"></mat-divider>
            </header>
            <article>{{ cmsData?.EMAIL_INSTRUCTION || '' }}</article>
        
            <!--Email-->
            <email-address class="u-spacing--widthFill u-spacing__fieldToSection--marginTop"
                [(emailAddress)]="plateContainer.email" [header]="cmsData?.EMAIL_HEADER || ''" [name]="emailAddress"
                [required]="false" [hideMinMax]="true">
            </email-address>
        </card-container>

        <card-container class="u-spacing__cardToCard--marginTop">
            <header>
                <div fxLayout="row" fxLayoutAlign="start center" class="u-spacing--widthFill">
                    <h2 fxFlex="grow">{{ cmsData?.BILLING_INFO_HEADER || '' }}</h2>
                    <a class="editButton" (click)="openModal()" fxFlex="none" aria-label="Edit">
                        Edit
                    </a>
                </div>
                <mat-divider class="u-spacing__divider--marginTopBottom"></mat-divider>
            </header>

            <payment-display [billingType]="billingInfo.billingType" [bankDetails]="billingInfo.eft"
                [creditCard]="billingInfo.credit" [showAccountNumber]="true" [showLabels]="true">
            </payment-display>

            <address-display *ngIf="billingInfo.billingType"
                [address]="billingInfo.billingType === BillingType.Credit ?  billingInfo.credit : billingInfo.eft"
                [international]="billingInfo.billingType === BillingType.Credit ? billingInfo.credit.international : billingInfo.eft.international"
                [showLabels]="true">
            </address-display>

            <row-container [rowType]="'emphasis'" class="u-spacing__rowToSection--marginTop">
                <section col-start id="totalPaymentLabel" fxFlex="grow">
                    {{ cmsData?.TOTAL_PAYMENT || '' }}
                </section>

                <section col-end id="totalPaymentValue" fxFlex="none">
                    <currency [value]="totalPayment"></currency>
                </section>
            </row-container>
        </card-container>

        <section class="u-spacing__buttonToField--marginTop">
            <wizard-ui (next)="submit($event)" (previous)="previous($event)">
                <span wizard-next>PAY</span>
                <span wizard-previous fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon svgIcon="previous-arrow"></mat-icon>
                    Previous
                </span>
                <span wizard-cancel>Cancel</span>
            </wizard-ui>
        </section>

    </form>
</page-centered-container>
